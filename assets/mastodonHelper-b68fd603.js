var Ls=Object.defineProperty;var xs=(r,t,e)=>t in r?Ls(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var D=(r,t,e)=>(xs(r,typeof t!="symbol"?t+"":t,e),e);import{ac as Cs,q as jn,r as Gn,k as It,p as Ds}from"./index-74d1e11d.js";const Fs=globalThis.FormData,Ms=globalThis.Headers,Us=globalThis.Request,ks=globalThis.Response,Bs=globalThis.fetch,js=globalThis.AbortController;var Vn=Fs,be=Ms,Gs=Us,Vs=ks,Ws=Bs,Wn=js,lt={},qs={get exports(){return lt},set exports(r){lt=r}};const Hs="2.0.0",zs=256,Xs=Number.MAX_SAFE_INTEGER||9007199254740991,Ks=16;var Ne={SEMVER_SPEC_VERSION:Hs,MAX_LENGTH:zs,MAX_SAFE_INTEGER:Xs,MAX_SAFE_COMPONENT_LENGTH:Ks};const Qs=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var _e=Qs;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e}=Ne,n=_e;t=r.exports={};const s=t.re=[],i=t.src=[],o=t.t={};let u=0;const a=(h,p,f)=>{const d=u++;n(h,d,p),o[h]=d,i[d]=p,s[d]=new RegExp(p,f?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","[0-9]+"),a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),a("MAINVERSION",`(${i[o.NUMERICIDENTIFIER]})\\.(${i[o.NUMERICIDENTIFIER]})\\.(${i[o.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${i[o.NUMERICIDENTIFIERLOOSE]})\\.(${i[o.NUMERICIDENTIFIERLOOSE]})\\.(${i[o.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${i[o.NUMERICIDENTIFIER]}|${i[o.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${i[o.NUMERICIDENTIFIERLOOSE]}|${i[o.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${i[o.PRERELEASEIDENTIFIER]}(?:\\.${i[o.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${i[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[o.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER","[0-9A-Za-z-]+"),a("BUILD",`(?:\\+(${i[o.BUILDIDENTIFIER]}(?:\\.${i[o.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${i[o.MAINVERSION]}${i[o.PRERELEASE]}?${i[o.BUILD]}?`),a("FULL",`^${i[o.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${i[o.MAINVERSIONLOOSE]}${i[o.PRERELEASELOOSE]}?${i[o.BUILD]}?`),a("LOOSE",`^${i[o.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${i[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${i[o.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${i[o.XRANGEIDENTIFIER]})(?:\\.(${i[o.XRANGEIDENTIFIER]})(?:\\.(${i[o.XRANGEIDENTIFIER]})(?:${i[o.PRERELEASE]})?${i[o.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${i[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[o.XRANGEIDENTIFIERLOOSE]})(?:${i[o.PRERELEASELOOSE]})?${i[o.BUILD]}?)?)?`),a("XRANGE",`^${i[o.GTLT]}\\s*${i[o.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${i[o.GTLT]}\\s*${i[o.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?(?:$|[^\\d])`),a("COERCERTL",i[o.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${i[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",a("TILDE",`^${i[o.LONETILDE]}${i[o.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${i[o.LONETILDE]}${i[o.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${i[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",a("CARET",`^${i[o.LONECARET]}${i[o.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${i[o.LONECARET]}${i[o.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${i[o.GTLT]}\\s*(${i[o.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${i[o.GTLT]}\\s*(${i[o.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${i[o.GTLT]}\\s*(${i[o.LOOSEPLAIN]}|${i[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${i[o.XRANGEPLAIN]})\\s+-\\s+(${i[o.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${i[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[o.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(qs,lt);const Ys=["includePrerelease","loose","rtl"],Js=r=>r?typeof r!="object"?{loose:!0}:Ys.filter(t=>r[t]).reduce((t,e)=>(t[e]=!0,t),{}):{};var Le=Js;const Yr=/^[0-9]+$/,qn=(r,t)=>{const e=Yr.test(r),n=Yr.test(t);return e&&n&&(r=+r,t=+t),r===t?0:e&&!n?-1:n&&!e?1:r<t?-1:1},Zs=(r,t)=>qn(t,r);var Hn={compareIdentifiers:qn,rcompareIdentifiers:Zs};const ye=_e,{MAX_LENGTH:Jr,MAX_SAFE_INTEGER:de}=Ne,{re:Zr,t:tn}=lt,ti=Le,{compareIdentifiers:Pt}=Hn;let ei=class tt{constructor(t,e){if(e=ti(e),t instanceof tt){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Jr)throw new TypeError(`version is longer than ${Jr} characters`);ye("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?Zr[tn.LOOSE]:Zr[tn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>de||this.major<0)throw new TypeError("Invalid major version");if(this.minor>de||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>de||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<de)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ye("SemVer.compare",this.version,this.options,t),!(t instanceof tt)){if(typeof t=="string"&&t===this.version)return 0;t=new tt(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof tt||(t=new tt(t,this.options)),Pt(this.major,t.major)||Pt(this.minor,t.minor)||Pt(this.patch,t.patch)}comparePre(t){if(t instanceof tt||(t=new tt(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],s=t.prerelease[e];if(ye("prerelease compare",e,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Pt(n,s)}while(++e)}compareBuild(t){t instanceof tt||(t=new tt(t,this.options));let e=0;do{const n=this.build[e],s=t.build[e];if(ye("prerelease compare",e,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Pt(n,s)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}e&&(Pt(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var V=ei;const{MAX_LENGTH:ri}=Ne,{re:en,t:rn}=lt,nn=V,ni=Le,si=(r,t)=>{if(t=ni(t),r instanceof nn)return r;if(typeof r!="string"||r.length>ri||!(t.loose?en[rn.LOOSE]:en[rn.FULL]).test(r))return null;try{return new nn(r,t)}catch{return null}};var jt=si;const ii=jt,oi=(r,t)=>{const e=ii(r,t);return e?e.version:null};var ai=oi;const li=jt,ci=(r,t)=>{const e=li(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var ui=ci;const sn=V,pi=(r,t,e,n)=>{typeof e=="string"&&(n=e,e=void 0);try{return new sn(r instanceof sn?r.version:r,e).inc(t,n).version}catch{return null}};var hi=pi;const on=V,fi=(r,t,e)=>new on(r,e).compare(new on(t,e));var K=fi;const yi=K,di=(r,t,e)=>yi(r,t,e)===0;var Sr=di;const an=jt,vi=Sr,mi=(r,t)=>{if(vi(r,t))return null;{const e=an(r),n=an(t),s=e.prerelease.length||n.prerelease.length,i=s?"pre":"",o=s?"prerelease":"";for(const u in e)if((u==="major"||u==="minor"||u==="patch")&&e[u]!==n[u])return i+u;return o}};var gi=mi;const $i=V,Ei=(r,t)=>new $i(r,t).major;var wi=Ei;const Si=V,bi=(r,t)=>new Si(r,t).minor;var Ri=bi;const Ai=V,Oi=(r,t)=>new Ai(r,t).patch;var Ti=Oi;const Ii=jt,Pi=(r,t)=>{const e=Ii(r,t);return e&&e.prerelease.length?e.prerelease:null};var Ni=Pi;const _i=K,Li=(r,t,e)=>_i(t,r,e);var xi=Li;const Ci=K,Di=(r,t)=>Ci(r,t,!0);var Fi=Di;const ln=V,Mi=(r,t,e)=>{const n=new ln(r,e),s=new ln(t,e);return n.compare(s)||n.compareBuild(s)};var br=Mi;const Ui=br,ki=(r,t)=>r.sort((e,n)=>Ui(e,n,t));var Bi=ki;const ji=br,Gi=(r,t)=>r.sort((e,n)=>ji(n,e,t));var Vi=Gi;const Wi=K,qi=(r,t,e)=>Wi(r,t,e)>0;var xe=qi;const Hi=K,zi=(r,t,e)=>Hi(r,t,e)<0;var Rr=zi;const Xi=K,Ki=(r,t,e)=>Xi(r,t,e)!==0;var zn=Ki;const Qi=K,Yi=(r,t,e)=>Qi(r,t,e)>=0;var Ar=Yi;const Ji=K,Zi=(r,t,e)=>Ji(r,t,e)<=0;var Or=Zi;const to=Sr,eo=zn,ro=xe,no=Ar,so=Rr,io=Or,oo=(r,t,e,n)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return to(r,e,n);case"!=":return eo(r,e,n);case">":return ro(r,e,n);case">=":return no(r,e,n);case"<":return so(r,e,n);case"<=":return io(r,e,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var Xn=oo;const ao=V,lo=jt,{re:ve,t:me}=lt,co=(r,t)=>{if(r instanceof ao)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(ve[me.COERCE]);else{let n;for(;(n=ve[me.COERCERTL].exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||n.index+n[0].length!==e.index+e[0].length)&&(e=n),ve[me.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ve[me.COERCERTL].lastIndex=-1}return e===null?null:lo(`${e[2]}.${e[3]||"0"}.${e[4]||"0"}`,t)};var uo=co,qe,cn;function po(){return cn||(cn=1,qe=function(r){r.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),qe}var ho=P;P.Node=Ot;P.create=P;function P(r){var t=this;if(t instanceof P||(t=new P),t.tail=null,t.head=null,t.length=0,r&&typeof r.forEach=="function")r.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t}P.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var t=r.next,e=r.prev;return t&&(t.prev=e),e&&(e.next=t),r===this.head&&(this.head=t),r===this.tail&&(this.tail=e),r.list.length--,r.next=null,r.prev=null,r.list=null,t};P.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var t=this.head;r.list=this,r.next=t,t&&(t.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};P.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var t=this.tail;r.list=this,r.prev=t,t&&(t.next=r),this.tail=r,this.head||(this.head=r),this.length++}};P.prototype.push=function(){for(var r=0,t=arguments.length;r<t;r++)yo(this,arguments[r]);return this.length};P.prototype.unshift=function(){for(var r=0,t=arguments.length;r<t;r++)vo(this,arguments[r]);return this.length};P.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};P.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};P.prototype.forEach=function(r,t){t=t||this;for(var e=this.head,n=0;e!==null;n++)r.call(t,e.value,n,this),e=e.next};P.prototype.forEachReverse=function(r,t){t=t||this;for(var e=this.tail,n=this.length-1;e!==null;n--)r.call(t,e.value,n,this),e=e.prev};P.prototype.get=function(r){for(var t=0,e=this.head;e!==null&&t<r;t++)e=e.next;if(t===r&&e!==null)return e.value};P.prototype.getReverse=function(r){for(var t=0,e=this.tail;e!==null&&t<r;t++)e=e.prev;if(t===r&&e!==null)return e.value};P.prototype.map=function(r,t){t=t||this;for(var e=new P,n=this.head;n!==null;)e.push(r.call(t,n.value,this)),n=n.next;return e};P.prototype.mapReverse=function(r,t){t=t||this;for(var e=new P,n=this.tail;n!==null;)e.push(r.call(t,n.value,this)),n=n.prev;return e};P.prototype.reduce=function(r,t){var e,n=this.head;if(arguments.length>1)e=t;else if(this.head)n=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)e=r(e,n.value,s),n=n.next;return e};P.prototype.reduceReverse=function(r,t){var e,n=this.tail;if(arguments.length>1)e=t;else if(this.tail)n=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)e=r(e,n.value,s),n=n.prev;return e};P.prototype.toArray=function(){for(var r=new Array(this.length),t=0,e=this.head;e!==null;t++)r[t]=e.value,e=e.next;return r};P.prototype.toArrayReverse=function(){for(var r=new Array(this.length),t=0,e=this.tail;e!==null;t++)r[t]=e.value,e=e.prev;return r};P.prototype.slice=function(r,t){t=t||this.length,t<0&&(t+=this.length),r=r||0,r<0&&(r+=this.length);var e=new P;if(t<r||t<0)return e;r<0&&(r=0),t>this.length&&(t=this.length);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(;s!==null&&n<t;n++,s=s.next)e.push(s.value);return e};P.prototype.sliceReverse=function(r,t){t=t||this.length,t<0&&(t+=this.length),r=r||0,r<0&&(r+=this.length);var e=new P;if(t<r||t<0)return e;r<0&&(r=0),t>this.length&&(t=this.length);for(var n=this.length,s=this.tail;s!==null&&n>t;n--)s=s.prev;for(;s!==null&&n>r;n--,s=s.prev)e.push(s.value);return e};P.prototype.splice=function(r,t,...e){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(var i=[],n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<e.length;n++)s=fo(this,s,e[n]);return i};P.prototype.reverse=function(){for(var r=this.head,t=this.tail,e=r;e!==null;e=e.prev){var n=e.prev;e.prev=e.next,e.next=n}return this.head=t,this.tail=r,this};function fo(r,t,e){var n=t===r.head?new Ot(e,null,t,r):new Ot(e,t,t.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function yo(r,t){r.tail=new Ot(t,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function vo(r,t){r.head=new Ot(t,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Ot(r,t,e,n){if(!(this instanceof Ot))return new Ot(r,t,e,n);this.list=n,this.value=r,t?(t.next=this,this.prev=t):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{po()(P)}catch{}const mo=ho,Et=Symbol("max"),ot=Symbol("length"),Nt=Symbol("lengthCalculator"),Jt=Symbol("allowStale"),St=Symbol("maxAge"),it=Symbol("dispose"),un=Symbol("noDisposeOnSet"),k=Symbol("lruList"),X=Symbol("cache"),Kn=Symbol("updateAgeOnGet"),He=()=>1;class go{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Et]=t.max||1/0;const e=t.length||He;if(this[Nt]=typeof e!="function"?He:e,this[Jt]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[St]=t.maxAge||0,this[it]=t.dispose,this[un]=t.noDisposeOnSet||!1,this[Kn]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Et]=t||1/0,Kt(this)}get max(){return this[Et]}set allowStale(t){this[Jt]=!!t}get allowStale(){return this[Jt]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[St]=t,Kt(this)}get maxAge(){return this[St]}set lengthCalculator(t){typeof t!="function"&&(t=He),t!==this[Nt]&&(this[Nt]=t,this[ot]=0,this[k].forEach(e=>{e.length=this[Nt](e.value,e.key),this[ot]+=e.length})),Kt(this)}get lengthCalculator(){return this[Nt]}get length(){return this[ot]}get itemCount(){return this[k].length}rforEach(t,e){e=e||this;for(let n=this[k].tail;n!==null;){const s=n.prev;pn(this,t,n,e),n=s}}forEach(t,e){e=e||this;for(let n=this[k].head;n!==null;){const s=n.next;pn(this,t,n,e),n=s}}keys(){return this[k].toArray().map(t=>t.key)}values(){return this[k].toArray().map(t=>t.value)}reset(){this[it]&&this[k]&&this[k].length&&this[k].forEach(t=>this[it](t.key,t.value)),this[X]=new Map,this[k]=new mo,this[ot]=0}dump(){return this[k].map(t=>Re(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[k]}set(t,e,n){if(n=n||this[St],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const s=n?Date.now():0,i=this[Nt](e,t);if(this[X].has(t)){if(i>this[Et])return Dt(this,this[X].get(t)),!1;const a=this[X].get(t).value;return this[it]&&(this[un]||this[it](t,a.value)),a.now=s,a.maxAge=n,a.value=e,this[ot]+=i-a.length,a.length=i,this.get(t),Kt(this),!0}const o=new $o(t,e,i,s,n);return o.length>this[Et]?(this[it]&&this[it](t,e),!1):(this[ot]+=o.length,this[k].unshift(o),this[X].set(t,this[k].head),Kt(this),!0)}has(t){if(!this[X].has(t))return!1;const e=this[X].get(t).value;return!Re(this,e)}get(t){return ze(this,t,!0)}peek(t){return ze(this,t,!1)}pop(){const t=this[k].tail;return t?(Dt(this,t),t.value):null}del(t){Dt(this,this[X].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const s=t[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{const o=i-e;o>0&&this.set(s.k,s.v,o)}}}prune(){this[X].forEach((t,e)=>ze(this,e,!1))}}const ze=(r,t,e)=>{const n=r[X].get(t);if(n){const s=n.value;if(Re(r,s)){if(Dt(r,n),!r[Jt])return}else e&&(r[Kn]&&(n.value.now=Date.now()),r[k].unshiftNode(n));return s.value}},Re=(r,t)=>{if(!t||!t.maxAge&&!r[St])return!1;const e=Date.now()-t.now;return t.maxAge?e>t.maxAge:r[St]&&e>r[St]},Kt=r=>{if(r[ot]>r[Et])for(let t=r[k].tail;r[ot]>r[Et]&&t!==null;){const e=t.prev;Dt(r,t),t=e}},Dt=(r,t)=>{if(t){const e=t.value;r[it]&&r[it](e.key,e.value),r[ot]-=e.length,r[X].delete(e.key),r[k].removeNode(t)}};class $o{constructor(t,e,n,s,i){this.key=t,this.value=e,this.length=n,this.now=s,this.maxAge=i||0}}const pn=(r,t,e,n)=>{let s=e.value;Re(r,s)&&(Dt(r,e),r[Jt]||(s=void 0)),s&&t.call(n,s.value,s.key,r)};var Eo=go,Xe,hn;function Q(){if(hn)return Xe;hn=1;class r{constructor(v,R){if(R=n(R),v instanceof r)return v.loose===!!R.loose&&v.includePrerelease===!!R.includePrerelease?v:new r(v.raw,R);if(v instanceof s)return this.raw=v.value,this.set=[[v]],this.format(),this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=v,this.set=v.split("||").map(S=>this.parseRange(S.trim())).filter(S=>S.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${v}`);if(this.set.length>1){const S=this.set[0];if(this.set=this.set.filter(b=>!d(b[0])),this.set.length===0)this.set=[S];else if(this.set.length>1){for(const b of this.set)if(b.length===1&&y(b[0])){this.set=[b];break}}}this.format()}format(){return this.range=this.set.map(v=>v.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(v){v=v.trim();const S=`parseRange:${Object.keys(this.options).join(",")}:${v}`,b=e.get(S);if(b)return b;const $=this.options.loose,O=$?u[a.HYPHENRANGELOOSE]:u[a.HYPHENRANGE];v=v.replace(O,J(this.options.includePrerelease)),i("hyphen replace",v),v=v.replace(u[a.COMPARATORTRIM],h),i("comparator trim",v),v=v.replace(u[a.TILDETRIM],p),v=v.replace(u[a.CARETTRIM],f),v=v.split(/\s+/).join(" ");let _=v.split(" ").map(M=>L(M,this.options)).join(" ").split(/\s+/).map(M=>$t(M,this.options));$&&(_=_.filter(M=>(i("loose invalid filter",M,this.options),!!M.match(u[a.COMPARATORLOOSE])))),i("range list",_);const T=new Map,C=_.map(M=>new s(M,this.options));for(const M of C){if(d(M))return[M];T.set(M.value,M)}T.size>1&&T.has("")&&T.delete("");const z=[...T.values()];return e.set(S,z),z}intersects(v,R){if(!(v instanceof r))throw new TypeError("a Range is required");return this.set.some(S=>w(S,R)&&v.set.some(b=>w(b,R)&&S.every($=>b.every(O=>$.intersects(O,R)))))}test(v){if(!v)return!1;if(typeof v=="string")try{v=new o(v,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(ht(this.set[R],v,this.options))return!0;return!1}}Xe=r;const t=Eo,e=new t({max:1e3}),n=Le,s=Ce(),i=_e,o=V,{re:u,t:a,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=lt,d=m=>m.value==="<0.0.0-0",y=m=>m.value==="",w=(m,v)=>{let R=!0;const S=m.slice();let b=S.pop();for(;R&&S.length;)R=S.every($=>b.intersects($,v)),b=S.pop();return R},L=(m,v)=>(i("comp",m,v),m=N(m,v),i("caret",m),m=A(m,v),i("tildes",m),m=H(m,v),i("xrange",m),m=st(m,v),i("stars",m),m),g=m=>!m||m.toLowerCase()==="x"||m==="*",A=(m,v)=>m.trim().split(/\s+/).map(R=>U(R,v)).join(" "),U=(m,v)=>{const R=v.loose?u[a.TILDELOOSE]:u[a.TILDE];return m.replace(R,(S,b,$,O,_)=>{i("tilde",m,S,b,$,O,_);let T;return g(b)?T="":g($)?T=`>=${b}.0.0 <${+b+1}.0.0-0`:g(O)?T=`>=${b}.${$}.0 <${b}.${+$+1}.0-0`:_?(i("replaceTilde pr",_),T=`>=${b}.${$}.${O}-${_} <${b}.${+$+1}.0-0`):T=`>=${b}.${$}.${O} <${b}.${+$+1}.0-0`,i("tilde return",T),T})},N=(m,v)=>m.trim().split(/\s+/).map(R=>Y(R,v)).join(" "),Y=(m,v)=>{i("caret",m,v);const R=v.loose?u[a.CARETLOOSE]:u[a.CARET],S=v.includePrerelease?"-0":"";return m.replace(R,(b,$,O,_,T)=>{i("caret",m,b,$,O,_,T);let C;return g($)?C="":g(O)?C=`>=${$}.0.0${S} <${+$+1}.0.0-0`:g(_)?$==="0"?C=`>=${$}.${O}.0${S} <${$}.${+O+1}.0-0`:C=`>=${$}.${O}.0${S} <${+$+1}.0.0-0`:T?(i("replaceCaret pr",T),$==="0"?O==="0"?C=`>=${$}.${O}.${_}-${T} <${$}.${O}.${+_+1}-0`:C=`>=${$}.${O}.${_}-${T} <${$}.${+O+1}.0-0`:C=`>=${$}.${O}.${_}-${T} <${+$+1}.0.0-0`):(i("no pr"),$==="0"?O==="0"?C=`>=${$}.${O}.${_}${S} <${$}.${O}.${+_+1}-0`:C=`>=${$}.${O}.${_}${S} <${$}.${+O+1}.0-0`:C=`>=${$}.${O}.${_} <${+$+1}.0.0-0`),i("caret return",C),C})},H=(m,v)=>(i("replaceXRanges",m,v),m.split(/\s+/).map(R=>gt(R,v)).join(" ")),gt=(m,v)=>{m=m.trim();const R=v.loose?u[a.XRANGELOOSE]:u[a.XRANGE];return m.replace(R,(S,b,$,O,_,T)=>{i("xRange",m,S,b,$,O,_,T);const C=g($),z=C||g(O),M=z||g(_),Xt=M;return b==="="&&Xt&&(b=""),T=v.includePrerelease?"-0":"",C?b===">"||b==="<"?S="<0.0.0-0":S="*":b&&Xt?(z&&(O=0),_=0,b===">"?(b=">=",z?($=+$+1,O=0,_=0):(O=+O+1,_=0)):b==="<="&&(b="<",z?$=+$+1:O=+O+1),b==="<"&&(T="-0"),S=`${b+$}.${O}.${_}${T}`):z?S=`>=${$}.0.0${T} <${+$+1}.0.0-0`:M&&(S=`>=${$}.${O}.0${T} <${$}.${+O+1}.0-0`),i("xRange return",S),S})},st=(m,v)=>(i("replaceStars",m,v),m.trim().replace(u[a.STAR],"")),$t=(m,v)=>(i("replaceGTE0",m,v),m.trim().replace(u[v.includePrerelease?a.GTE0PRE:a.GTE0],"")),J=m=>(v,R,S,b,$,O,_,T,C,z,M,Xt,bu)=>(g(S)?R="":g(b)?R=`>=${S}.0.0${m?"-0":""}`:g($)?R=`>=${S}.${b}.0${m?"-0":""}`:O?R=`>=${R}`:R=`>=${R}${m?"-0":""}`,g(C)?T="":g(z)?T=`<${+C+1}.0.0-0`:g(M)?T=`<${C}.${+z+1}.0-0`:Xt?T=`<=${C}.${z}.${M}-${Xt}`:m?T=`<${C}.${z}.${+M+1}-0`:T=`<=${T}`,`${R} ${T}`.trim()),ht=(m,v,R)=>{for(let S=0;S<m.length;S++)if(!m[S].test(v))return!1;if(v.prerelease.length&&!R.includePrerelease){for(let S=0;S<m.length;S++)if(i(m[S].semver),m[S].semver!==s.ANY&&m[S].semver.prerelease.length>0){const b=m[S].semver;if(b.major===v.major&&b.minor===v.minor&&b.patch===v.patch)return!0}return!1}return!0};return Xe}var Ke,fn;function Ce(){if(fn)return Ke;fn=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(p,f){if(f=e(f),p instanceof t){if(p.loose===!!f.loose)return p;p=p.value}o("comparator",p,f),this.options=f,this.loose=!!f.loose,this.parse(p),this.semver===r?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(p){const f=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],d=p.match(f);if(!d)throw new TypeError(`Invalid comparator: ${p}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new u(d[2],this.options.loose):this.semver=r}toString(){return this.value}test(p){if(o("Comparator.test",p,this.options.loose),this.semver===r||p===r)return!0;if(typeof p=="string")try{p=new u(p,this.options)}catch{return!1}return i(p,this.operator,this.semver,this.options)}intersects(p,f){if(!(p instanceof t))throw new TypeError("a Comparator is required");if((!f||typeof f!="object")&&(f={loose:!!f,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new a(p.value,f).test(this.value);if(p.operator==="")return p.value===""?!0:new a(this.value,f).test(p.semver);const d=(this.operator===">="||this.operator===">")&&(p.operator===">="||p.operator===">"),y=(this.operator==="<="||this.operator==="<")&&(p.operator==="<="||p.operator==="<"),w=this.semver.version===p.semver.version,L=(this.operator===">="||this.operator==="<=")&&(p.operator===">="||p.operator==="<="),g=i(this.semver,"<",p.semver,f)&&(this.operator===">="||this.operator===">")&&(p.operator==="<="||p.operator==="<"),A=i(this.semver,">",p.semver,f)&&(this.operator==="<="||this.operator==="<")&&(p.operator===">="||p.operator===">");return d||y||w&&L||g||A}}Ke=t;const e=Le,{re:n,t:s}=lt,i=Xn,o=_e,u=V,a=Q();return Ke}const wo=Q(),So=(r,t,e)=>{try{t=new wo(t,e)}catch{return!1}return t.test(r)};var De=So;const bo=Q(),Ro=(r,t)=>new bo(r,t).set.map(e=>e.map(n=>n.value).join(" ").trim().split(" "));var Ao=Ro;const Oo=V,To=Q(),Io=(r,t,e)=>{let n=null,s=null,i=null;try{i=new To(t,e)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Oo(n,e))}),n};var Po=Io;const No=V,_o=Q(),Lo=(r,t,e)=>{let n=null,s=null,i=null;try{i=new _o(t,e)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new No(n,e))}),n};var xo=Lo;const Qe=V,Co=Q(),yn=xe,Do=(r,t)=>{r=new Co(r,t);let e=new Qe("0.0.0");if(r.test(e)||(e=new Qe("0.0.0-0"),r.test(e)))return e;e=null;for(let n=0;n<r.set.length;++n){const s=r.set[n];let i=null;s.forEach(o=>{const u=new Qe(o.semver.version);switch(o.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!i||yn(u,i))&&(i=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!e||yn(e,i))&&(e=i)}return e&&r.test(e)?e:null};var Fo=Do;const Mo=Q(),Uo=(r,t)=>{try{return new Mo(r,t).range||"*"}catch{return null}};var ko=Uo;const Bo=V,Qn=Ce(),{ANY:jo}=Qn,Go=Q(),Vo=De,dn=xe,vn=Rr,Wo=Or,qo=Ar,Ho=(r,t,e,n)=>{r=new Bo(r,n),t=new Go(t,n);let s,i,o,u,a;switch(e){case">":s=dn,i=Wo,o=vn,u=">",a=">=";break;case"<":s=vn,i=qo,o=dn,u="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Vo(r,t,n))return!1;for(let h=0;h<t.set.length;++h){const p=t.set[h];let f=null,d=null;if(p.forEach(y=>{y.semver===jo&&(y=new Qn(">=0.0.0")),f=f||y,d=d||y,s(y.semver,f.semver,n)?f=y:o(y.semver,d.semver,n)&&(d=y)}),f.operator===u||f.operator===a||(!d.operator||d.operator===u)&&i(r,d.semver))return!1;if(d.operator===a&&o(r,d.semver))return!1}return!0};var Tr=Ho;const zo=Tr,Xo=(r,t,e)=>zo(r,t,">",e);var Ko=Xo;const Qo=Tr,Yo=(r,t,e)=>Qo(r,t,"<",e);var Jo=Yo;const mn=Q(),Zo=(r,t,e)=>(r=new mn(r,e),t=new mn(t,e),r.intersects(t));var ta=Zo;const ea=De,ra=K;var na=(r,t,e)=>{const n=[];let s=null,i=null;const o=r.sort((p,f)=>ra(p,f,e));for(const p of o)ea(p,t,e)?(i=p,s||(s=p)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const u=[];for(const[p,f]of n)p===f?u.push(p):!f&&p===o[0]?u.push("*"):f?p===o[0]?u.push(`<=${f}`):u.push(`${p} - ${f}`):u.push(`>=${p}`);const a=u.join(" || "),h=typeof t.raw=="string"?t.raw:String(t);return a.length<h.length?a:t};const gn=Q(),Se=Ce(),{ANY:Ye}=Se,Qt=De,Ir=K,sa=(r,t,e={})=>{if(r===t)return!0;r=new gn(r,e),t=new gn(t,e);let n=!1;t:for(const s of r.set){for(const i of t.set){const o=ia(s,i,e);if(n=n||o!==null,o)continue t}if(n)return!1}return!0},ia=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===Ye){if(t.length===1&&t[0].semver===Ye)return!0;e.includePrerelease?r=[new Se(">=0.0.0-0")]:r=[new Se(">=0.0.0")]}if(t.length===1&&t[0].semver===Ye){if(e.includePrerelease)return!0;t=[new Se(">=0.0.0")]}const n=new Set;let s,i;for(const y of r)y.operator===">"||y.operator===">="?s=$n(s,y,e):y.operator==="<"||y.operator==="<="?i=En(i,y,e):n.add(y.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Ir(s.semver,i.semver,e),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const y of n){if(s&&!Qt(y,String(s),e)||i&&!Qt(y,String(i),e))return null;for(const w of t)if(!Qt(y,String(w),e))return!1;return!0}let u,a,h,p,f=i&&!e.includePrerelease&&i.semver.prerelease.length?i.semver:!1,d=s&&!e.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const y of t){if(p=p||y.operator===">"||y.operator===">=",h=h||y.operator==="<"||y.operator==="<=",s){if(d&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===d.major&&y.semver.minor===d.minor&&y.semver.patch===d.patch&&(d=!1),y.operator===">"||y.operator===">="){if(u=$n(s,y,e),u===y&&u!==s)return!1}else if(s.operator===">="&&!Qt(s.semver,String(y),e))return!1}if(i){if(f&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===f.major&&y.semver.minor===f.minor&&y.semver.patch===f.patch&&(f=!1),y.operator==="<"||y.operator==="<="){if(a=En(i,y,e),a===y&&a!==i)return!1}else if(i.operator==="<="&&!Qt(i.semver,String(y),e))return!1}if(!y.operator&&(i||s)&&o!==0)return!1}return!(s&&h&&!i&&o!==0||i&&p&&!s&&o!==0||d||f)},$n=(r,t,e)=>{if(!r)return t;const n=Ir(r.semver,t.semver,e);return n>0?r:n<0||t.operator===">"&&r.operator===">="?t:r},En=(r,t,e)=>{if(!r)return t;const n=Ir(r.semver,t.semver,e);return n<0?r:n>0||t.operator==="<"&&r.operator==="<="?t:r};var oa=sa;const Je=lt,aa=Ne,la=V,wn=Hn,ca=jt,ua=ai,pa=ui,ha=hi,fa=gi,ya=wi,da=Ri,va=Ti,ma=Ni,ga=K,$a=xi,Ea=Fi,wa=br,Sa=Bi,ba=Vi,Ra=xe,Aa=Rr,Oa=Sr,Ta=zn,Ia=Ar,Pa=Or,Na=Xn,_a=uo,La=Ce(),xa=Q(),Ca=De,Da=Ao,Fa=Po,Ma=xo,Ua=Fo,ka=ko,Ba=Tr,ja=Ko,Ga=Jo,Va=ta,Wa=na,qa=oa;var bt={parse:ca,valid:ua,clean:pa,inc:ha,diff:fa,major:ya,minor:da,patch:va,prerelease:ma,compare:ga,rcompare:$a,compareLoose:Ea,compareBuild:wa,sort:Sa,rsort:ba,gt:Ra,lt:Aa,eq:Oa,neq:Ta,gte:Ia,lte:Pa,cmp:Na,coerce:_a,Comparator:La,Range:xa,satisfies:Ca,toComparators:Da,maxSatisfying:Fa,minSatisfying:Ma,minVersion:Ua,validRange:ka,outside:Ba,gtr:ja,ltr:Ga,intersects:Va,simplifyRange:Wa,subset:qa,SemVer:la,re:Je.re,src:Je.src,tokens:Je.t,SEMVER_SPEC_VERSION:aa.SEMVER_SPEC_VERSION,compareIdentifiers:wn.compareIdentifiers,rcompareIdentifiers:wn.rcompareIdentifiers},Ha=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==s||o.enumerable!==!0)return!1}return!0},Sn=typeof Symbol<"u"&&Symbol,za=Ha,Xa=function(){return typeof Sn!="function"||typeof Symbol!="function"||typeof Sn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:za()},Ka="Function.prototype.bind called on incompatible ",Ze=Array.prototype.slice,Qa=Object.prototype.toString,Ya="[object Function]",Ja=function(t){var e=this;if(typeof e!="function"||Qa.call(e)!==Ya)throw new TypeError(Ka+e);for(var n=Ze.call(arguments,1),s,i=function(){if(this instanceof s){var p=e.apply(this,n.concat(Ze.call(arguments)));return Object(p)===p?p:this}else return e.apply(t,n.concat(Ze.call(arguments)))},o=Math.max(0,e.length-n.length),u=[],a=0;a<o;a++)u.push("$"+a);if(s=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var h=function(){};h.prototype=e.prototype,s.prototype=new h,h.prototype=null}return s},Za=Ja,Pr=Function.prototype.bind||Za,tl=Pr,el=tl.call(Function.call,Object.prototype.hasOwnProperty),I,Mt=SyntaxError,Yn=Function,Ft=TypeError,tr=function(r){try{return Yn('"use strict"; return ('+r+").constructor;")()}catch{}},Rt=Object.getOwnPropertyDescriptor;if(Rt)try{Rt({},"")}catch{Rt=null}var er=function(){throw new Ft},rl=Rt?function(){try{return arguments.callee,er}catch{try{return Rt(arguments,"callee").get}catch{return er}}}():er,_t=Xa(),et=Object.getPrototypeOf||function(r){return r.__proto__},Lt={},nl=typeof Uint8Array>"u"?I:et(Uint8Array),At={"%AggregateError%":typeof AggregateError>"u"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?I:ArrayBuffer,"%ArrayIteratorPrototype%":_t?et([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":Lt,"%AsyncGenerator%":Lt,"%AsyncGeneratorFunction%":Lt,"%AsyncIteratorPrototype%":Lt,"%Atomics%":typeof Atomics>"u"?I:Atomics,"%BigInt%":typeof BigInt>"u"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?I:Float32Array,"%Float64Array%":typeof Float64Array>"u"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?I:FinalizationRegistry,"%Function%":Yn,"%GeneratorFunction%":Lt,"%Int8Array%":typeof Int8Array>"u"?I:Int8Array,"%Int16Array%":typeof Int16Array>"u"?I:Int16Array,"%Int32Array%":typeof Int32Array>"u"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_t?et(et([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map>"u"?I:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_t?I:et(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?I:Promise,"%Proxy%":typeof Proxy>"u"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?I:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_t?I:et(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_t?et(""[Symbol.iterator]()):I,"%Symbol%":_t?Symbol:I,"%SyntaxError%":Mt,"%ThrowTypeError%":rl,"%TypedArray%":nl,"%TypeError%":Ft,"%Uint8Array%":typeof Uint8Array>"u"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?I:WeakMap,"%WeakRef%":typeof WeakRef>"u"?I:WeakRef,"%WeakSet%":typeof WeakSet>"u"?I:WeakSet};try{null.error}catch(r){var sl=et(et(r));At["%Error.prototype%"]=sl}var il=function r(t){var e;if(t==="%AsyncFunction%")e=tr("async function () {}");else if(t==="%GeneratorFunction%")e=tr("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=tr("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&(e=et(s.prototype))}return At[t]=e,e},bn={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ne=Pr,Ae=el,ol=ne.call(Function.call,Array.prototype.concat),al=ne.call(Function.apply,Array.prototype.splice),Rn=ne.call(Function.call,String.prototype.replace),Oe=ne.call(Function.call,String.prototype.slice),ll=ne.call(Function.call,RegExp.prototype.exec),cl=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ul=/\\(\\)?/g,pl=function(t){var e=Oe(t,0,1),n=Oe(t,-1);if(e==="%"&&n!=="%")throw new Mt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new Mt("invalid intrinsic syntax, expected opening `%`");var s=[];return Rn(t,cl,function(i,o,u,a){s[s.length]=u?Rn(a,ul,"$1"):o||i}),s},hl=function(t,e){var n=t,s;if(Ae(bn,n)&&(s=bn[n],n="%"+s[0]+"%"),Ae(At,n)){var i=At[n];if(i===Lt&&(i=il(n)),typeof i>"u"&&!e)throw new Ft("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Mt("intrinsic "+t+" does not exist!")},Nr=function(t,e){if(typeof t!="string"||t.length===0)throw new Ft("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Ft('"allowMissing" argument must be a boolean');if(ll(/^%?[^%]*%?$/,t)===null)throw new Mt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=pl(t),s=n.length>0?n[0]:"",i=hl("%"+s+"%",e),o=i.name,u=i.value,a=!1,h=i.alias;h&&(s=h[0],al(n,ol([0,1],h)));for(var p=1,f=!0;p<n.length;p+=1){var d=n[p],y=Oe(d,0,1),w=Oe(d,-1);if((y==='"'||y==="'"||y==="`"||w==='"'||w==="'"||w==="`")&&y!==w)throw new Mt("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(a=!0),s+="."+d,o="%"+s+"%",Ae(At,o))u=At[o];else if(u!=null){if(!(d in u)){if(!e)throw new Ft("base intrinsic for "+t+" exists, but the property is not available.");return}if(Rt&&p+1>=n.length){var L=Rt(u,d);f=!!L,f&&"get"in L&&!("originalValue"in L.get)?u=L.get:u=u[d]}else f=Ae(u,d),u=u[d];f&&!a&&(At[o]=u)}}return u},cr={},fl={get exports(){return cr},set exports(r){cr=r}};(function(r){var t=Pr,e=Nr,n=e("%Function.prototype.apply%"),s=e("%Function.prototype.call%"),i=e("%Reflect.apply%",!0)||t.call(s,n),o=e("%Object.getOwnPropertyDescriptor%",!0),u=e("%Object.defineProperty%",!0),a=e("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}r.exports=function(f){var d=i(t,s,arguments);if(o&&u){var y=o(d,"length");y.configurable&&u(d,"length",{value:1+a(0,f.length-(arguments.length-1))})}return d};var h=function(){return i(t,n,arguments)};u?u(r.exports,"apply",{value:h}):r.exports.apply=h})(fl);var Jn=Nr,Zn=cr,yl=Zn(Jn("String.prototype.indexOf")),dl=function(t,e){var n=Jn(t,!!e);return typeof n=="function"&&yl(t,".prototype.")>-1?Zn(n):n},_r=typeof Map=="function"&&Map.prototype,rr=Object.getOwnPropertyDescriptor&&_r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Te=_r&&rr&&typeof rr.get=="function"?rr.get:null,An=_r&&Map.prototype.forEach,Lr=typeof Set=="function"&&Set.prototype,nr=Object.getOwnPropertyDescriptor&&Lr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ie=Lr&&nr&&typeof nr.get=="function"?nr.get:null,On=Lr&&Set.prototype.forEach,vl=typeof WeakMap=="function"&&WeakMap.prototype,Zt=vl?WeakMap.prototype.has:null,ml=typeof WeakSet=="function"&&WeakSet.prototype,te=ml?WeakSet.prototype.has:null,gl=typeof WeakRef=="function"&&WeakRef.prototype,Tn=gl?WeakRef.prototype.deref:null,$l=Boolean.prototype.valueOf,El=Object.prototype.toString,wl=Function.prototype.toString,Sl=String.prototype.match,xr=String.prototype.slice,yt=String.prototype.replace,bl=String.prototype.toUpperCase,In=String.prototype.toLowerCase,ts=RegExp.prototype.test,Pn=Array.prototype.concat,rt=Array.prototype.join,Rl=Array.prototype.slice,Nn=Math.floor,ur=typeof BigInt=="function"?BigInt.prototype.valueOf:null,sr=Object.getOwnPropertySymbols,pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="object",G=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ut||"symbol")?Symbol.toStringTag:null,es=Object.prototype.propertyIsEnumerable,_n=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Ln(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||ts.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-Nn(-r):Nn(r);if(n!==r){var s=String(n),i=xr.call(t,s.length+1);return yt.call(s,e,"$&_")+"."+yt.call(yt.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return yt.call(t,e,"$&_")}var hr=Cs,xn=hr.custom,Cn=ns(xn)?xn:null,Al=function r(t,e,n,s){var i=e||{};if(ft(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ft(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ft(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ft(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ft(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return is(t,i);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var a=String(t);return u?Ln(t,a):a}if(typeof t=="bigint"){var h=String(t)+"n";return u?Ln(t,h):h}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof t=="object")return fr(t)?"[Array]":"[Object]";var f=Vl(i,n);if(typeof s>"u")s=[];else if(ss(s,t)>=0)return"[Circular]";function d(R,S,b){if(S&&(s=Rl.call(s),s.push(S)),b){var $={depth:i.depth};return ft(i,"quoteStyle")&&($.quoteStyle=i.quoteStyle),r(R,$,n+1,s)}return r(R,i,n+1,s)}if(typeof t=="function"&&!Dn(t)){var y=Cl(t),w=ge(t,d);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(w.length>0?" { "+rt.call(w,", ")+" }":"")}if(ns(t)){var L=Ut?yt.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):pr.call(t);return typeof t=="object"&&!Ut?Yt(L):L}if(Bl(t)){for(var g="<"+In.call(String(t.nodeName)),A=t.attributes||[],U=0;U<A.length;U++)g+=" "+A[U].name+"="+rs(Ol(A[U].value),"double",i);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+In.call(String(t.nodeName))+">",g}if(fr(t)){if(t.length===0)return"[]";var N=ge(t,d);return f&&!Gl(N)?"["+yr(N,f)+"]":"[ "+rt.call(N,", ")+" ]"}if(Il(t)){var Y=ge(t,d);return!("cause"in Error.prototype)&&"cause"in t&&!es.call(t,"cause")?"{ ["+String(t)+"] "+rt.call(Pn.call("[cause]: "+d(t.cause),Y),", ")+" }":Y.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+rt.call(Y,", ")+" }"}if(typeof t=="object"&&o){if(Cn&&typeof t[Cn]=="function"&&hr)return hr(t,{depth:p-n});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Dl(t)){var H=[];return An&&An.call(t,function(R,S){H.push(d(S,t,!0)+" => "+d(R,t))}),Fn("Map",Te.call(t),H,f)}if(Ul(t)){var gt=[];return On&&On.call(t,function(R){gt.push(d(R,t))}),Fn("Set",Ie.call(t),gt,f)}if(Fl(t))return ir("WeakMap");if(kl(t))return ir("WeakSet");if(Ml(t))return ir("WeakRef");if(Nl(t))return Yt(d(Number(t)));if(Ll(t))return Yt(d(ur.call(t)));if(_l(t))return Yt($l.call(t));if(Pl(t))return Yt(d(String(t)));if(!Tl(t)&&!Dn(t)){var st=ge(t,d),$t=_n?_n(t)===Object.prototype:t instanceof Object||t.constructor===Object,J=t instanceof Object?"":"null prototype",ht=!$t&&G&&Object(t)===t&&G in t?xr.call(vt(t),8,-1):J?"Object":"",m=$t||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",v=m+(ht||J?"["+rt.call(Pn.call([],ht||[],J||[]),": ")+"] ":"");return st.length===0?v+"{}":f?v+"{"+yr(st,f)+"}":v+"{ "+rt.call(st,", ")+" }"}return String(t)};function rs(r,t,e){var n=(e.quoteStyle||t)==="double"?'"':"'";return n+r+n}function Ol(r){return yt.call(String(r),/"/g,"&quot;")}function fr(r){return vt(r)==="[object Array]"&&(!G||!(typeof r=="object"&&G in r))}function Tl(r){return vt(r)==="[object Date]"&&(!G||!(typeof r=="object"&&G in r))}function Dn(r){return vt(r)==="[object RegExp]"&&(!G||!(typeof r=="object"&&G in r))}function Il(r){return vt(r)==="[object Error]"&&(!G||!(typeof r=="object"&&G in r))}function Pl(r){return vt(r)==="[object String]"&&(!G||!(typeof r=="object"&&G in r))}function Nl(r){return vt(r)==="[object Number]"&&(!G||!(typeof r=="object"&&G in r))}function _l(r){return vt(r)==="[object Boolean]"&&(!G||!(typeof r=="object"&&G in r))}function ns(r){if(Ut)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!pr)return!1;try{return pr.call(r),!0}catch{}return!1}function Ll(r){if(!r||typeof r!="object"||!ur)return!1;try{return ur.call(r),!0}catch{}return!1}var xl=Object.prototype.hasOwnProperty||function(r){return r in this};function ft(r,t){return xl.call(r,t)}function vt(r){return El.call(r)}function Cl(r){if(r.name)return r.name;var t=Sl.call(wl.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function ss(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,n=r.length;e<n;e++)if(r[e]===t)return e;return-1}function Dl(r){if(!Te||!r||typeof r!="object")return!1;try{Te.call(r);try{Ie.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Fl(r){if(!Zt||!r||typeof r!="object")return!1;try{Zt.call(r,Zt);try{te.call(r,te)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function Ml(r){if(!Tn||!r||typeof r!="object")return!1;try{return Tn.call(r),!0}catch{}return!1}function Ul(r){if(!Ie||!r||typeof r!="object")return!1;try{Ie.call(r);try{Te.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function kl(r){if(!te||!r||typeof r!="object")return!1;try{te.call(r,te);try{Zt.call(r,Zt)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Bl(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function is(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,n="... "+e+" more character"+(e>1?"s":"");return is(xr.call(r,0,t.maxStringLength),t)+n}var s=yt.call(yt.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,jl);return rs(s,"single",t)}function jl(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+bl.call(t.toString(16))}function Yt(r){return"Object("+r+")"}function ir(r){return r+" { ? }"}function Fn(r,t,e,n){var s=n?yr(e,n):rt.call(e,", ");return r+" ("+t+") {"+s+"}"}function Gl(r){for(var t=0;t<r.length;t++)if(ss(r[t],`
`)>=0)return!1;return!0}function Vl(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=rt.call(Array(r.indent+1)," ");else return null;return{base:e,prev:rt.call(Array(t+1),e)}}function yr(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+rt.call(r,","+e)+`
`+t.prev}function ge(r,t){var e=fr(r),n=[];if(e){n.length=r.length;for(var s=0;s<r.length;s++)n[s]=ft(r,s)?t(r[s],r):""}var i=typeof sr=="function"?sr(r):[],o;if(Ut){o={};for(var u=0;u<i.length;u++)o["$"+i[u]]=i[u]}for(var a in r)ft(r,a)&&(e&&String(Number(a))===a&&a<r.length||Ut&&o["$"+a]instanceof Symbol||(ts.call(/[^\w$]/,a)?n.push(t(a,r)+": "+t(r[a],r)):n.push(a+": "+t(r[a],r))));if(typeof sr=="function")for(var h=0;h<i.length;h++)es.call(r,i[h])&&n.push("["+t(i[h])+"]: "+t(r[i[h]],r));return n}var Cr=Nr,Gt=dl,Wl=Al,ql=Cr("%TypeError%"),$e=Cr("%WeakMap%",!0),Ee=Cr("%Map%",!0),Hl=Gt("WeakMap.prototype.get",!0),zl=Gt("WeakMap.prototype.set",!0),Xl=Gt("WeakMap.prototype.has",!0),Kl=Gt("Map.prototype.get",!0),Ql=Gt("Map.prototype.set",!0),Yl=Gt("Map.prototype.has",!0),Dr=function(r,t){for(var e=r,n;(n=e.next)!==null;e=n)if(n.key===t)return e.next=n.next,n.next=r.next,r.next=n,n},Jl=function(r,t){var e=Dr(r,t);return e&&e.value},Zl=function(r,t,e){var n=Dr(r,t);n?n.value=e:r.next={key:t,next:r.next,value:e}},tc=function(r,t){return!!Dr(r,t)},ec=function(){var t,e,n,s={assert:function(i){if(!s.has(i))throw new ql("Side channel does not contain "+Wl(i))},get:function(i){if($e&&i&&(typeof i=="object"||typeof i=="function")){if(t)return Hl(t,i)}else if(Ee){if(e)return Kl(e,i)}else if(n)return Jl(n,i)},has:function(i){if($e&&i&&(typeof i=="object"||typeof i=="function")){if(t)return Xl(t,i)}else if(Ee){if(e)return Yl(e,i)}else if(n)return tc(n,i);return!1},set:function(i,o){$e&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new $e),zl(t,i,o)):Ee?(e||(e=new Ee),Ql(e,i,o)):(n||(n={key:{},next:null}),Zl(n,i,o))}};return s},rc=String.prototype.replace,nc=/%20/g,or={RFC1738:"RFC1738",RFC3986:"RFC3986"},Fr={default:or.RFC3986,formatters:{RFC1738:function(r){return rc.call(r,nc,"+")},RFC3986:function(r){return String(r)}},RFC1738:or.RFC1738,RFC3986:or.RFC3986},sc=Fr,ar=Object.prototype.hasOwnProperty,wt=Array.isArray,Z=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),ic=function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(wt(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);e.obj[e.prop]=s}}},os=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},s=0;s<t.length;++s)typeof t[s]<"u"&&(n[s]=t[s]);return n},oc=function r(t,e,n){if(!e)return t;if(typeof e!="object"){if(wt(t))t.push(e);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!ar.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var s=t;return wt(t)&&!wt(e)&&(s=os(t,n)),wt(t)&&wt(e)?(e.forEach(function(i,o){if(ar.call(t,o)){var u=t[o];u&&typeof u=="object"&&i&&typeof i=="object"?t[o]=r(u,i,n):t.push(i)}else t[o]=i}),t):Object.keys(e).reduce(function(i,o){var u=e[o];return ar.call(i,o)?i[o]=r(i[o],u,n):i[o]=u,i},s)},ac=function(t,e){return Object.keys(e).reduce(function(n,s){return n[s]=e[s],n},t)},lc=function(r,t,e){var n=r.replace(/\+/g," ");if(e==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},cc=function(t,e,n,s,i){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var u="",a=0;a<o.length;++a){var h=o.charCodeAt(a);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===sc.RFC1738&&(h===40||h===41)){u+=o.charAt(a);continue}if(h<128){u=u+Z[h];continue}if(h<2048){u=u+(Z[192|h>>6]+Z[128|h&63]);continue}if(h<55296||h>=57344){u=u+(Z[224|h>>12]+Z[128|h>>6&63]+Z[128|h&63]);continue}a+=1,h=65536+((h&1023)<<10|o.charCodeAt(a)&1023),u+=Z[240|h>>18]+Z[128|h>>12&63]+Z[128|h>>6&63]+Z[128|h&63]}return u},uc=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],s=0;s<e.length;++s)for(var i=e[s],o=i.obj[i.prop],u=Object.keys(o),a=0;a<u.length;++a){var h=u[a],p=o[h];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(e.push({obj:o,prop:h}),n.push(p))}return ic(e),t},pc=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},hc=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},fc=function(t,e){return[].concat(t,e)},yc=function(t,e){if(wt(t)){for(var n=[],s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)},as={arrayToObject:os,assign:ac,combine:fc,compact:uc,decode:lc,encode:cc,isBuffer:hc,isRegExp:pc,maybeMap:yc,merge:oc},ls=ec,dr=as,ee=Fr,dc=Object.prototype.hasOwnProperty,Mn={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},at=Array.isArray,vc=String.prototype.split,mc=Array.prototype.push,cs=function(r,t){mc.apply(r,at(t)?t:[t])},gc=Date.prototype.toISOString,Un=ee.default,j={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:dr.encode,encodeValuesOnly:!1,format:Un,formatter:ee.formatters[Un],indices:!1,serializeDate:function(t){return gc.call(t)},skipNulls:!1,strictNullHandling:!1},$c=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},lr={},Ec=function r(t,e,n,s,i,o,u,a,h,p,f,d,y,w,L,g){for(var A=t,U=g,N=0,Y=!1;(U=U.get(lr))!==void 0&&!Y;){var H=U.get(t);if(N+=1,typeof H<"u"){if(H===N)throw new RangeError("Cyclic object value");Y=!0}typeof U.get(lr)>"u"&&(N=0)}if(typeof a=="function"?A=a(e,A):A instanceof Date?A=f(A):n==="comma"&&at(A)&&(A=dr.maybeMap(A,function(T){return T instanceof Date?f(T):T})),A===null){if(i)return u&&!w?u(e,j.encoder,L,"key",d):e;A=""}if($c(A)||dr.isBuffer(A)){if(u){var gt=w?e:u(e,j.encoder,L,"key",d);if(n==="comma"&&w){for(var st=vc.call(String(A),","),$t="",J=0;J<st.length;++J)$t+=(J===0?"":",")+y(u(st[J],j.encoder,L,"value",d));return[y(gt)+(s&&at(A)&&st.length===1?"[]":"")+"="+$t]}return[y(gt)+"="+y(u(A,j.encoder,L,"value",d))]}return[y(e)+"="+y(String(A))]}var ht=[];if(typeof A>"u")return ht;var m;if(n==="comma"&&at(A))m=[{value:A.length>0?A.join(",")||null:void 0}];else if(at(a))m=a;else{var v=Object.keys(A);m=h?v.sort(h):v}for(var R=s&&at(A)&&A.length===1?e+"[]":e,S=0;S<m.length;++S){var b=m[S],$=typeof b=="object"&&typeof b.value<"u"?b.value:A[b];if(!(o&&$===null)){var O=at(A)?typeof n=="function"?n(R,b):R:R+(p?"."+b:"["+b+"]");g.set(t,N);var _=ls();_.set(lr,g),cs(ht,r($,O,n,s,i,o,u,a,h,p,f,d,y,w,L,_))}}return ht},wc=function(t){if(!t)return j;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||j.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ee.default;if(typeof t.format<"u"){if(!dc.call(ee.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var s=ee.formatters[n],i=j.filter;return(typeof t.filter=="function"||at(t.filter))&&(i=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:j.addQueryPrefix,allowDots:typeof t.allowDots>"u"?j.allowDots:!!t.allowDots,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:j.charsetSentinel,delimiter:typeof t.delimiter>"u"?j.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:j.encode,encoder:typeof t.encoder=="function"?t.encoder:j.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:j.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:j.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:j.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:j.strictNullHandling}},Sc=function(r,t){var e=r,n=wc(t),s,i;typeof n.filter=="function"?(i=n.filter,e=i("",e)):at(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof e!="object"||e===null)return"";var u;t&&t.arrayFormat in Mn?u=t.arrayFormat:t&&"indices"in t?u=t.indices?"indices":"repeat":u="indices";var a=Mn[u];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=a==="comma"&&t&&t.commaRoundTrip;s||(s=Object.keys(e)),n.sort&&s.sort(n.sort);for(var p=ls(),f=0;f<s.length;++f){var d=s[f];n.skipNulls&&e[d]===null||cs(o,Ec(e[d],d,a,h,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,p))}var y=o.join(n.delimiter),w=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),y.length>0?w+y:""},kt=as,vr=Object.prototype.hasOwnProperty,bc=Array.isArray,B={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:kt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Rc=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},us=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},Ac="utf8=%26%2310003%3B",Oc="utf8=%E2%9C%93",Tc=function(t,e){var n={},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,i=e.parameterLimit===1/0?void 0:e.parameterLimit,o=s.split(e.delimiter,i),u=-1,a,h=e.charset;if(e.charsetSentinel)for(a=0;a<o.length;++a)o[a].indexOf("utf8=")===0&&(o[a]===Oc?h="utf-8":o[a]===Ac&&(h="iso-8859-1"),u=a,a=o.length);for(a=0;a<o.length;++a)if(a!==u){var p=o[a],f=p.indexOf("]="),d=f===-1?p.indexOf("="):f+1,y,w;d===-1?(y=e.decoder(p,B.decoder,h,"key"),w=e.strictNullHandling?null:""):(y=e.decoder(p.slice(0,d),B.decoder,h,"key"),w=kt.maybeMap(us(p.slice(d+1),e),function(L){return e.decoder(L,B.decoder,h,"value")})),w&&e.interpretNumericEntities&&h==="iso-8859-1"&&(w=Rc(w)),p.indexOf("[]=")>-1&&(w=bc(w)?[w]:w),vr.call(n,y)?n[y]=kt.combine(n[y],w):n[y]=w}return n},Ic=function(r,t,e,n){for(var s=n?t:us(t,e),i=r.length-1;i>=0;--i){var o,u=r[i];if(u==="[]"&&e.parseArrays)o=[].concat(s);else{o=e.plainObjects?Object.create(null):{};var a=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,h=parseInt(a,10);!e.parseArrays&&a===""?o={0:s}:!isNaN(h)&&u!==a&&String(h)===a&&h>=0&&e.parseArrays&&h<=e.arrayLimit?(o=[],o[h]=s):a!=="__proto__"&&(o[a]=s)}s=o}return s},Pc=function(t,e,n,s){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,a=n.depth>0&&o.exec(i),h=a?i.slice(0,a.index):i,p=[];if(h){if(!n.plainObjects&&vr.call(Object.prototype,h)&&!n.allowPrototypes)return;p.push(h)}for(var f=0;n.depth>0&&(a=u.exec(i))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&vr.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(a[1])}return a&&p.push("["+i.slice(a.index)+"]"),Ic(p,e,n,s)}},Nc=function(t){if(!t)return B;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?B.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?B.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:B.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:B.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:B.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:B.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:B.comma,decoder:typeof t.decoder=="function"?t.decoder:B.decoder,delimiter:typeof t.delimiter=="string"||kt.isRegExp(t.delimiter)?t.delimiter:B.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:B.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:B.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:B.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:B.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:B.strictNullHandling}},_c=function(r,t){var e=Nc(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?Tc(r,e):r,s=e.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var u=i[o],a=Pc(u,n[u],e,typeof r=="string");s=kt.merge(s,a,e)}return e.allowSparse===!0?s:kt.compact(s)},Lc=Sc,xc=_c,Cc=Fr,mr={formats:Cc,parse:xc,stringify:Lc},Bt=function(){return Bt=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bt.apply(this,arguments)};function Dc(r){return r.toLowerCase()}var Fc=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Mc=/[^A-Z0-9]+/gi;function ps(r,t){t===void 0&&(t={});for(var e=t.splitRegexp,n=e===void 0?Fc:e,s=t.stripRegexp,i=s===void 0?Mc:s,o=t.transform,u=o===void 0?Dc:o,a=t.delimiter,h=a===void 0?" ":a,p=kn(kn(r,n,"$1\0$2"),i,"\0"),f=0,d=p.length;p.charAt(f)==="\0";)f++;for(;p.charAt(d-1)==="\0";)d--;return p.slice(f,d).split("\0").map(u).join(h)}function kn(r,t,e){return t instanceof RegExp?r.replace(t,e):t.reduce(function(n,s){return n.replace(s,e)},r)}function hs(r,t){var e=r.charAt(0),n=r.substr(1).toLowerCase();return t>0&&e>="0"&&e<="9"?"_"+e+n:""+e.toUpperCase()+n}function Uc(r,t){return t===void 0&&(t={}),ps(r,Bt({delimiter:"",transform:hs},t))}function kc(r,t){return t===0?r.toLowerCase():hs(r,t)}function Bc(r,t){return t===void 0&&(t={}),Uc(r,Bt({transform:kc},t))}function jc(r,t){return t===void 0&&(t={}),ps(r,Bt({delimiter:"."},t))}function Bn(r,t){return t===void 0&&(t={}),jc(r,Bt({delimiter:"_"},t))}var gr={},Gc={get exports(){return gr},set exports(r){gr=r}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(a,h,p){this.fn=a,this.context=h,this.once=p||!1}function i(a,h,p,f,d){if(typeof p!="function")throw new TypeError("The listener must be a function");var y=new s(p,f||a,d),w=e?e+h:h;return a._events[w]?a._events[w].fn?a._events[w]=[a._events[w],y]:a._events[w].push(y):(a._events[w]=y,a._eventsCount++),a}function o(a,h){--a._eventsCount===0?a._events=new n:delete a._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,f;if(this._eventsCount===0)return h;for(f in p=this._events)t.call(p,f)&&h.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=e?e+h:h,f=this._events[p];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,y=f.length,w=new Array(y);d<y;d++)w[d]=f[d].fn;return w},u.prototype.listenerCount=function(h){var p=e?e+h:h,f=this._events[p];return f?f.fn?1:f.length:0},u.prototype.emit=function(h,p,f,d,y,w){var L=e?e+h:h;if(!this._events[L])return!1;var g=this._events[L],A=arguments.length,U,N;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),A){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,p),!0;case 3:return g.fn.call(g.context,p,f),!0;case 4:return g.fn.call(g.context,p,f,d),!0;case 5:return g.fn.call(g.context,p,f,d,y),!0;case 6:return g.fn.call(g.context,p,f,d,y,w),!0}for(N=1,U=new Array(A-1);N<A;N++)U[N-1]=arguments[N];g.fn.apply(g.context,U)}else{var Y=g.length,H;for(N=0;N<Y;N++)switch(g[N].once&&this.removeListener(h,g[N].fn,void 0,!0),A){case 1:g[N].fn.call(g[N].context);break;case 2:g[N].fn.call(g[N].context,p);break;case 3:g[N].fn.call(g[N].context,p,f);break;case 4:g[N].fn.call(g[N].context,p,f,d);break;default:if(!U)for(H=1,U=new Array(A-1);H<A;H++)U[H-1]=arguments[H];g[N].fn.apply(g[N].context,U)}}return!0},u.prototype.on=function(h,p,f){return i(this,h,p,f,!1)},u.prototype.once=function(h,p,f){return i(this,h,p,f,!0)},u.prototype.removeListener=function(h,p,f,d){var y=e?e+h:h;if(!this._events[y])return this;if(!p)return o(this,y),this;var w=this._events[y];if(w.fn)w.fn===p&&(!d||w.once)&&(!f||w.context===f)&&o(this,y);else{for(var L=0,g=[],A=w.length;L<A;L++)(w[L].fn!==p||d&&!w[L].once||f&&w[L].context!==f)&&g.push(w[L]);g.length?this._events[y]=g.length===1?g[0]:g:o(this,y)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=e?e+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,r.exports=u})(Gc);var xt=null;typeof WebSocket<"u"?xt=WebSocket:typeof MozWebSocket<"u"?xt=MozWebSocket:typeof global<"u"?xt=global.WebSocket||global.MozWebSocket:typeof window<"u"?xt=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(xt=self.WebSocket||self.MozWebSocket);const Vc=xt;class mt extends Error{constructor(t,e={}){super(t,{cause:e.cause}),this.name="MastoError",this.isMastoError=!0,Object.setPrototypeOf(this,mt.prototype),this.description=e.description,this.details=e.details}}class nt extends mt{constructor(t,e,n){super(t,n),this.name="MastoHttpError",Object.setPrototypeOf(this,nt.prototype),this.statusCode=e}}class Mr extends nt{constructor(t,e){super(t,409,e),this.name="MastoHttpConflictError",Object.setPrototypeOf(this,Mr.prototype)}}class Ur extends nt{constructor(t,e){super(t,403,e),this.name="MastoHttpForbiddenError",Object.setPrototypeOf(this,Ur.prototype)}}class kr extends nt{constructor(t,e){super(t,410,e),this.name="MastoHttpGoneError",Object.setPrototypeOf(this,kr.prototype)}}class Fe extends nt{constructor(t,e){super(t,404,e),this.name="MastoHttpNotFoundError",Object.setPrototypeOf(this,Fe.prototype)}}class Br extends nt{constructor(t,e){super(t,429,e),this.name="MastoHttpRateLimitError",Object.setPrototypeOf(this,Br.prototype),this.limit=e==null?void 0:e.limit,this.remaining=e==null?void 0:e.remaining,this.reset=e==null?void 0:e.reset}}class jr extends nt{constructor(t,e){super(t,401,e),this.name="MastoHttpUnauthorizedError",Object.setPrototypeOf(this,jr.prototype)}}class Gr extends nt{constructor(t,e,n){super(t,e,n),this.name="MastoHttpUnexpectedError",Object.setPrototypeOf(this,Gr.prototype)}}class Vr extends nt{constructor(t,e){super(t,422,e),this.name="MastoHttpUnprocessableEntityError",Object.setPrototypeOf(this,Vr.prototype)}}const Wc=r=>{var t,e;const n=(t=r.message)!==null&&t!==void 0?t:"Unexpected error occurred",s={cause:r.cause,description:(e=r.description)!==null&&e!==void 0?e:"No further description is provided for this error",details:r.details};switch(r.statusCode){case 401:return new jr(n,s);case 403:return new Ur(n,s);case 404:return new Fe(n,s);case 409:return new Mr(n,s);case 410:return new kr(n,s);case 422:return new Vr(n,s);case 429:return new Br(n,Object.assign(Object.assign({},s),{limit:r.limit,remaining:r.remaining,reset:r.reset}));default:return new Gr(n,r.statusCode,s)}};class se extends mt{constructor(t,e={}){super(t,{cause:e.cause}),this.name="MastoUnexpectedError",Object.setPrototypeOf(this,se.prototype)}}class Wr extends mt{constructor(t,e,n,s){super(t,s),this.contentType=e,this.data=n,this.name="MastoDeserializeError",Object.setPrototypeOf(this,Wr.prototype)}}class Pe extends mt{constructor(t,e){super(t,e),this.name="MastoVersionError",Object.setPrototypeOf(this,Pe.prototype)}}class qr extends mt{constructor(t,e){super(t,e),this.name="MastoInvalidArgumentError",Object.setPrototypeOf(this,qr.prototype)}}class Me extends mt{constructor(t,e){super(t,e),this.name="MastoTimeoutError",Object.setPrototypeOf(this,Me.prototype)}}class qc{constructor(t){this.logLevel=t}debug(t,e){this.logLevel.satisfies("debug")&&this.log("debug",t,e)}info(t,e){this.logLevel.satisfies("info")&&this.log("info",t,e)}warn(t,e){this.logLevel.satisfies("warn")&&this.log("warn",t,e)}error(t,e){this.logLevel.satisfies("error")&&this.log("error",t,e)}}class Hc extends qc{constructor(t){super(t)}log(t,e,n){switch(t){case"debug":{console.debug(e,n);return}case"info":{console.info(e,n);return}case"warn":{console.warn(e,n);return}case"error":{console.error(e,n);return}}}}const W=Object.freeze({DEBUG:1<<0,INFO:1<<1,WARN:1<<2,ERROR:1<<3});class Ct{constructor(t){this.level=t}satisfies(t){switch(t){case"debug":return Boolean(this.level&W.DEBUG);case"info":return Boolean(this.level&W.INFO);case"warn":return Boolean(this.level&W.WARN);case"error":return Boolean(this.level&W.ERROR)}}static from(t){switch(t){case"debug":return new Ct(W.DEBUG|W.INFO|W.WARN|W.ERROR);case"info":return new Ct(W.INFO|W.WARN|W.ERROR);case"warn":return new Ct(W.WARN|W.ERROR);case"error":return new Ct(W.ERROR)}}}const zc=r=>new Promise(t=>setTimeout(()=>t(),r));class Xc{constructor(t){this.abortController=new Wn,this.timeout=setTimeout(()=>{this.abortController.abort()},t)}get signal(){return this.abortController.signal}clear(){clearTimeout(this.timeout)}}const Kc=r=>{const t=new Wn;for(const e of r)e.addEventListener("abort",()=>t.abort());return t.signal},Qc=([r,...t])=>{const e=new be(r);for(const n of t)new be(n).forEach((s,i)=>{e.set(i,s)});return e},Yc=1e3*300;class Jc{constructor(t,e){this.props=t,this.serializer=e}createHeader(t={}){var e,n;const s=Qc([(n=(e=this.props.defaultRequestInit)===null||e===void 0?void 0:e.headers)!==null&&n!==void 0?n:{},{"Content-Type":"application/json"},t]),i=new be(s);return this.props.accessToken&&i.set("Authorization",`Bearer ${this.props.accessToken}`),new be(i)}createWebsocketProtocols(t=[]){return this.supportsSecureToken()&&this.props.accessToken!=null?[this.props.accessToken,...t]:t}resolveHttpPath(t,e){const n=new URL(t,this.props.url);return e&&(n.search=this.serializer.serializeQueryString(e)),n}resolveWebsocketPath(t,e={}){if(this.props.streamingApiUrl==null)throw new qr("You need to specify `streamingApiUrl` to use this feature");const n=new URL(this.props.streamingApiUrl.replace(/\/$/,"")+t);return this.supportsSecureToken()||(e.accessToken=this.props.accessToken),n.search=this.serializer.serializeQueryString(e),n.toString()}createTimeout(){var t;return new Xc((t=this.props.timeout)!==null&&t!==void 0?t:Yc)}createAbortSignal(t){var e;const n=this.createTimeout(),s=[n.signal];return!((e=this.props.defaultRequestInit)===null||e===void 0)&&e.signal&&s.push(this.props.defaultRequestInit.signal),t!=null&&s.push(t),[Kc(s),n]}getLogLevel(){var t;return Ct.from((t=this.props.logLevel)!==null&&t!==void 0?t:"warn")}shouldWarnDeprecated(){return!this.props.disableDeprecatedWarning}satisfiesVersion(t,e){var n;return this.props.version==null||this.props.disableVersionCheck?{compat:"compatible",version:(n=this.props.version)===null||n===void 0?void 0:n.version}:t&&bt.lt(this.props.version,t)?{compat:"unimplemented",version:this.props.version.version}:e&&bt.gt(this.props.version,e)?{compat:"removed",version:this.props.version.version}:{compat:"compatible",version:this.props.version.version}}supportsSecureToken(){var t;return this.props.version==null||this.props.disableVersionCheck?!0:((t=this.props.streamingApiUrl)===null||t===void 0?void 0:t.startsWith("wss:"))&&bt.gte(this.props.version,new bt.SemVer("2.8.4",{loose:!0}))}}class Zc{get(t,e,n={}){return this.request({path:t,searchParams:e,requestInit:Object.assign({method:"GET"},n)}).then(s=>s.data)}post(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"POST"},n)}).then(s=>s.data)}delete(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"DELETE"},n)}).then(s=>s.data)}put(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"PUT"},n)}).then(s=>s.data)}patch(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"PATCH"},n)}).then(s=>s.data)}}function l(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var u=r.length-1;u>=0;u--)(o=r[u])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i}function dt(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function u(p){try{h(n.next(p))}catch(f){o(f)}}function a(p){try{h(n.throw(p))}catch(f){o(f)}}function h(p){p.done?i(p.value):s(p.value).then(u,a)}h((n=n.apply(r,t||[])).next())})}const we=r=>{const t=r.get("Content-Type");if(typeof t=="string")return t.replace(/\s*;.*$/,"")};class tu extends Zc{constructor(t,e,n){super(),this.serializer=t,this.config=e,this.logger=n}request(t){var e,n,s,i,o;return dt(this,void 0,void 0,function*(){const[u,a]=this.createRequest(t);try{(e=this.logger)===null||e===void 0||e.info(`↑ ${u.method} ${u.url}`),(n=this.logger)===null||n===void 0||n.debug("	body",u.body);const h=yield Ws(u);if(a.clear(),!h.ok)throw h;const p=yield h.text(),f=we(h.headers);if(f==null)throw new se("Content-Type is not defined");const d=this.serializer.deserialize(f,p);return(s=this.logger)===null||s===void 0||s.info(`↓ ${u.method} ${u.url}`),(i=this.logger)===null||i===void 0||i.debug("	body",p),{headers:h.headers,data:d}}catch(h){throw(o=this.logger)===null||o===void 0||o.debug("HTTP failed",h),yield this.createError(h)}})}createRequest(t){var e;const{path:n,searchParams:s,requestInit:i}=t,o=this.config.resolveHttpPath(n,s),u=this.config.createHeader(i==null?void 0:i.headers),[a,h]=this.config.createAbortSignal(i==null?void 0:i.signal),p=this.serializer.serialize((e=we(u))!==null&&e!==void 0?e:"application/json",t.body);return p instanceof Vn&&u.delete("Content-Type"),p==null&&we(u)=="application/json"&&u.delete("Content-Type"),[new Gs(o,Object.assign(Object.assign({},i),{headers:u,body:p,signal:a})),h]}createError(t){var e;return dt(this,void 0,void 0,function*(){if(t instanceof Vs){const n=this.serializer.deserialize((e=we(t.headers))!==null&&e!==void 0?e:"application/json",yield t.text());return Wc({cause:t,statusCode:t.status,message:n==null?void 0:n.error,details:n==null?void 0:n.errorDescription,description:n==null?void 0:n.details,limit:t.headers.get("X-RateLimit-Limit"),remaining:t.headers.get("X-RateLimit-Remaining"),reset:t.headers.get("X-RateLimit-Reset")})}return t!=null&&t.name==="AbortError"?new Me("Request timed out",{cause:t}):t})}}const c=r=>(t,e,n)=>{const s=n.value;if(!s)throw new se("version can only apply to a method of a class");n.value=function(...i){const o=r.since&&new bt.SemVer(r.since,{loose:!0}),u=r.until&&new bt.SemVer(r.until,{loose:!0}),a=this.config.satisfiesVersion(o,u);switch(a.compat){case"unimplemented":throw new Pe(`${String(this.constructor.name)}.${String(e)} is not available with the current Mastodon version `+a.version+` It requires greater than or equal to version ${o}.`);case"removed":throw new Pe(`${String(this.constructor.name)}.${String(e)} is not available with the current Mastodon version`+a.version+` It was removed on version ${u}.`);case"compatible":return s.apply(this,i)}}};class E{constructor(t,e,n){this.http=t,this.nextPath=e,this.nextParams=n,this.pluckNext=s=>{var i;return s==null||(i=s.match(/<(.+?)>; rel="next"/))===null||i===void 0?void 0:i[1].replace(/^https?:\/\/[^/]+/,"")}}next(){var t,e;return dt(this,void 0,void 0,function*(){if(this.nextPath==null)return{done:!0,value:void 0};const n=yield this.http.request({requestInit:{method:"GET"},path:this.nextPath,searchParams:this.nextParams}),s=(t=this.pluckNext(n.headers.get("link")))===null||t===void 0?void 0:t.split("?");return this.nextPath=s==null?void 0:s[0],this.nextParams=mr.parse((e=s==null?void 0:s[1])!==null&&e!==void 0?e:""),{done:!1,value:n.data}})}return(t){return dt(this,void 0,void 0,function*(){return this.clear(),{done:!0,value:yield t}})}throw(t){return dt(this,void 0,void 0,function*(){throw this.clear(),t})}then(t=Promise.resolve,e=Promise.reject){return this.next().then(n=>t(n.value),e)}[Symbol.asyncIterator](){return this}clear(){this.nextPath=void 0,this.nextParams=void 0}clone(){return new E(this.http,this.nextPath,this.nextParams)}}let x=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/accounts/${t}`)}create(t){return this.http.post("/api/v1/accounts",t,{headers:{"Content-Type":"multipart/form-data"}})}verifyCredentials(){return this.http.get("/api/v1/accounts/verify_credentials")}updateCredentials(t){return this.http.patch("/api/v1/accounts/update_credentials",t,{headers:{"Content-Type":"multipart/form-data"}})}listFollowers(t,e={}){return new E(this.http,`/api/v1/accounts/${t}/followers`,e)}listFollowing(t,e={}){return new E(this.http,`/api/v1/accounts/${t}/following`,e)}listStatuses(t,e={}){return new E(this.http,`/api/v1/accounts/${t}/statuses`,e)}follow(t,e){return this.http.post(`/api/v1/accounts/${t}/follow`,e)}unfollow(t,e){return this.http.post(`/api/v1/accounts/${t}/unfollow`,e)}fetchRelationships(t){return this.http.get("/api/v1/accounts/relationships",{id:t})}search(t){return new E(this.http,"/api/v1/accounts/search",t)}block(t){return this.http.post(`/api/v1/accounts/${t}/block`)}unblock(t){return this.http.post(`/api/v1/accounts/${t}/unblock`)}pin(t){return this.http.post(`/api/v1/accounts/${t}/pin`)}unpin(t){return this.http.post(`/api/v1/accounts/${t}/unpin`)}listLists(t){return new E(this.http,`/api/v1/accounts/${t}/lists`)}mute(t,e){return this.http.post(`/api/v1/accounts/${t}/mute`,e)}unmute(t){return this.http.post(`/api/v1/accounts/${t}/unmute`)}createNote(t,e){return this.http.post(`/api/v1/accounts/${t}/note`,e)}listFeaturedTags(t){return new E(this.http,`/api/v1/accounts/${t}/featured_tags`)}listIdentityProofs(t){return new E(this.http,`/api/v1/accounts/${t}/identity_proofs`)}lookup(t){return this.http.get("/api/v1/accounts/lookup",t)}fetchFamiliarFollowers(t){return this.http.get("/api/v1/accounts/familiar_followers",{id:t})}removeFromFollowers(t){return this.http.post(`/api/v1/accounts/${t}/remove_from_followers`)}};l([c({since:"0.0.0"})],x.prototype,"fetch",null);l([c({since:"2.7.0"})],x.prototype,"create",null);l([c({since:"0.0.0"})],x.prototype,"verifyCredentials",null);l([c({since:"0.0.0"})],x.prototype,"updateCredentials",null);l([c({since:"0.0.0"})],x.prototype,"listFollowers",null);l([c({since:"0.0.0"})],x.prototype,"listFollowing",null);l([c({since:"0.0.0"})],x.prototype,"listStatuses",null);l([c({since:"0.0.0"})],x.prototype,"follow",null);l([c({since:"0.0.0"})],x.prototype,"unfollow",null);l([c({since:"0.0.0"})],x.prototype,"fetchRelationships",null);l([c({since:"0.0.0"})],x.prototype,"search",null);l([c({since:"0.0.0"})],x.prototype,"block",null);l([c({since:"0.0.0"})],x.prototype,"unblock",null);l([c({since:"2.5.0"})],x.prototype,"pin",null);l([c({since:"2.5.0"})],x.prototype,"unpin",null);l([c({since:"2.1.0"})],x.prototype,"listLists",null);l([c({since:"0.0.0"})],x.prototype,"mute",null);l([c({since:"0.0.0"})],x.prototype,"unmute",null);l([c({since:"3.2.0"})],x.prototype,"createNote",null);l([c({since:"3.3.0"})],x.prototype,"listFeaturedTags",null);l([c({since:"2.8.0"})],x.prototype,"listIdentityProofs",null);l([c({since:"3.4.0"})],x.prototype,"lookup",null);l([c({since:"3.5.0"})],x.prototype,"fetchFamiliarFollowers",null);l([c({since:"3.5.0"})],x.prototype,"removeFromFollowers",null);const Ue=r=>(t,e,n)=>{const s=n.value;if(s==null)throw new se("deprecated can only apply to a method of a class");n.value=function(...i){var o,u;return!((o=this.config)===null||o===void 0)&&o.shouldWarnDeprecated()&&((u=this.logger)===null||u===void 0||u.warn(`#${e.toString()} is deprecated. ${r}`)),s.apply(this,i)}};class ct{constructor(t,e,n){this.ws=t,this.config=e,this.logger=n}streamUser(){return this.ws.stream("/api/v1/streaming",{stream:"user"})}streamPublicTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"public"})}streamCommunityTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"public:local"})}streamRemotePublicTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"public:remote"})}streamTagTimeline(t){return this.ws.stream("/api/v1/streaming",{stream:"hashtag",tag:t})}streamLocalTagTimeline(t){return this.ws.stream("/api/v1/streaming",{stream:"hashtag:local",tag:t})}streamListTimeline(t){return this.ws.stream("/api/v1/streaming",{stream:"list",list:t})}streamDirectTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"direct"})}}l([c({since:"0.0.0"})],ct.prototype,"streamUser",null);l([c({since:"0.0.0"})],ct.prototype,"streamPublicTimeline",null);l([c({since:"0.0.0"})],ct.prototype,"streamCommunityTimeline",null);l([c({since:"0.0.0"})],ct.prototype,"streamRemotePublicTimeline",null);l([c({since:"0.0.0"})],ct.prototype,"streamTagTimeline",null);l([c({since:"0.0.0"})],ct.prototype,"streamLocalTagTimeline",null);l([c({since:"0.0.0"})],ct.prototype,"streamListTimeline",null);l([c({since:"0.0.0"})],ct.prototype,"streamDirectTimeline",null);class ie{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new E(this.http,"/api/v1/announcements")}dismiss(t){return this.http.post(`/api/v1/announcements/${t}/dismiss`)}addReaction(t,e){return this.http.put(`/api/v1/announcements/${t}/reactions/${e}`)}removeReaction(t,e){return this.http.delete(`/api/v1/announcements/${t}/reactions/${e}`)}}l([c({since:"3.1.0"})],ie.prototype,"list",null);l([c({since:"3.1.0"})],ie.prototype,"dismiss",null);l([c({since:"3.1.0"})],ie.prototype,"addReaction",null);l([c({since:"3.1.0"})],ie.prototype,"removeReaction",null);class Hr{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/apps",t)}verifyCredentials(){return this.http.get("/api/v1/apps/verify_credentials")}}l([c({since:"0.0.0"})],Hr.prototype,"create",null);l([c({since:"2.0.0"})],Hr.prototype,"verifyCredentials",null);class fs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t={}){return new E(this.http,"/api/v1/blocks",t)}}l([c({since:"0.0.0"})],fs.prototype,"list",null);class ys{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t={}){return new E(this.http,"/api/v1/bookmarks",t)}}l([c({since:"3.1.0"})],ys.prototype,"list",null);class ke{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t={}){return new E(this.http,"/api/v1/conversations",t)}remove(t){return this.http.delete(`/api/v1/conversations/${t}`)}read(t){return this.http.post(`/api/v1/conversations/${t}/read`)}}l([c({since:"2.6.0"})],ke.prototype,"list",null);l([c({since:"2.6.0"})],ke.prototype,"remove",null);l([c({since:"2.6.0"})],ke.prototype,"read",null);class ds{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new E(this.http,"/api/v1/custom_emojis")}}l([c({since:"2.0.0"})],ds.prototype,"list",null);class vs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/directory",t)}}l([c({since:"3.0.0"})],vs.prototype,"list",null);let Be=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/domain_blocks",t)}block(t){return this.http.post("/api/v1/domain_blocks",{domain:t})}unblock(t){return this.http.delete("/api/v1/domain_blocks",{domain:t})}};l([c({since:"1.4.0"})],Be.prototype,"list",null);l([c({since:"1.4.0"})],Be.prototype,"block",null);l([c({since:"1.4.0"})],Be.prototype,"unblock",null);class ms{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/endorsements",t)}}l([c({since:"2.5.0"})],ms.prototype,"list",null);class gs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/favourites",t)}}l([c({since:"0.0.0"})],gs.prototype,"list",null);class oe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new E(this.http,"/api/v1/featured_tags")}create(t){return this.http.post("/api/v1/featured_tags",t)}listSuggestions(){return new E(this.http,"/api/v1/featured_tags/suggestions")}remove(t){return this.http.delete(`/api/v1/featured_tags/${t}`)}}l([c({since:"3.0.0"})],oe.prototype,"list",null);l([c({since:"3.0.0"})],oe.prototype,"create",null);l([c({since:"3.0.0"})],oe.prototype,"listSuggestions",null);l([c({since:"3.0.0"})],oe.prototype,"remove",null);let Vt=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new E(this.http,"/api/v1/filters")}fetch(t){return this.http.get(`/api/v1/filters/${t}`)}create(t){return this.http.post("/api/v1/filters",t)}update(t,e){return this.http.put(`/api/v1/filters/${t}`,e)}remove(t){return this.http.delete(`/api/v1/filters/${t}`)}};l([c({since:"2.4.3"})],Vt.prototype,"list",null);l([c({since:"2.4.3"})],Vt.prototype,"fetch",null);l([c({since:"2.4.3"})],Vt.prototype,"create",null);l([c({since:"2.4.3"})],Vt.prototype,"update",null);l([c({since:"2.4.3"})],Vt.prototype,"remove",null);class je{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/follow_requests",t)}authorize(t){return this.http.post(`/api/v1/follow_requests/${t}/authorize`)}reject(t){return this.http.post(`/api/v1/follow_requests/${t}/reject`)}}l([c({since:"0.0.0"})],je.prototype,"list",null);l([c({since:"0.0.0"})],je.prototype,"authorize",null);l([c({since:"0.0.0"})],je.prototype,"reject",null);let ae=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(){return this.http.get("/api/v1/instance")}listPeers(){return new E(this.http,"/api/v1/instance/peers")}listActivities(){return new E(this.http,"/api/v1/instance/activity")}};l([c({since:"1.0.0"})],ae.prototype,"fetch",null);l([c({since:"2.1.2"})],ae.prototype,"listPeers",null);l([c({since:"2.1.2"})],ae.prototype,"listActivities",null);class ut{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/lists/${t}`)}list(){return new E(this.http,"/api/v1/lists")}create(t){return this.http.post("/api/v1/lists",t)}update(t,e){return this.http.put(`/api/v1/lists/${t}`,e)}remove(t){return this.http.delete(`/api/v1/lists/${t}`)}listAccounts(t,e){return new E(this.http,`/api/v1/lists/${t}/accounts`,e)}addAccount(t,e){return this.http.post(`/api/v1/lists/${t}/accounts`,e)}removeAccount(t,e){return this.http.delete(`/api/v1/lists/${t}/accounts`,e)}}l([c({since:"2.1.0"})],ut.prototype,"fetch",null);l([c({since:"2.1.0"})],ut.prototype,"list",null);l([c({since:"2.1.0"})],ut.prototype,"create",null);l([c({since:"2.1.0"})],ut.prototype,"update",null);l([c({since:"2.1.0"})],ut.prototype,"remove",null);l([c({since:"2.1.0"})],ut.prototype,"listAccounts",null);l([c({since:"2.1.0"})],ut.prototype,"addAccount",null);l([c({since:"2.1.0"})],ut.prototype,"removeAccount",null);class zr{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get("/api/v1/markers",t)}create(t){return this.http.post("/api/v1/markers",t)}}l([c({since:"3.0.0"})],zr.prototype,"fetch",null);l([c({since:"3.0.0"})],zr.prototype,"create",null);let le=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/media",t,{headers:{"Content-Type":"multipart/form-data"}})}fetch(t){return this.http.get(`/api/v1/media/${t}`)}update(t,e){return this.http.put(`/api/v1/media/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}})}};l([Ue("Use MastoClient.v2.media.create instead"),c({since:"0.0.0",until:"3.1.3"})],le.prototype,"create",null);l([c({since:"3.1.3"})],le.prototype,"fetch",null);l([c({since:"0.0.0"})],le.prototype,"update",null);class $s{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/mutes",t)}}l([c({since:"0.0.0"})],$s.prototype,"list",null);class ce{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/notifications",t)}fetch(t){return this.http.get(`/api/v1/notifications/${t}`)}clear(){return this.http.post("/api/v1/notifications/clear")}dismiss(t){return this.http.post(`/api/v1/notifications/${t}/dismiss`)}}l([c({since:"0.0.0"})],ce.prototype,"list",null);l([c({since:"0.0.0"})],ce.prototype,"fetch",null);l([c({since:"0.0.0"})],ce.prototype,"clear",null);l([c({since:"2.6.0"})],ce.prototype,"dismiss",null);class Xr{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/polls/${t}`)}vote(t,e){return this.http.post(`/api/v1/polls/${t}/votes`,e)}}l([c({since:"2.8.0"})],Xr.prototype,"fetch",null);l([c({since:"2.8.0"})],Xr.prototype,"vote",null);class Es{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(){return this.http.get("/api/v1/preferences")}}l([c({since:"2.8.0"})],Es.prototype,"fetch",null);class ue{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/push/subscription",t)}fetch(){return this.http.get("/api/v1/push/subscription")}update(t){return this.http.put("/api/v1/push/subscription",t)}remove(){return this.http.delete("/api/v1/push/subscription")}}l([c({since:"2.4.0"})],ue.prototype,"create",null);l([c({since:"2.4.0"})],ue.prototype,"fetch",null);l([c({since:"2.4.0"})],ue.prototype,"update",null);l([c({since:"2.4.0"})],ue.prototype,"remove",null);let ws=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/reports",t)}};l([c({since:"1.1.0"})],ws.prototype,"create",null);class pe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/scheduled_statuses",t)}fetch(t){return this.http.get(`/api/v1/scheduled_statuses/${t}`)}update(t,e){return this.http.put(`/api/v1/scheduled_statuses/${t}`,e)}remove(t){return this.http.delete(`/api/v1/scheduled_statuses/${t}`)}}l([c({since:"2.7.0"})],pe.prototype,"list",null);l([c({since:"2.7.0"})],pe.prototype,"fetch",null);l([c({since:"2.7.0"})],pe.prototype,"update",null);l([c({since:"2.7.0"})],pe.prototype,"remove",null);class F{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/statuses/${t}`)}create(t,e={}){return e.idempotencyKey?this.http.post("/api/v1/statuses",t,{headers:{"Idempotency-Key":e.idempotencyKey}}):this.http.post("/api/v1/statuses",t)}update(t,e){return this.http.put(`/api/v1/statuses/${t}`,e)}remove(t){return this.http.delete(`/api/v1/statuses/${t}`)}fetchContext(t){return this.http.get(`/api/v1/statuses/${t}/context`)}fetchCard(t){return this.http.get(`/api/v1/statuses/${t}/card`)}favourite(t){return this.http.post(`/api/v1/statuses/${t}/favourite`)}unfavourite(t){return this.http.post(`/api/v1/statuses/${t}/unfavourite`)}mute(t){return this.http.post(`/api/v1/statuses/${t}/mute`)}unmute(t){return this.http.post(`/api/v1/statuses/${t}/unmute`)}listRebloggedBy(t){return new E(this.http,`/api/v1/statuses/${t}/reblogged_by`)}listFavouritedBy(t){return new E(this.http,`/api/v1/statuses/${t}/favourited_by`)}reblog(t,e){return this.http.post(`/api/v1/statuses/${t}/reblog`,e)}unreblog(t){return this.http.post(`/api/v1/statuses/${t}/unreblog`)}pin(t){return this.http.post(`/api/v1/statuses/${t}/pin`)}unpin(t){return this.http.post(`/api/v1/statuses/${t}/unpin`)}bookmark(t){return this.http.post(`/api/v1/statuses/${t}/bookmark`)}unbookmark(t){return this.http.post(`/api/v1/statuses/${t}/unbookmark`)}listHistory(t){return new E(this.http,`/api/v1/statuses/${t}/history`)}fetchSource(t){return this.http.get(`/api/v1/statuses/${t}/source`)}translate(t,e){return this.http.post(`/api/v1/statuses/${t}/translate`,e,{headers:{"Content-Type":"multipart/form-data"}})}}l([c({since:"0.0.0"})],F.prototype,"fetch",null);l([c({since:"0.0.0"})],F.prototype,"create",null);l([c({since:"3.5.0"})],F.prototype,"update",null);l([c({since:"0.0.0"})],F.prototype,"remove",null);l([c({since:"0.0.0"})],F.prototype,"fetchContext",null);l([Ue("Use `card` attribute of status instead"),c({since:"0.0.0",until:"2.9.3"})],F.prototype,"fetchCard",null);l([c({since:"0.0.0"})],F.prototype,"favourite",null);l([c({since:"0.0.0"})],F.prototype,"unfavourite",null);l([c({since:"1.4.2"})],F.prototype,"mute",null);l([c({since:"1.4.2"})],F.prototype,"unmute",null);l([c({since:"0.0.0"})],F.prototype,"listRebloggedBy",null);l([c({since:"0.0.0"})],F.prototype,"listFavouritedBy",null);l([c({since:"0.0.0"})],F.prototype,"reblog",null);l([c({since:"0.0.0"})],F.prototype,"unreblog",null);l([c({since:"1.6.0"})],F.prototype,"pin",null);l([c({since:"1.6.0"})],F.prototype,"unpin",null);l([c({since:"3.1.0"})],F.prototype,"bookmark",null);l([c({since:"3.1.0"})],F.prototype,"unbookmark",null);l([c({since:"3.5.0"})],F.prototype,"listHistory",null);l([c({since:"3.5.0"})],F.prototype,"fetchSource",null);l([c({since:"4.0.0"})],F.prototype,"translate",null);let Kr=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/suggestions",t)}remove(t){return this.http.delete(`/api/v1/suggestions/${t}`)}};l([Ue("Use MastoClient.v2.suggestions.list instead"),c({since:"2.4.3"})],Kr.prototype,"list",null);l([c({since:"2.4.3"})],Kr.prototype,"remove",null);class Wt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}listHome(t){return new E(this.http,"/api/v1/timelines/home",t)}listPublic(t){return new E(this.http,"/api/v1/timelines/public",t)}listHashtag(t,e){return new E(this.http,`/api/v1/timelines/tag/${t}`,e)}listList(t,e){return new E(this.http,`/api/v1/timelines/list/${t}`,e)}listDirect(t){return new E(this.http,"/api/v1/timelines/direct",t)}}l([c({since:"0.0.0"})],Wt.prototype,"listHome",null);l([c({since:"0.0.0"})],Wt.prototype,"listPublic",null);l([c({since:"0.0.0"})],Wt.prototype,"listHashtag",null);l([c({since:"2.1.0"})],Wt.prototype,"listList",null);l([Ue("Use conversations API instead"),c({since:"0.0.0",until:"2.9.3"})],Wt.prototype,"listDirect",null);let Ge=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}listStatuses(t){return new E(this.http,"/api/v1/trends/statuses",t)}listLinks(t){return new E(this.http,"/api/v1/trends/links",t)}listTags(t){return new E(this.http,"/api/v1/trends/tags",t)}};l([c({since:"3.5.0"})],Ge.prototype,"listStatuses",null);l([c({since:"3.5.0"})],Ge.prototype,"listLinks",null);l([c({since:"3.0.0"})],Ge.prototype,"listTags",null);class eu{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}createConfirmation(t){return this.http.post("/api/v1/email/confirmations",t)}}class Ve{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/tags/${t}`)}follow(t){return this.http.post(`/api/v1/tags/${t}/follow`)}unfollow(t){return this.http.post(`/api/v1/tags/${t}/unfollow`)}}l([c({since:"4.0.0"})],Ve.prototype,"fetch",null);l([c({since:"4.0.0"})],Ve.prototype,"follow",null);l([c({since:"4.0.0"})],Ve.prototype,"unfollow",null);class Ss{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/followed_tags",t)}}l([c({since:"4.0.0"})],Ss.prototype,"list",null);class pt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/accounts",t)}fetch(t){return this.http.get(`/api/v1/admin/accounts/${t}`)}createAction(t,e){return this.http.post(`/api/v1/admin/accounts/${t}/action`,e)}approve(t){return this.http.post(`/api/v1/admin/accounts/${t}/approve`)}reject(t){return this.http.post(`/api/v1/admin/accounts/${t}/reject`)}enable(t){return this.http.post(`/api/v1/admin/accounts/${t}/enable`)}unsilence(t){return this.http.post(`/api/v1/admin/accounts/${t}/unsilence`)}unsuspend(t){return this.http.post(`/api/v1/admin/accounts/${t}/unsuspend`)}}l([c({since:"2.9.1"})],pt.prototype,"list",null);l([c({since:"2.9.1"})],pt.prototype,"fetch",null);l([c({since:"2.9.1"})],pt.prototype,"createAction",null);l([c({since:"2.9.1"})],pt.prototype,"approve",null);l([c({since:"2.9.1"})],pt.prototype,"reject",null);l([c({since:"2.9.1"})],pt.prototype,"enable",null);l([c({since:"2.9.1"})],pt.prototype,"unsilence",null);l([c({since:"2.9.1"})],pt.prototype,"unsuspend",null);class qt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/canonical_email_blocks",t)}fetch(t){return this.http.get(`/api/v1/admin/canonical_email_blocks/${t}`)}test(t){return this.http.post("/api/v1/admin/canonical_email_blocks/test",t)}create(t){return this.http.post("/api/v1/admin/canonical_email_blocks",t)}remove(t){return this.http.delete(`/api/v1/admin/canonical_email_blocks/${t}`)}}l([c({since:"4.0.0"})],qt.prototype,"list",null);l([c({since:"4.0.0"})],qt.prototype,"fetch",null);l([c({since:"4.0.0"})],qt.prototype,"test",null);l([c({since:"4.0.0"})],qt.prototype,"create",null);l([c({since:"4.0.0"})],qt.prototype,"remove",null);class ru{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.post("/api/v1/admin/dimensions",t,{headers:{"Content-Type":"multipart/form-data"}})}}class he{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/domain_allows",t)}fetch(t){return this.http.get(`/api/v1/admin/domain_allows/${t}`)}create(t){return this.http.post("/api/v1/admin/domain_allows",t)}remove(t){return this.http.delete(`/api/v1/admin/domain_allows/${t}`)}}l([c({since:"4.0.0"})],he.prototype,"list",null);l([c({since:"4.0.0"})],he.prototype,"fetch",null);l([c({since:"4.0.0"})],he.prototype,"create",null);l([c({since:"4.0.0"})],he.prototype,"remove",null);class Ht{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/domain_blocks",t)}fetch(t){return this.http.get(`/api/v1/admin/domain_blocks/${t}`)}create(t){return this.http.post("/api/v1/admin/domain_blocks",t)}update(t,e){return this.http.put(`/api/v1/admin/domain_blocks/${t}`,e)}remove(t){return this.http.delete(`/api/v1/admin/domain_blocks/${t}`)}}l([c({since:"4.0.0"})],Ht.prototype,"list",null);l([c({since:"4.0.0"})],Ht.prototype,"fetch",null);l([c({since:"4.0.0"})],Ht.prototype,"create",null);l([c({since:"4.0.0"})],Ht.prototype,"update",null);l([c({since:"4.0.0"})],Ht.prototype,"remove",null);class fe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/email_domain_blocks ",t)}fetch(t){return this.http.get(`/api/v1/admin/email_domain_blocks/${t}`)}create(t){return this.http.post("/api/v1/admin/email_domain_blocks ",t)}remove(t){return this.http.delete(`/api/v1/admin/email_domain_blocks/${t}`)}}l([c({since:"4.0.0"})],fe.prototype,"list",null);l([c({since:"4.0.0"})],fe.prototype,"fetch",null);l([c({since:"4.0.0"})],fe.prototype,"create",null);l([c({since:"4.0.0"})],fe.prototype,"remove",null);class zt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/ip_blocks",t)}fetch(t){return this.http.get(`/api/v1/admin/ip_blocks/${t}`)}create(t){return this.http.post("/api/v1/admin/ip_blocks",t)}update(t){return this.http.put("/api/v1/admin/ip_blocks",t)}remove(t){return this.http.delete(`/api/v1/admin/ip_blocks/${t}`)}}l([c({since:"4.0.0"})],zt.prototype,"list",null);l([c({since:"4.0.0"})],zt.prototype,"fetch",null);l([c({since:"4.0.0"})],zt.prototype,"create",null);l([c({since:"4.0.0"})],zt.prototype,"update",null);l([c({since:"4.0.0"})],zt.prototype,"remove",null);class bs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.post("/api/v1/admin/measures",t,{headers:{"Content-Type":"multipart/form-data"}})}}l([c({since:"3.5.0"})],bs.prototype,"fetch",null);class Tt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v1/admin/reports",t)}fetch(t){return this.http.get(`/api/v1/admin/reports/${t}`)}assignToSelf(t){return this.http.post(`/api/v1/admin/reports/${t}/assign_to_self`)}unassign(t){return this.http.post(`/api/v1/admin/reports/${t}/unassign`)}resolve(t){return this.http.post(`/api/v1/admin/reports/${t}/resolve`)}reopen(t){return this.http.post(`/api/v1/admin/reports/${t}/reopen`)}}l([c({since:"2.9.1"})],Tt.prototype,"list",null);l([c({since:"2.9.1"})],Tt.prototype,"fetch",null);l([c({since:"2.9.1"})],Tt.prototype,"assignToSelf",null);l([c({since:"2.9.1"})],Tt.prototype,"unassign",null);l([c({since:"2.9.1"})],Tt.prototype,"resolve",null);l([c({since:"2.9.1"})],Tt.prototype,"reopen",null);class nu{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.get("/api/v1/admin/retention",t,{headers:{"Content-Type":"multipart/form-data"}})}}class We{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}listLinks(){return new E(this.http,"/api/v1/admin/trends/links")}listStatuses(){return new E(this.http,"/api/v1/admin/trends/statuses")}listTags(){return new E(this.http,"/api/v1/admin/trends/statuses")}}l([c({since:"3.5.0"})],We.prototype,"listLinks",null);l([c({since:"3.5.0"})],We.prototype,"listStatuses",null);l([c({since:"3.5.0"})],We.prototype,"listTags",null);class su{get account(){return this.accounts}get report(){return this.reports}get domainEmailBlocks(){return this.emailDomainBlocks}constructor(t,e,n){this.http=t,this.config=e,this.logger=n,this.accounts=new pt(this.http,this.config,this.logger),this.canonicalEmailBlocks=new qt(this.http,this.config,this.logger),this.dimensions=new ru(this.http,this.config,this.logger),this.domainBlocks=new Ht(this.http,this.config,this.logger),this.domainAllows=new he(this.http,this.config,this.logger),this.emailDomainBlocks=new fe(this.http,this.config,this.logger),this.ipBlocks=new zt(this.http,this.config,this.logger),this.measures=new bs(this.http,this.config,this.logger),this.reports=new Tt(this.http,this.config,this.logger),this.retention=new nu(this.http,this.config,this.logger),this.trends=new We(this.http,this.config,this.logger)}}let Rs=class{constructor(t,e,n,s){this.http=t,this.config=n,this.logger=s,this.admin=new su(t,n,s),this.stream=new ct(e,n,s),this.accounts=new x(t,n,s),this.announcements=new ie(t,n,s),this.apps=new Hr(t,n,s),this.blocks=new fs(t,n,s),this.bookmarks=new ys(t,n,s),this.conversations=new ke(t,n,s),this.customEmojis=new ds(t,n,s),this.directory=new vs(t,n,s),this.domainBlocks=new Be(t,n,s),this.endorsements=new ms(t,n,s),this.favourites=new gs(t,n,s),this.featuredTags=new oe(t,n,s),this.filters=new Vt(t,n,s),this.followRequests=new je(t,n,s),this.instances=new ae(t,n,s),this.lists=new ut(t,n,s),this.markers=new zr(t,n,s),this.mediaAttachments=new le(t,n,s),this.mutes=new $s(t,n,s),this.notifications=new ce(t,n,s),this.polls=new Xr(t,n,s),this.preferences=new Es(t,n,s),this.webPushSubscriptions=new ue(t,n,s),this.reports=new ws(t,n,s),this.scheduledStatuses=new pe(t,n,s),this.statuses=new F(t,n,s),this.suggestions=new Kr(t,n,s),this.timelines=new Wt(t,n,s),this.trends=new Ge(t,n,s),this.email=new eu(t,n,s),this.tags=new Ve(t,n,s),this.followedTags=new Ss(t,n,s)}search(t){return new E(this.http,"/api/v1/search",t)}};l([c({since:"1.1.0",until:"3.0.0"})],Rs.prototype,"search",null);class q{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new E(this.http,"/api/v2/filters")}fetch(t){return this.http.get(`/api/v2/filters/${t}`)}create(t){return this.http.post("/api/v2/filters",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}update(t,e){return this.http.put(`/api/v2/filters/${t}`,e)}remove(t){return this.http.delete(`/api/v2/filters/${t}`)}listKeywords(t){return new E(this.http,`/api/v2/filters/${t}/keywords`)}createKeyword(t,e){return this.http.post(`/api/v2/filters/${t}/keywords`,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}fetchKeyword(t){return new E(this.http,`/api/v2/filters/keywords/${t}`)}updateKeyword(t,e){return this.http.put(`/api/v2/filters/keywords/${t}`,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}removeKeyword(t){return this.http.delete(`/api/v2/filters/keywords/${t}`)}listStatuses(t){return new E(this.http,`/api/v2/filters/${t}/statuses`)}createStatus(t,e){return this.http.post(`/api/v2/filters/${t}/statuses`,e)}fetchStatus(t){return this.http.get(`/api/v2/filters/${t}/statuses`)}removeStatus(t){return this.http.get(`/api/v2/filters/statuses/${t}`)}}l([c({since:"4.0.0"})],q.prototype,"list",null);l([c({since:"4.0.0"})],q.prototype,"fetch",null);l([c({since:"4.0.0"})],q.prototype,"create",null);l([c({since:"4.0.0"})],q.prototype,"update",null);l([c({since:"4.0.0"})],q.prototype,"remove",null);l([c({since:"4.0.0"})],q.prototype,"listKeywords",null);l([c({since:"4.0.0"})],q.prototype,"createKeyword",null);l([c({since:"4.0.0"})],q.prototype,"fetchKeyword",null);l([c({since:"4.0.0"})],q.prototype,"updateKeyword",null);l([c({since:"4.0.0"})],q.prototype,"removeKeyword",null);l([c({since:"4.0.0"})],q.prototype,"listStatuses",null);l([c({since:"4.0.0"})],q.prototype,"fetchStatus",null);l([c({since:"4.0.0"})],q.prototype,"removeStatus",null);class As{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(){return this.http.get("/api/v2/instance")}}l([c({since:"4.0.0"})],As.prototype,"fetch",null);class Os{constructor(t,e,n){this.http=t,this.config=e,this.logger=n,this.v1=new le(t,e)}waitFor(t,e=1e3){return dt(this,void 0,void 0,function*(){const n=this.config.createTimeout();let s;for(;s==null;){if(n.signal.aborted)throw new Me("The media encoding has been timed out in your instance.");yield zc(e);try{const i=yield this.v1.fetch(t);i.url!=null&&(s=i,n.clear())}catch(i){if(i instanceof Fe)continue;throw i}}return s})}create(t,e={}){return dt(this,void 0,void 0,function*(){const n=yield this.http.post("/api/v2/media",t,{headers:{"Content-Type":"multipart/form-data"}});return e.skipPolling?n:this.waitFor(n.id)})}}l([c({since:"3.1.3"})],Os.prototype,"create",null);class Ts{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new E(this.http,"/api/v2/suggestions",t)}}l([c({since:"3.4.0"})],Ts.prototype,"list",null);class Is{constructor(t,e,n){this.http=t,this.config=e,this.logger=n,this.filters=new q(t,e,n),this.instance=new As(t,e,n),this.mediaAttachments=new Os(t,e,n),this.suggestions=new Ts(t,e,n)}search(t){return new E(this.http,"/api/v2/search",t)}}l([c({since:"2.4.1"})],Is.prototype,"search",null);class iu{constructor(t){this.http=t}createToken(t){return this.http.post("/oauth/token",t,{headers:{"Content-Type":"multipart/form-data"}})}}class ou{constructor(t,e,n,s){this.http=t,this.ws=e,this.config=n,this.logger=s,this.v1=new Rs(t,e,n,s),this.v2=new Is(t,n,s),this.oauth=new iu(t)}}const Ps=r=>typeof r=="object"&&r!==null&&r.constructor.name==="Object",$r=(r,t="")=>Array.isArray(r)?r.map((e,n)=>$r(e,t==""?n.toString():`${t}[${n}]`)).reduce((e,n)=>Object.assign(e,n),{}):Ps(r)?Object.entries(r).map(([e,n])=>$r(n,t===""?e:`${t}[${e}]`)).reduce((e,n)=>Object.assign(e,n),{}):t===""?r:{[t]:r},re=(r,t)=>Array.isArray(r)?r.map(e=>re(e,t)):Ps(r)?Object.fromEntries(Object.entries(r).map(([e,n])=>[t(e),re(n,t)])):r;class au{serialize(t,e){if(e==null)return;const n=re(e,Bn);switch(t){case"application/json":return JSON.stringify(n);case"multipart/form-data":{const s=new Vn;for(const[i,o]of Object.entries($r(n))){if(globalThis.Buffer!=null&&o instanceof globalThis.Buffer){s.append(i,o,"blob");continue}s.append(i,o)}return s}case"application/x-www-form-urlencoded":return mr.stringify(n,{encode:!1,arrayFormat:"brackets"});default:return}}serializeQueryString(t){const e=re(t,Bn);return mr.stringify(e,{encode:!1,arrayFormat:"brackets"})}deserialize(t,e){switch(t){case"application/json":try{return re(JSON.parse(e),Bc)}catch{return}default:throw new Wr(`Unknown content type ${t} returned from the server.`,t,e)}}}class Qr extends gr{constructor(t,e,n){super(),this.ws=t,this.serializer=e,this.logger=n,this.handleMessage=({data:s})=>{const{event:i,payload:o}=this.serializer.deserialize("application/json",s);if(this.logger.info(`↓ WEBSOCKET ${i}`),this.logger.debug("	body",o),i==="delete")return void this.emit(i,o);let u=[];try{u.push(this.serializer.deserialize("application/json",o))}catch{u=[]}this.emit(i,...u)}}static connect(t,e,n,s){return new Promise((i,o)=>{const u=new Vc(t,s),a=new Qr(u,e,n);u.addEventListener("message",a.handleMessage),u.addEventListener("error",o),u.addEventListener("open",()=>i(a))})}disconnect(){this.ws&&this.ws.close()}}class lu{constructor(t,e,n){this.config=t,this.serializer=e,this.logger=n}stream(t,e={}){return Qr.connect(this.config.resolveWebsocketPath(t,e),this.serializer,this.logger,this.config.createWebsocketProtocols())}}const Ns=r=>{const t=r.version&&!r.disableVersionCheck?new bt.SemVer(r.version,!0):void 0,e=Object.assign(Object.assign({},r),{version:t}),n=new au,s=new Jc(e,n),i=new Hc(s.getLogLevel()),o=new tu(n,s,i);return{serializer:n,config:s,logger:i,http:o}},cu=r=>{const{http:t,config:e}=Ns(r);return new ae(t,e).fetch()},uu=r=>{const{serializer:t,config:e,logger:n,http:s}=Ns(r),i=new lu(e,t,n);return n.debug("Masto.js initialised",e),new ou(s,i,e,n)},pu=r=>dt(void 0,void 0,void 0,function*(){const t=yield cu(r);return uu(Object.assign(Object.assign({},r),{version:t.version,streamingApiUrl:t.urls.streamingApi}))}),hu=r=>({shortcode:r.shortcode,url:r.url,static_url:r.staticUrl,visible_in_picker:r.visibleInPicker}),fu=r=>({name:r.name,count:r.count,me:r.me,url:r.url,static_url:r.staticUrl}),yu=r=>({id:r.id,content:r.content,starts_at:new Date(r.startsAt),ends_at:new Date(r.endsAt),all_day:r.allDay,published_at:new Date(r.publishedAt),updated_at:new Date(r.updatedAt),read:!0,mentions:r.mentions,statuses:r.statuses,tags:r.tags,emojis:r.emojis.map(hu),reactions:r.reactions.map(fu)});var du=Object.defineProperty,vu=Object.getOwnPropertyDescriptor,mu=(r,t,e,n)=>{for(var s=n>1?void 0:n?vu(t,e):t,i=r.length-1,o;i>=0;i--)(o=r[i])&&(s=(n?o(t,e,s):o(s))||s);return n&&s&&du(t,e,s),s};let Er=class{constructor(){D(this,"getMastodonUrl",()=>this.get("VITE_MASTODON_API_URL"));D(this,"getMastodonTimeout",()=>this.get("VITE_MASTODON_TIMEOUT_MS"));D(this,"getAssistantNMSUrl",()=>this.get("VITE_ANMS_API_URL"));D(this,"getAssistantAppsUrl",()=>this.get("VITE_AA_API_URL"));D(this,"getEncryptionKey",()=>this.get("VITE_ENCRYPTION_KEY"));D(this,"getApiPort",()=>this.get("VITE_API_PORT"));D(this,"getXataApiKey",()=>this.get("XATA_API_KEY"));D(this,"getXataDbUrl",()=>this.get("XATA_DB_URL"));D(this,"getXataFallbackBranch",()=>this.get("XATA_FALLBACK_BRANCH"));D(this,"isProd",()=>this.get("NODE_ENV")==="production");D(this,"buildVersion",()=>this.get("BUILD_VERSION"))}get(r){var t,e;return(e=(t=process==null?void 0:process.env)==null?void 0:t[r])!=null?e:""}};Er=mu([jn()],Er);const gu=()=>Gn.get(Er);var $u=Object.defineProperty,Eu=Object.getOwnPropertyDescriptor,wu=(r,t,e,n)=>{for(var s=n>1?void 0:n?Eu(t,e):t,i=r.length-1,o;i>=0;i--)(o=r[i])&&(s=(n?o(t,e,s):o(s))||s);return n&&s&&$u(t,e,s),s};let wr=class{constructor(){D(this,"_config");D(this,"getStream",r=>r.client.v1.stream.streamUser());D(this,"sendBasicToot",(r,t,e=null)=>{const n={status:t};return e!=null&&(n.inReplyToId=e),this.sendToot(r,n)});D(this,"sendToot",async(r,t)=>{try{await r.client.v1.statuses.create({...t,mediaIds:void 0})}catch(e){It().e(r.name,"sendToot",e)}});D(this,"uploadTootMedia",async(r,t)=>(await r.client.v2.mediaAttachments.create({file:new Blob([t])})).id);D(this,"sendTootWithMedia",async(r,t,e)=>{try{const n=await this.uploadTootMedia(r,t);await r.client.v1.statuses.create({...e,mediaIds:[n],poll:void 0})}catch(n){It().e(r.name,"sendTootWithMedia",n)}});D(this,"preferences",r=>r.client.v1.preferences.fetch());D(this,"getConversations",async r=>{try{return{isSuccess:!0,value:await r.client.v1.conversations.list(),errorMessage:""}}catch(t){return It().e(r.name,"getConversations",t),{isSuccess:!1,value:[],errorMessage:t.toString()}}});D(this,"getAnnouncements",async(r,t=!1)=>{try{return{isSuccess:!0,value:(await r.client.v1.announcements.list()).map(yu),errorMessage:""}}catch(e){return It().e(r.name,"getAnnouncements",e),{isSuccess:!1,value:[],errorMessage:e.toString()}}});D(this,"getDomainBlocks",(r,t,e=25)=>r.client.v1.admin.domainBlocks.list({limit:e}));D(this,"unblockDomain",async(r,t)=>{try{return await r.client.v1.admin.domainBlocks.remove(t),{isSuccess:!0,errorMessage:""}}catch(e){return It().e(r.name,"unblockDomain",e),{isSuccess:!1,errorMessage:e.toString()}}});const r=gu();this._config=r}createClient(r){return It().i("createClient",r.name,r.type),pu({url:this._config.getMastodonUrl(),accessToken:r.accessToken,timeout:this._config.getMastodonTimeout()})}};wr=wu([jn()],wr);const _s=()=>Gn.get(wr),Du=async r=>{const t=_s();if(r==null||r.accounts==null||r.accounts.length<1)return[t,null];const e=r.accounts[0];return Su(e)},Su=async r=>{const t=_s();if(r==null)return[t,null];const e=await t.createClient(r),n={name:r.name,type:r.type,dialog:r.dialog,client:e,stream:Ds};return[t,n]};export{Du as a,Su as g};
