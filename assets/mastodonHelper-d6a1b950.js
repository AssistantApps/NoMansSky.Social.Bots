var xs=Object.defineProperty;var Ls=(r,t,e)=>t in r?xs(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var W=(r,t,e)=>(Ls(r,typeof t!="symbol"?t+"":t,e),e);import{af as Cs,q as Ds,ag as Fs,k as It,r as ks,s as Ms,ah as js}from"./index-39e77ea8.js";const Us=globalThis.FormData,Bs=globalThis.Headers,Gs=globalThis.Request,Ws=globalThis.Response,qs=globalThis.fetch,Vs=globalThis.AbortController;var Gn=Us,be=Bs,Hs=Gs,zs=Ws,Xs=qs,Wn=Vs,lt={},Ks={get exports(){return lt},set exports(r){lt=r}};const Qs="2.0.0",Ys=256,Js=Number.MAX_SAFE_INTEGER||9007199254740991,Zs=16;var Ne={SEMVER_SPEC_VERSION:Qs,MAX_LENGTH:Ys,MAX_SAFE_INTEGER:Js,MAX_SAFE_COMPONENT_LENGTH:Zs};const ti=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var _e=ti;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e}=Ne,n=_e;t=r.exports={};const s=t.re=[],i=t.src=[],o=t.t={};let l=0;const a=(h,p,f)=>{const y=l++;n(h,y,p),o[h]=y,i[y]=p,s[y]=new RegExp(p,f?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","[0-9]+"),a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),a("MAINVERSION",`(${i[o.NUMERICIDENTIFIER]})\\.(${i[o.NUMERICIDENTIFIER]})\\.(${i[o.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${i[o.NUMERICIDENTIFIERLOOSE]})\\.(${i[o.NUMERICIDENTIFIERLOOSE]})\\.(${i[o.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${i[o.NUMERICIDENTIFIER]}|${i[o.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${i[o.NUMERICIDENTIFIERLOOSE]}|${i[o.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${i[o.PRERELEASEIDENTIFIER]}(?:\\.${i[o.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${i[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[o.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER","[0-9A-Za-z-]+"),a("BUILD",`(?:\\+(${i[o.BUILDIDENTIFIER]}(?:\\.${i[o.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${i[o.MAINVERSION]}${i[o.PRERELEASE]}?${i[o.BUILD]}?`),a("FULL",`^${i[o.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${i[o.MAINVERSIONLOOSE]}${i[o.PRERELEASELOOSE]}?${i[o.BUILD]}?`),a("LOOSE",`^${i[o.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${i[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${i[o.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${i[o.XRANGEIDENTIFIER]})(?:\\.(${i[o.XRANGEIDENTIFIER]})(?:\\.(${i[o.XRANGEIDENTIFIER]})(?:${i[o.PRERELEASE]})?${i[o.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${i[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[o.XRANGEIDENTIFIERLOOSE]})(?:${i[o.PRERELEASELOOSE]})?${i[o.BUILD]}?)?)?`),a("XRANGE",`^${i[o.GTLT]}\\s*${i[o.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${i[o.GTLT]}\\s*${i[o.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?(?:$|[^\\d])`),a("COERCERTL",i[o.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${i[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",a("TILDE",`^${i[o.LONETILDE]}${i[o.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${i[o.LONETILDE]}${i[o.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${i[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",a("CARET",`^${i[o.LONECARET]}${i[o.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${i[o.LONECARET]}${i[o.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${i[o.GTLT]}\\s*(${i[o.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${i[o.GTLT]}\\s*(${i[o.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${i[o.GTLT]}\\s*(${i[o.LOOSEPLAIN]}|${i[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${i[o.XRANGEPLAIN]})\\s+-\\s+(${i[o.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${i[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[o.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ks,lt);const ei=["includePrerelease","loose","rtl"],ri=r=>r?typeof r!="object"?{loose:!0}:ei.filter(t=>r[t]).reduce((t,e)=>(t[e]=!0,t),{}):{};var xe=ri;const Jr=/^[0-9]+$/,qn=(r,t)=>{const e=Jr.test(r),n=Jr.test(t);return e&&n&&(r=+r,t=+t),r===t?0:e&&!n?-1:n&&!e?1:r<t?-1:1},ni=(r,t)=>qn(t,r);var Vn={compareIdentifiers:qn,rcompareIdentifiers:ni};const de=_e,{MAX_LENGTH:Zr,MAX_SAFE_INTEGER:ye}=Ne,{re:tn,t:en}=lt,si=xe,{compareIdentifiers:Pt}=Vn;let ii=class tt{constructor(t,e){if(e=si(e),t instanceof tt){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Zr)throw new TypeError(`version is longer than ${Zr} characters`);de("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?tn[en.LOOSE]:tn[en.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ye||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ye||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ye||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<ye)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(de("SemVer.compare",this.version,this.options,t),!(t instanceof tt)){if(typeof t=="string"&&t===this.version)return 0;t=new tt(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof tt||(t=new tt(t,this.options)),Pt(this.major,t.major)||Pt(this.minor,t.minor)||Pt(this.patch,t.patch)}comparePre(t){if(t instanceof tt||(t=new tt(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],s=t.prerelease[e];if(de("prerelease compare",e,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Pt(n,s)}while(++e)}compareBuild(t){t instanceof tt||(t=new tt(t,this.options));let e=0;do{const n=this.build[e],s=t.build[e];if(de("prerelease compare",e,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Pt(n,s)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}e&&(Pt(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var G=ii;const{MAX_LENGTH:oi}=Ne,{re:rn,t:nn}=lt,sn=G,ai=xe,li=(r,t)=>{if(t=ai(t),r instanceof sn)return r;if(typeof r!="string"||r.length>oi||!(t.loose?rn[nn.LOOSE]:rn[nn.FULL]).test(r))return null;try{return new sn(r,t)}catch{return null}};var Bt=li;const ci=Bt,ui=(r,t)=>{const e=ci(r,t);return e?e.version:null};var pi=ui;const hi=Bt,fi=(r,t)=>{const e=hi(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var di=fi;const on=G,yi=(r,t,e,n)=>{typeof e=="string"&&(n=e,e=void 0);try{return new on(r instanceof on?r.version:r,e).inc(t,n).version}catch{return null}};var vi=yi;const an=G,mi=(r,t,e)=>new an(r,e).compare(new an(t,e));var K=mi;const gi=K,wi=(r,t,e)=>gi(r,t,e)===0;var Er=wi;const ln=Bt,$i=Er,Ei=(r,t)=>{if($i(r,t))return null;{const e=ln(r),n=ln(t),s=e.prerelease.length||n.prerelease.length,i=s?"pre":"",o=s?"prerelease":"";for(const l in e)if((l==="major"||l==="minor"||l==="patch")&&e[l]!==n[l])return i+l;return o}};var Si=Ei;const bi=G,Ri=(r,t)=>new bi(r,t).major;var Ai=Ri;const Oi=G,Ti=(r,t)=>new Oi(r,t).minor;var Ii=Ti;const Pi=G,Ni=(r,t)=>new Pi(r,t).patch;var _i=Ni;const xi=Bt,Li=(r,t)=>{const e=xi(r,t);return e&&e.prerelease.length?e.prerelease:null};var Ci=Li;const Di=K,Fi=(r,t,e)=>Di(t,r,e);var ki=Fi;const Mi=K,ji=(r,t)=>Mi(r,t,!0);var Ui=ji;const cn=G,Bi=(r,t,e)=>{const n=new cn(r,e),s=new cn(t,e);return n.compare(s)||n.compareBuild(s)};var Sr=Bi;const Gi=Sr,Wi=(r,t)=>r.sort((e,n)=>Gi(e,n,t));var qi=Wi;const Vi=Sr,Hi=(r,t)=>r.sort((e,n)=>Vi(n,e,t));var zi=Hi;const Xi=K,Ki=(r,t,e)=>Xi(r,t,e)>0;var Le=Ki;const Qi=K,Yi=(r,t,e)=>Qi(r,t,e)<0;var br=Yi;const Ji=K,Zi=(r,t,e)=>Ji(r,t,e)!==0;var Hn=Zi;const to=K,eo=(r,t,e)=>to(r,t,e)>=0;var Rr=eo;const ro=K,no=(r,t,e)=>ro(r,t,e)<=0;var Ar=no;const so=Er,io=Hn,oo=Le,ao=Rr,lo=br,co=Ar,uo=(r,t,e,n)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return so(r,e,n);case"!=":return io(r,e,n);case">":return oo(r,e,n);case">=":return ao(r,e,n);case"<":return lo(r,e,n);case"<=":return co(r,e,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var zn=uo;const po=G,ho=Bt,{re:ve,t:me}=lt,fo=(r,t)=>{if(r instanceof po)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(ve[me.COERCE]);else{let n;for(;(n=ve[me.COERCERTL].exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||n.index+n[0].length!==e.index+e[0].length)&&(e=n),ve[me.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ve[me.COERCERTL].lastIndex=-1}return e===null?null:ho(`${e[2]}.${e[3]||"0"}.${e[4]||"0"}`,t)};var yo=fo,Ve,un;function vo(){return un||(un=1,Ve=function(r){r.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ve}var mo=P;P.Node=Ot;P.create=P;function P(r){var t=this;if(t instanceof P||(t=new P),t.tail=null,t.head=null,t.length=0,r&&typeof r.forEach=="function")r.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t}P.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var t=r.next,e=r.prev;return t&&(t.prev=e),e&&(e.next=t),r===this.head&&(this.head=t),r===this.tail&&(this.tail=e),r.list.length--,r.next=null,r.prev=null,r.list=null,t};P.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var t=this.head;r.list=this,r.next=t,t&&(t.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};P.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var t=this.tail;r.list=this,r.prev=t,t&&(t.next=r),this.tail=r,this.head||(this.head=r),this.length++}};P.prototype.push=function(){for(var r=0,t=arguments.length;r<t;r++)wo(this,arguments[r]);return this.length};P.prototype.unshift=function(){for(var r=0,t=arguments.length;r<t;r++)$o(this,arguments[r]);return this.length};P.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};P.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};P.prototype.forEach=function(r,t){t=t||this;for(var e=this.head,n=0;e!==null;n++)r.call(t,e.value,n,this),e=e.next};P.prototype.forEachReverse=function(r,t){t=t||this;for(var e=this.tail,n=this.length-1;e!==null;n--)r.call(t,e.value,n,this),e=e.prev};P.prototype.get=function(r){for(var t=0,e=this.head;e!==null&&t<r;t++)e=e.next;if(t===r&&e!==null)return e.value};P.prototype.getReverse=function(r){for(var t=0,e=this.tail;e!==null&&t<r;t++)e=e.prev;if(t===r&&e!==null)return e.value};P.prototype.map=function(r,t){t=t||this;for(var e=new P,n=this.head;n!==null;)e.push(r.call(t,n.value,this)),n=n.next;return e};P.prototype.mapReverse=function(r,t){t=t||this;for(var e=new P,n=this.tail;n!==null;)e.push(r.call(t,n.value,this)),n=n.prev;return e};P.prototype.reduce=function(r,t){var e,n=this.head;if(arguments.length>1)e=t;else if(this.head)n=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)e=r(e,n.value,s),n=n.next;return e};P.prototype.reduceReverse=function(r,t){var e,n=this.tail;if(arguments.length>1)e=t;else if(this.tail)n=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)e=r(e,n.value,s),n=n.prev;return e};P.prototype.toArray=function(){for(var r=new Array(this.length),t=0,e=this.head;e!==null;t++)r[t]=e.value,e=e.next;return r};P.prototype.toArrayReverse=function(){for(var r=new Array(this.length),t=0,e=this.tail;e!==null;t++)r[t]=e.value,e=e.prev;return r};P.prototype.slice=function(r,t){t=t||this.length,t<0&&(t+=this.length),r=r||0,r<0&&(r+=this.length);var e=new P;if(t<r||t<0)return e;r<0&&(r=0),t>this.length&&(t=this.length);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(;s!==null&&n<t;n++,s=s.next)e.push(s.value);return e};P.prototype.sliceReverse=function(r,t){t=t||this.length,t<0&&(t+=this.length),r=r||0,r<0&&(r+=this.length);var e=new P;if(t<r||t<0)return e;r<0&&(r=0),t>this.length&&(t=this.length);for(var n=this.length,s=this.tail;s!==null&&n>t;n--)s=s.prev;for(;s!==null&&n>r;n--,s=s.prev)e.push(s.value);return e};P.prototype.splice=function(r,t,...e){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(var i=[],n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<e.length;n++)s=go(this,s,e[n]);return i};P.prototype.reverse=function(){for(var r=this.head,t=this.tail,e=r;e!==null;e=e.prev){var n=e.prev;e.prev=e.next,e.next=n}return this.head=t,this.tail=r,this};function go(r,t,e){var n=t===r.head?new Ot(e,null,t,r):new Ot(e,t,t.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function wo(r,t){r.tail=new Ot(t,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function $o(r,t){r.head=new Ot(t,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Ot(r,t,e,n){if(!(this instanceof Ot))return new Ot(r,t,e,n);this.list=n,this.value=r,t?(t.next=this,this.prev=t):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{vo()(P)}catch{}const Eo=mo,$t=Symbol("max"),ot=Symbol("length"),Nt=Symbol("lengthCalculator"),Jt=Symbol("allowStale"),St=Symbol("maxAge"),it=Symbol("dispose"),pn=Symbol("noDisposeOnSet"),M=Symbol("lruList"),X=Symbol("cache"),Xn=Symbol("updateAgeOnGet"),He=()=>1;class So{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[$t]=t.max||1/0;const e=t.length||He;if(this[Nt]=typeof e!="function"?He:e,this[Jt]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[St]=t.maxAge||0,this[it]=t.dispose,this[pn]=t.noDisposeOnSet||!1,this[Xn]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[$t]=t||1/0,Kt(this)}get max(){return this[$t]}set allowStale(t){this[Jt]=!!t}get allowStale(){return this[Jt]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[St]=t,Kt(this)}get maxAge(){return this[St]}set lengthCalculator(t){typeof t!="function"&&(t=He),t!==this[Nt]&&(this[Nt]=t,this[ot]=0,this[M].forEach(e=>{e.length=this[Nt](e.value,e.key),this[ot]+=e.length})),Kt(this)}get lengthCalculator(){return this[Nt]}get length(){return this[ot]}get itemCount(){return this[M].length}rforEach(t,e){e=e||this;for(let n=this[M].tail;n!==null;){const s=n.prev;hn(this,t,n,e),n=s}}forEach(t,e){e=e||this;for(let n=this[M].head;n!==null;){const s=n.next;hn(this,t,n,e),n=s}}keys(){return this[M].toArray().map(t=>t.key)}values(){return this[M].toArray().map(t=>t.value)}reset(){this[it]&&this[M]&&this[M].length&&this[M].forEach(t=>this[it](t.key,t.value)),this[X]=new Map,this[M]=new Eo,this[ot]=0}dump(){return this[M].map(t=>Re(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[M]}set(t,e,n){if(n=n||this[St],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const s=n?Date.now():0,i=this[Nt](e,t);if(this[X].has(t)){if(i>this[$t])return Dt(this,this[X].get(t)),!1;const a=this[X].get(t).value;return this[it]&&(this[pn]||this[it](t,a.value)),a.now=s,a.maxAge=n,a.value=e,this[ot]+=i-a.length,a.length=i,this.get(t),Kt(this),!0}const o=new bo(t,e,i,s,n);return o.length>this[$t]?(this[it]&&this[it](t,e),!1):(this[ot]+=o.length,this[M].unshift(o),this[X].set(t,this[M].head),Kt(this),!0)}has(t){if(!this[X].has(t))return!1;const e=this[X].get(t).value;return!Re(this,e)}get(t){return ze(this,t,!0)}peek(t){return ze(this,t,!1)}pop(){const t=this[M].tail;return t?(Dt(this,t),t.value):null}del(t){Dt(this,this[X].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const s=t[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{const o=i-e;o>0&&this.set(s.k,s.v,o)}}}prune(){this[X].forEach((t,e)=>ze(this,e,!1))}}const ze=(r,t,e)=>{const n=r[X].get(t);if(n){const s=n.value;if(Re(r,s)){if(Dt(r,n),!r[Jt])return}else e&&(r[Xn]&&(n.value.now=Date.now()),r[M].unshiftNode(n));return s.value}},Re=(r,t)=>{if(!t||!t.maxAge&&!r[St])return!1;const e=Date.now()-t.now;return t.maxAge?e>t.maxAge:r[St]&&e>r[St]},Kt=r=>{if(r[ot]>r[$t])for(let t=r[M].tail;r[ot]>r[$t]&&t!==null;){const e=t.prev;Dt(r,t),t=e}},Dt=(r,t)=>{if(t){const e=t.value;r[it]&&r[it](e.key,e.value),r[ot]-=e.length,r[X].delete(e.key),r[M].removeNode(t)}};class bo{constructor(t,e,n,s,i){this.key=t,this.value=e,this.length=n,this.now=s,this.maxAge=i||0}}const hn=(r,t,e,n)=>{let s=e.value;Re(r,s)&&(Dt(r,e),r[Jt]||(s=void 0)),s&&t.call(n,s.value,s.key,r)};var Ro=So,Xe,fn;function Q(){if(fn)return Xe;fn=1;class r{constructor(v,R){if(R=n(R),v instanceof r)return v.loose===!!R.loose&&v.includePrerelease===!!R.includePrerelease?v:new r(v.raw,R);if(v instanceof s)return this.raw=v.value,this.set=[[v]],this.format(),this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=v,this.set=v.split("||").map(S=>this.parseRange(S.trim())).filter(S=>S.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${v}`);if(this.set.length>1){const S=this.set[0];if(this.set=this.set.filter(b=>!y(b[0])),this.set.length===0)this.set=[S];else if(this.set.length>1){for(const b of this.set)if(b.length===1&&d(b[0])){this.set=[b];break}}}this.format()}format(){return this.range=this.set.map(v=>v.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(v){v=v.trim();const S=`parseRange:${Object.keys(this.options).join(",")}:${v}`,b=e.get(S);if(b)return b;const w=this.options.loose,O=w?l[a.HYPHENRANGELOOSE]:l[a.HYPHENRANGE];v=v.replace(O,J(this.options.includePrerelease)),i("hyphen replace",v),v=v.replace(l[a.COMPARATORTRIM],h),i("comparator trim",v),v=v.replace(l[a.TILDETRIM],p),v=v.replace(l[a.CARETTRIM],f),v=v.split(/\s+/).join(" ");let _=v.split(" ").map(F=>x(F,this.options)).join(" ").split(/\s+/).map(F=>wt(F,this.options));w&&(_=_.filter(F=>(i("loose invalid filter",F,this.options),!!F.match(l[a.COMPARATORLOOSE])))),i("range list",_);const T=new Map,C=_.map(F=>new s(F,this.options));for(const F of C){if(y(F))return[F];T.set(F.value,F)}T.size>1&&T.has("")&&T.delete("");const z=[...T.values()];return e.set(S,z),z}intersects(v,R){if(!(v instanceof r))throw new TypeError("a Range is required");return this.set.some(S=>E(S,R)&&v.set.some(b=>E(b,R)&&S.every(w=>b.every(O=>w.intersects(O,R)))))}test(v){if(!v)return!1;if(typeof v=="string")try{v=new o(v,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(ht(this.set[R],v,this.options))return!0;return!1}}Xe=r;const t=Ro,e=new t({max:1e3}),n=xe,s=Ce(),i=_e,o=G,{re:l,t:a,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=lt,y=m=>m.value==="<0.0.0-0",d=m=>m.value==="",E=(m,v)=>{let R=!0;const S=m.slice();let b=S.pop();for(;R&&S.length;)R=S.every(w=>b.intersects(w,v)),b=S.pop();return R},x=(m,v)=>(i("comp",m,v),m=N(m,v),i("caret",m),m=A(m,v),i("tildes",m),m=H(m,v),i("xrange",m),m=st(m,v),i("stars",m),m),g=m=>!m||m.toLowerCase()==="x"||m==="*",A=(m,v)=>m.trim().split(/\s+/).map(R=>k(R,v)).join(" "),k=(m,v)=>{const R=v.loose?l[a.TILDELOOSE]:l[a.TILDE];return m.replace(R,(S,b,w,O,_)=>{i("tilde",m,S,b,w,O,_);let T;return g(b)?T="":g(w)?T=`>=${b}.0.0 <${+b+1}.0.0-0`:g(O)?T=`>=${b}.${w}.0 <${b}.${+w+1}.0-0`:_?(i("replaceTilde pr",_),T=`>=${b}.${w}.${O}-${_} <${b}.${+w+1}.0-0`):T=`>=${b}.${w}.${O} <${b}.${+w+1}.0-0`,i("tilde return",T),T})},N=(m,v)=>m.trim().split(/\s+/).map(R=>Y(R,v)).join(" "),Y=(m,v)=>{i("caret",m,v);const R=v.loose?l[a.CARETLOOSE]:l[a.CARET],S=v.includePrerelease?"-0":"";return m.replace(R,(b,w,O,_,T)=>{i("caret",m,b,w,O,_,T);let C;return g(w)?C="":g(O)?C=`>=${w}.0.0${S} <${+w+1}.0.0-0`:g(_)?w==="0"?C=`>=${w}.${O}.0${S} <${w}.${+O+1}.0-0`:C=`>=${w}.${O}.0${S} <${+w+1}.0.0-0`:T?(i("replaceCaret pr",T),w==="0"?O==="0"?C=`>=${w}.${O}.${_}-${T} <${w}.${O}.${+_+1}-0`:C=`>=${w}.${O}.${_}-${T} <${w}.${+O+1}.0-0`:C=`>=${w}.${O}.${_}-${T} <${+w+1}.0.0-0`):(i("no pr"),w==="0"?O==="0"?C=`>=${w}.${O}.${_}${S} <${w}.${O}.${+_+1}-0`:C=`>=${w}.${O}.${_}${S} <${w}.${+O+1}.0-0`:C=`>=${w}.${O}.${_} <${+w+1}.0.0-0`),i("caret return",C),C})},H=(m,v)=>(i("replaceXRanges",m,v),m.split(/\s+/).map(R=>gt(R,v)).join(" ")),gt=(m,v)=>{m=m.trim();const R=v.loose?l[a.XRANGELOOSE]:l[a.XRANGE];return m.replace(R,(S,b,w,O,_,T)=>{i("xRange",m,S,b,w,O,_,T);const C=g(w),z=C||g(O),F=z||g(_),Xt=F;return b==="="&&Xt&&(b=""),T=v.includePrerelease?"-0":"",C?b===">"||b==="<"?S="<0.0.0-0":S="*":b&&Xt?(z&&(O=0),_=0,b===">"?(b=">=",z?(w=+w+1,O=0,_=0):(O=+O+1,_=0)):b==="<="&&(b="<",z?w=+w+1:O=+O+1),b==="<"&&(T="-0"),S=`${b+w}.${O}.${_}${T}`):z?S=`>=${w}.0.0${T} <${+w+1}.0.0-0`:F&&(S=`>=${w}.${O}.0${T} <${w}.${+O+1}.0-0`),i("xRange return",S),S})},st=(m,v)=>(i("replaceStars",m,v),m.trim().replace(l[a.STAR],"")),wt=(m,v)=>(i("replaceGTE0",m,v),m.trim().replace(l[v.includePrerelease?a.GTE0PRE:a.GTE0],"")),J=m=>(v,R,S,b,w,O,_,T,C,z,F,Xt,Ou)=>(g(S)?R="":g(b)?R=`>=${S}.0.0${m?"-0":""}`:g(w)?R=`>=${S}.${b}.0${m?"-0":""}`:O?R=`>=${R}`:R=`>=${R}${m?"-0":""}`,g(C)?T="":g(z)?T=`<${+C+1}.0.0-0`:g(F)?T=`<${C}.${+z+1}.0-0`:Xt?T=`<=${C}.${z}.${F}-${Xt}`:m?T=`<${C}.${z}.${+F+1}-0`:T=`<=${T}`,`${R} ${T}`.trim()),ht=(m,v,R)=>{for(let S=0;S<m.length;S++)if(!m[S].test(v))return!1;if(v.prerelease.length&&!R.includePrerelease){for(let S=0;S<m.length;S++)if(i(m[S].semver),m[S].semver!==s.ANY&&m[S].semver.prerelease.length>0){const b=m[S].semver;if(b.major===v.major&&b.minor===v.minor&&b.patch===v.patch)return!0}return!1}return!0};return Xe}var Ke,dn;function Ce(){if(dn)return Ke;dn=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(p,f){if(f=e(f),p instanceof t){if(p.loose===!!f.loose)return p;p=p.value}o("comparator",p,f),this.options=f,this.loose=!!f.loose,this.parse(p),this.semver===r?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(p){const f=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],y=p.match(f);if(!y)throw new TypeError(`Invalid comparator: ${p}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new l(y[2],this.options.loose):this.semver=r}toString(){return this.value}test(p){if(o("Comparator.test",p,this.options.loose),this.semver===r||p===r)return!0;if(typeof p=="string")try{p=new l(p,this.options)}catch{return!1}return i(p,this.operator,this.semver,this.options)}intersects(p,f){if(!(p instanceof t))throw new TypeError("a Comparator is required");if((!f||typeof f!="object")&&(f={loose:!!f,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new a(p.value,f).test(this.value);if(p.operator==="")return p.value===""?!0:new a(this.value,f).test(p.semver);const y=(this.operator===">="||this.operator===">")&&(p.operator===">="||p.operator===">"),d=(this.operator==="<="||this.operator==="<")&&(p.operator==="<="||p.operator==="<"),E=this.semver.version===p.semver.version,x=(this.operator===">="||this.operator==="<=")&&(p.operator===">="||p.operator==="<="),g=i(this.semver,"<",p.semver,f)&&(this.operator===">="||this.operator===">")&&(p.operator==="<="||p.operator==="<"),A=i(this.semver,">",p.semver,f)&&(this.operator==="<="||this.operator==="<")&&(p.operator===">="||p.operator===">");return y||d||E&&x||g||A}}Ke=t;const e=xe,{re:n,t:s}=lt,i=zn,o=_e,l=G,a=Q();return Ke}const Ao=Q(),Oo=(r,t,e)=>{try{t=new Ao(t,e)}catch{return!1}return t.test(r)};var De=Oo;const To=Q(),Io=(r,t)=>new To(r,t).set.map(e=>e.map(n=>n.value).join(" ").trim().split(" "));var Po=Io;const No=G,_o=Q(),xo=(r,t,e)=>{let n=null,s=null,i=null;try{i=new _o(t,e)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new No(n,e))}),n};var Lo=xo;const Co=G,Do=Q(),Fo=(r,t,e)=>{let n=null,s=null,i=null;try{i=new Do(t,e)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new Co(n,e))}),n};var ko=Fo;const Qe=G,Mo=Q(),yn=Le,jo=(r,t)=>{r=new Mo(r,t);let e=new Qe("0.0.0");if(r.test(e)||(e=new Qe("0.0.0-0"),r.test(e)))return e;e=null;for(let n=0;n<r.set.length;++n){const s=r.set[n];let i=null;s.forEach(o=>{const l=new Qe(o.semver.version);switch(o.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!i||yn(l,i))&&(i=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!e||yn(e,i))&&(e=i)}return e&&r.test(e)?e:null};var Uo=jo;const Bo=Q(),Go=(r,t)=>{try{return new Bo(r,t).range||"*"}catch{return null}};var Wo=Go;const qo=G,Kn=Ce(),{ANY:Vo}=Kn,Ho=Q(),zo=De,vn=Le,mn=br,Xo=Ar,Ko=Rr,Qo=(r,t,e,n)=>{r=new qo(r,n),t=new Ho(t,n);let s,i,o,l,a;switch(e){case">":s=vn,i=Xo,o=mn,l=">",a=">=";break;case"<":s=mn,i=Ko,o=vn,l="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zo(r,t,n))return!1;for(let h=0;h<t.set.length;++h){const p=t.set[h];let f=null,y=null;if(p.forEach(d=>{d.semver===Vo&&(d=new Kn(">=0.0.0")),f=f||d,y=y||d,s(d.semver,f.semver,n)?f=d:o(d.semver,y.semver,n)&&(y=d)}),f.operator===l||f.operator===a||(!y.operator||y.operator===l)&&i(r,y.semver))return!1;if(y.operator===a&&o(r,y.semver))return!1}return!0};var Or=Qo;const Yo=Or,Jo=(r,t,e)=>Yo(r,t,">",e);var Zo=Jo;const ta=Or,ea=(r,t,e)=>ta(r,t,"<",e);var ra=ea;const gn=Q(),na=(r,t,e)=>(r=new gn(r,e),t=new gn(t,e),r.intersects(t));var sa=na;const ia=De,oa=K;var aa=(r,t,e)=>{const n=[];let s=null,i=null;const o=r.sort((p,f)=>oa(p,f,e));for(const p of o)ia(p,t,e)?(i=p,s||(s=p)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const l=[];for(const[p,f]of n)p===f?l.push(p):!f&&p===o[0]?l.push("*"):f?p===o[0]?l.push(`<=${f}`):l.push(`${p} - ${f}`):l.push(`>=${p}`);const a=l.join(" || "),h=typeof t.raw=="string"?t.raw:String(t);return a.length<h.length?a:t};const wn=Q(),Se=Ce(),{ANY:Ye}=Se,Qt=De,Tr=K,la=(r,t,e={})=>{if(r===t)return!0;r=new wn(r,e),t=new wn(t,e);let n=!1;t:for(const s of r.set){for(const i of t.set){const o=ca(s,i,e);if(n=n||o!==null,o)continue t}if(n)return!1}return!0},ca=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===Ye){if(t.length===1&&t[0].semver===Ye)return!0;e.includePrerelease?r=[new Se(">=0.0.0-0")]:r=[new Se(">=0.0.0")]}if(t.length===1&&t[0].semver===Ye){if(e.includePrerelease)return!0;t=[new Se(">=0.0.0")]}const n=new Set;let s,i;for(const d of r)d.operator===">"||d.operator===">="?s=$n(s,d,e):d.operator==="<"||d.operator==="<="?i=En(i,d,e):n.add(d.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Tr(s.semver,i.semver,e),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const d of n){if(s&&!Qt(d,String(s),e)||i&&!Qt(d,String(i),e))return null;for(const E of t)if(!Qt(d,String(E),e))return!1;return!0}let l,a,h,p,f=i&&!e.includePrerelease&&i.semver.prerelease.length?i.semver:!1,y=s&&!e.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const d of t){if(p=p||d.operator===">"||d.operator===">=",h=h||d.operator==="<"||d.operator==="<=",s){if(y&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===y.major&&d.semver.minor===y.minor&&d.semver.patch===y.patch&&(y=!1),d.operator===">"||d.operator===">="){if(l=$n(s,d,e),l===d&&l!==s)return!1}else if(s.operator===">="&&!Qt(s.semver,String(d),e))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(a=En(i,d,e),a===d&&a!==i)return!1}else if(i.operator==="<="&&!Qt(i.semver,String(d),e))return!1}if(!d.operator&&(i||s)&&o!==0)return!1}return!(s&&h&&!i&&o!==0||i&&p&&!s&&o!==0||y||f)},$n=(r,t,e)=>{if(!r)return t;const n=Tr(r.semver,t.semver,e);return n>0?r:n<0||t.operator===">"&&r.operator===">="?t:r},En=(r,t,e)=>{if(!r)return t;const n=Tr(r.semver,t.semver,e);return n<0?r:n>0||t.operator==="<"&&r.operator==="<="?t:r};var ua=la;const Je=lt,pa=Ne,ha=G,Sn=Vn,fa=Bt,da=pi,ya=di,va=vi,ma=Si,ga=Ai,wa=Ii,$a=_i,Ea=Ci,Sa=K,ba=ki,Ra=Ui,Aa=Sr,Oa=qi,Ta=zi,Ia=Le,Pa=br,Na=Er,_a=Hn,xa=Rr,La=Ar,Ca=zn,Da=yo,Fa=Ce(),ka=Q(),Ma=De,ja=Po,Ua=Lo,Ba=ko,Ga=Uo,Wa=Wo,qa=Or,Va=Zo,Ha=ra,za=sa,Xa=aa,Ka=ua;var bt={parse:fa,valid:da,clean:ya,inc:va,diff:ma,major:ga,minor:wa,patch:$a,prerelease:Ea,compare:Sa,rcompare:ba,compareLoose:Ra,compareBuild:Aa,sort:Oa,rsort:Ta,gt:Ia,lt:Pa,eq:Na,neq:_a,gte:xa,lte:La,cmp:Ca,coerce:Da,Comparator:Fa,Range:ka,satisfies:Ma,toComparators:ja,maxSatisfying:Ua,minSatisfying:Ba,minVersion:Ga,validRange:Wa,outside:qa,gtr:Va,ltr:Ha,intersects:za,simplifyRange:Xa,subset:Ka,SemVer:ha,re:Je.re,src:Je.src,tokens:Je.t,SEMVER_SPEC_VERSION:pa.SEMVER_SPEC_VERSION,compareIdentifiers:Sn.compareIdentifiers,rcompareIdentifiers:Sn.rcompareIdentifiers},Qa=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==s||o.enumerable!==!0)return!1}return!0},bn=typeof Symbol<"u"&&Symbol,Ya=Qa,Ja=function(){return typeof bn!="function"||typeof Symbol!="function"||typeof bn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ya()},Za="Function.prototype.bind called on incompatible ",Ze=Array.prototype.slice,tl=Object.prototype.toString,el="[object Function]",rl=function(t){var e=this;if(typeof e!="function"||tl.call(e)!==el)throw new TypeError(Za+e);for(var n=Ze.call(arguments,1),s,i=function(){if(this instanceof s){var p=e.apply(this,n.concat(Ze.call(arguments)));return Object(p)===p?p:this}else return e.apply(t,n.concat(Ze.call(arguments)))},o=Math.max(0,e.length-n.length),l=[],a=0;a<o;a++)l.push("$"+a);if(s=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var h=function(){};h.prototype=e.prototype,s.prototype=new h,h.prototype=null}return s},nl=rl,Ir=Function.prototype.bind||nl,sl=Ir,il=sl.call(Function.call,Object.prototype.hasOwnProperty),I,kt=SyntaxError,Qn=Function,Ft=TypeError,tr=function(r){try{return Qn('"use strict"; return ('+r+").constructor;")()}catch{}},Rt=Object.getOwnPropertyDescriptor;if(Rt)try{Rt({},"")}catch{Rt=null}var er=function(){throw new Ft},ol=Rt?function(){try{return arguments.callee,er}catch{try{return Rt(arguments,"callee").get}catch{return er}}}():er,_t=Ja(),et=Object.getPrototypeOf||function(r){return r.__proto__},xt={},al=typeof Uint8Array>"u"?I:et(Uint8Array),At={"%AggregateError%":typeof AggregateError>"u"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?I:ArrayBuffer,"%ArrayIteratorPrototype%":_t?et([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":xt,"%AsyncGenerator%":xt,"%AsyncGeneratorFunction%":xt,"%AsyncIteratorPrototype%":xt,"%Atomics%":typeof Atomics>"u"?I:Atomics,"%BigInt%":typeof BigInt>"u"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?I:Float32Array,"%Float64Array%":typeof Float64Array>"u"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?I:FinalizationRegistry,"%Function%":Qn,"%GeneratorFunction%":xt,"%Int8Array%":typeof Int8Array>"u"?I:Int8Array,"%Int16Array%":typeof Int16Array>"u"?I:Int16Array,"%Int32Array%":typeof Int32Array>"u"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_t?et(et([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map>"u"?I:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_t?I:et(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?I:Promise,"%Proxy%":typeof Proxy>"u"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?I:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_t?I:et(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_t?et(""[Symbol.iterator]()):I,"%Symbol%":_t?Symbol:I,"%SyntaxError%":kt,"%ThrowTypeError%":ol,"%TypedArray%":al,"%TypeError%":Ft,"%Uint8Array%":typeof Uint8Array>"u"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?I:WeakMap,"%WeakRef%":typeof WeakRef>"u"?I:WeakRef,"%WeakSet%":typeof WeakSet>"u"?I:WeakSet};try{null.error}catch(r){var ll=et(et(r));At["%Error.prototype%"]=ll}var cl=function r(t){var e;if(t==="%AsyncFunction%")e=tr("async function () {}");else if(t==="%GeneratorFunction%")e=tr("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=tr("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&(e=et(s.prototype))}return At[t]=e,e},Rn={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ne=Ir,Ae=il,ul=ne.call(Function.call,Array.prototype.concat),pl=ne.call(Function.apply,Array.prototype.splice),An=ne.call(Function.call,String.prototype.replace),Oe=ne.call(Function.call,String.prototype.slice),hl=ne.call(Function.call,RegExp.prototype.exec),fl=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,dl=/\\(\\)?/g,yl=function(t){var e=Oe(t,0,1),n=Oe(t,-1);if(e==="%"&&n!=="%")throw new kt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new kt("invalid intrinsic syntax, expected opening `%`");var s=[];return An(t,fl,function(i,o,l,a){s[s.length]=l?An(a,dl,"$1"):o||i}),s},vl=function(t,e){var n=t,s;if(Ae(Rn,n)&&(s=Rn[n],n="%"+s[0]+"%"),Ae(At,n)){var i=At[n];if(i===xt&&(i=cl(n)),typeof i>"u"&&!e)throw new Ft("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new kt("intrinsic "+t+" does not exist!")},Pr=function(t,e){if(typeof t!="string"||t.length===0)throw new Ft("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Ft('"allowMissing" argument must be a boolean');if(hl(/^%?[^%]*%?$/,t)===null)throw new kt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=yl(t),s=n.length>0?n[0]:"",i=vl("%"+s+"%",e),o=i.name,l=i.value,a=!1,h=i.alias;h&&(s=h[0],pl(n,ul([0,1],h)));for(var p=1,f=!0;p<n.length;p+=1){var y=n[p],d=Oe(y,0,1),E=Oe(y,-1);if((d==='"'||d==="'"||d==="`"||E==='"'||E==="'"||E==="`")&&d!==E)throw new kt("property names with quotes must have matching quotes");if((y==="constructor"||!f)&&(a=!0),s+="."+y,o="%"+s+"%",Ae(At,o))l=At[o];else if(l!=null){if(!(y in l)){if(!e)throw new Ft("base intrinsic for "+t+" exists, but the property is not available.");return}if(Rt&&p+1>=n.length){var x=Rt(l,y);f=!!x,f&&"get"in x&&!("originalValue"in x.get)?l=x.get:l=l[y]}else f=Ae(l,y),l=l[y];f&&!a&&(At[o]=l)}}return l},cr={},ml={get exports(){return cr},set exports(r){cr=r}};(function(r){var t=Ir,e=Pr,n=e("%Function.prototype.apply%"),s=e("%Function.prototype.call%"),i=e("%Reflect.apply%",!0)||t.call(s,n),o=e("%Object.getOwnPropertyDescriptor%",!0),l=e("%Object.defineProperty%",!0),a=e("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}r.exports=function(f){var y=i(t,s,arguments);if(o&&l){var d=o(y,"length");d.configurable&&l(y,"length",{value:1+a(0,f.length-(arguments.length-1))})}return y};var h=function(){return i(t,n,arguments)};l?l(r.exports,"apply",{value:h}):r.exports.apply=h})(ml);var Yn=Pr,Jn=cr,gl=Jn(Yn("String.prototype.indexOf")),wl=function(t,e){var n=Yn(t,!!e);return typeof n=="function"&&gl(t,".prototype.")>-1?Jn(n):n},Nr=typeof Map=="function"&&Map.prototype,rr=Object.getOwnPropertyDescriptor&&Nr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Te=Nr&&rr&&typeof rr.get=="function"?rr.get:null,On=Nr&&Map.prototype.forEach,_r=typeof Set=="function"&&Set.prototype,nr=Object.getOwnPropertyDescriptor&&_r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ie=_r&&nr&&typeof nr.get=="function"?nr.get:null,Tn=_r&&Set.prototype.forEach,$l=typeof WeakMap=="function"&&WeakMap.prototype,Zt=$l?WeakMap.prototype.has:null,El=typeof WeakSet=="function"&&WeakSet.prototype,te=El?WeakSet.prototype.has:null,Sl=typeof WeakRef=="function"&&WeakRef.prototype,In=Sl?WeakRef.prototype.deref:null,bl=Boolean.prototype.valueOf,Rl=Object.prototype.toString,Al=Function.prototype.toString,Ol=String.prototype.match,xr=String.prototype.slice,dt=String.prototype.replace,Tl=String.prototype.toUpperCase,Pn=String.prototype.toLowerCase,Zn=RegExp.prototype.test,Nn=Array.prototype.concat,rt=Array.prototype.join,Il=Array.prototype.slice,_n=Math.floor,ur=typeof BigInt=="function"?BigInt.prototype.valueOf:null,sr=Object.getOwnPropertySymbols,pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",B=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Mt||"symbol")?Symbol.toStringTag:null,ts=Object.prototype.propertyIsEnumerable,xn=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Ln(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Zn.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-_n(-r):_n(r);if(n!==r){var s=String(n),i=xr.call(t,s.length+1);return dt.call(s,e,"$&_")+"."+dt.call(dt.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return dt.call(t,e,"$&_")}var hr=Cs,Cn=hr.custom,Dn=rs(Cn)?Cn:null,Pl=function r(t,e,n,s){var i=e||{};if(ft(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ft(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ft(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ft(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ft(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=i.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return ss(t,i);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var a=String(t);return l?Ln(t,a):a}if(typeof t=="bigint"){var h=String(t)+"n";return l?Ln(t,h):h}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof t=="object")return fr(t)?"[Array]":"[Object]";var f=zl(i,n);if(typeof s>"u")s=[];else if(ns(s,t)>=0)return"[Circular]";function y(R,S,b){if(S&&(s=Il.call(s),s.push(S)),b){var w={depth:i.depth};return ft(i,"quoteStyle")&&(w.quoteStyle=i.quoteStyle),r(R,w,n+1,s)}return r(R,i,n+1,s)}if(typeof t=="function"&&!Fn(t)){var d=Ml(t),E=ge(t,y);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(E.length>0?" { "+rt.call(E,", ")+" }":"")}if(rs(t)){var x=Mt?dt.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):pr.call(t);return typeof t=="object"&&!Mt?Yt(x):x}if(ql(t)){for(var g="<"+Pn.call(String(t.nodeName)),A=t.attributes||[],k=0;k<A.length;k++)g+=" "+A[k].name+"="+es(Nl(A[k].value),"double",i);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Pn.call(String(t.nodeName))+">",g}if(fr(t)){if(t.length===0)return"[]";var N=ge(t,y);return f&&!Hl(N)?"["+dr(N,f)+"]":"[ "+rt.call(N,", ")+" ]"}if(xl(t)){var Y=ge(t,y);return!("cause"in Error.prototype)&&"cause"in t&&!ts.call(t,"cause")?"{ ["+String(t)+"] "+rt.call(Nn.call("[cause]: "+y(t.cause),Y),", ")+" }":Y.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+rt.call(Y,", ")+" }"}if(typeof t=="object"&&o){if(Dn&&typeof t[Dn]=="function"&&hr)return hr(t,{depth:p-n});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(jl(t)){var H=[];return On&&On.call(t,function(R,S){H.push(y(S,t,!0)+" => "+y(R,t))}),kn("Map",Te.call(t),H,f)}if(Gl(t)){var gt=[];return Tn&&Tn.call(t,function(R){gt.push(y(R,t))}),kn("Set",Ie.call(t),gt,f)}if(Ul(t))return ir("WeakMap");if(Wl(t))return ir("WeakSet");if(Bl(t))return ir("WeakRef");if(Cl(t))return Yt(y(Number(t)));if(Fl(t))return Yt(y(ur.call(t)));if(Dl(t))return Yt(bl.call(t));if(Ll(t))return Yt(y(String(t)));if(!_l(t)&&!Fn(t)){var st=ge(t,y),wt=xn?xn(t)===Object.prototype:t instanceof Object||t.constructor===Object,J=t instanceof Object?"":"null prototype",ht=!wt&&B&&Object(t)===t&&B in t?xr.call(vt(t),8,-1):J?"Object":"",m=wt||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",v=m+(ht||J?"["+rt.call(Nn.call([],ht||[],J||[]),": ")+"] ":"");return st.length===0?v+"{}":f?v+"{"+dr(st,f)+"}":v+"{ "+rt.call(st,", ")+" }"}return String(t)};function es(r,t,e){var n=(e.quoteStyle||t)==="double"?'"':"'";return n+r+n}function Nl(r){return dt.call(String(r),/"/g,"&quot;")}function fr(r){return vt(r)==="[object Array]"&&(!B||!(typeof r=="object"&&B in r))}function _l(r){return vt(r)==="[object Date]"&&(!B||!(typeof r=="object"&&B in r))}function Fn(r){return vt(r)==="[object RegExp]"&&(!B||!(typeof r=="object"&&B in r))}function xl(r){return vt(r)==="[object Error]"&&(!B||!(typeof r=="object"&&B in r))}function Ll(r){return vt(r)==="[object String]"&&(!B||!(typeof r=="object"&&B in r))}function Cl(r){return vt(r)==="[object Number]"&&(!B||!(typeof r=="object"&&B in r))}function Dl(r){return vt(r)==="[object Boolean]"&&(!B||!(typeof r=="object"&&B in r))}function rs(r){if(Mt)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!pr)return!1;try{return pr.call(r),!0}catch{}return!1}function Fl(r){if(!r||typeof r!="object"||!ur)return!1;try{return ur.call(r),!0}catch{}return!1}var kl=Object.prototype.hasOwnProperty||function(r){return r in this};function ft(r,t){return kl.call(r,t)}function vt(r){return Rl.call(r)}function Ml(r){if(r.name)return r.name;var t=Ol.call(Al.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function ns(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,n=r.length;e<n;e++)if(r[e]===t)return e;return-1}function jl(r){if(!Te||!r||typeof r!="object")return!1;try{Te.call(r);try{Ie.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Ul(r){if(!Zt||!r||typeof r!="object")return!1;try{Zt.call(r,Zt);try{te.call(r,te)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function Bl(r){if(!In||!r||typeof r!="object")return!1;try{return In.call(r),!0}catch{}return!1}function Gl(r){if(!Ie||!r||typeof r!="object")return!1;try{Ie.call(r);try{Te.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function Wl(r){if(!te||!r||typeof r!="object")return!1;try{te.call(r,te);try{Zt.call(r,Zt)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function ql(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function ss(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,n="... "+e+" more character"+(e>1?"s":"");return ss(xr.call(r,0,t.maxStringLength),t)+n}var s=dt.call(dt.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Vl);return es(s,"single",t)}function Vl(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+Tl.call(t.toString(16))}function Yt(r){return"Object("+r+")"}function ir(r){return r+" { ? }"}function kn(r,t,e,n){var s=n?dr(e,n):rt.call(e,", ");return r+" ("+t+") {"+s+"}"}function Hl(r){for(var t=0;t<r.length;t++)if(ns(r[t],`
`)>=0)return!1;return!0}function zl(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=rt.call(Array(r.indent+1)," ");else return null;return{base:e,prev:rt.call(Array(t+1),e)}}function dr(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+rt.call(r,","+e)+`
`+t.prev}function ge(r,t){var e=fr(r),n=[];if(e){n.length=r.length;for(var s=0;s<r.length;s++)n[s]=ft(r,s)?t(r[s],r):""}var i=typeof sr=="function"?sr(r):[],o;if(Mt){o={};for(var l=0;l<i.length;l++)o["$"+i[l]]=i[l]}for(var a in r)ft(r,a)&&(e&&String(Number(a))===a&&a<r.length||Mt&&o["$"+a]instanceof Symbol||(Zn.call(/[^\w$]/,a)?n.push(t(a,r)+": "+t(r[a],r)):n.push(a+": "+t(r[a],r))));if(typeof sr=="function")for(var h=0;h<i.length;h++)ts.call(r,i[h])&&n.push("["+t(i[h])+"]: "+t(r[i[h]],r));return n}var Lr=Pr,Gt=wl,Xl=Pl,Kl=Lr("%TypeError%"),we=Lr("%WeakMap%",!0),$e=Lr("%Map%",!0),Ql=Gt("WeakMap.prototype.get",!0),Yl=Gt("WeakMap.prototype.set",!0),Jl=Gt("WeakMap.prototype.has",!0),Zl=Gt("Map.prototype.get",!0),tc=Gt("Map.prototype.set",!0),ec=Gt("Map.prototype.has",!0),Cr=function(r,t){for(var e=r,n;(n=e.next)!==null;e=n)if(n.key===t)return e.next=n.next,n.next=r.next,r.next=n,n},rc=function(r,t){var e=Cr(r,t);return e&&e.value},nc=function(r,t,e){var n=Cr(r,t);n?n.value=e:r.next={key:t,next:r.next,value:e}},sc=function(r,t){return!!Cr(r,t)},ic=function(){var t,e,n,s={assert:function(i){if(!s.has(i))throw new Kl("Side channel does not contain "+Xl(i))},get:function(i){if(we&&i&&(typeof i=="object"||typeof i=="function")){if(t)return Ql(t,i)}else if($e){if(e)return Zl(e,i)}else if(n)return rc(n,i)},has:function(i){if(we&&i&&(typeof i=="object"||typeof i=="function")){if(t)return Jl(t,i)}else if($e){if(e)return ec(e,i)}else if(n)return sc(n,i);return!1},set:function(i,o){we&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new we),Yl(t,i,o)):$e?(e||(e=new $e),tc(e,i,o)):(n||(n={key:{},next:null}),nc(n,i,o))}};return s},oc=String.prototype.replace,ac=/%20/g,or={RFC1738:"RFC1738",RFC3986:"RFC3986"},Dr={default:or.RFC3986,formatters:{RFC1738:function(r){return oc.call(r,ac,"+")},RFC3986:function(r){return String(r)}},RFC1738:or.RFC1738,RFC3986:or.RFC3986},lc=Dr,ar=Object.prototype.hasOwnProperty,Et=Array.isArray,Z=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),cc=function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(Et(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);e.obj[e.prop]=s}}},is=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},s=0;s<t.length;++s)typeof t[s]<"u"&&(n[s]=t[s]);return n},uc=function r(t,e,n){if(!e)return t;if(typeof e!="object"){if(Et(t))t.push(e);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!ar.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var s=t;return Et(t)&&!Et(e)&&(s=is(t,n)),Et(t)&&Et(e)?(e.forEach(function(i,o){if(ar.call(t,o)){var l=t[o];l&&typeof l=="object"&&i&&typeof i=="object"?t[o]=r(l,i,n):t.push(i)}else t[o]=i}),t):Object.keys(e).reduce(function(i,o){var l=e[o];return ar.call(i,o)?i[o]=r(i[o],l,n):i[o]=l,i},s)},pc=function(t,e){return Object.keys(e).reduce(function(n,s){return n[s]=e[s],n},t)},hc=function(r,t,e){var n=r.replace(/\+/g," ");if(e==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},fc=function(t,e,n,s,i){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var l="",a=0;a<o.length;++a){var h=o.charCodeAt(a);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===lc.RFC1738&&(h===40||h===41)){l+=o.charAt(a);continue}if(h<128){l=l+Z[h];continue}if(h<2048){l=l+(Z[192|h>>6]+Z[128|h&63]);continue}if(h<55296||h>=57344){l=l+(Z[224|h>>12]+Z[128|h>>6&63]+Z[128|h&63]);continue}a+=1,h=65536+((h&1023)<<10|o.charCodeAt(a)&1023),l+=Z[240|h>>18]+Z[128|h>>12&63]+Z[128|h>>6&63]+Z[128|h&63]}return l},dc=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],s=0;s<e.length;++s)for(var i=e[s],o=i.obj[i.prop],l=Object.keys(o),a=0;a<l.length;++a){var h=l[a],p=o[h];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(e.push({obj:o,prop:h}),n.push(p))}return cc(e),t},yc=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},vc=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},mc=function(t,e){return[].concat(t,e)},gc=function(t,e){if(Et(t)){for(var n=[],s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)},os={arrayToObject:is,assign:pc,combine:mc,compact:dc,decode:hc,encode:fc,isBuffer:vc,isRegExp:yc,maybeMap:gc,merge:uc},as=ic,yr=os,ee=Dr,wc=Object.prototype.hasOwnProperty,Mn={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},at=Array.isArray,$c=String.prototype.split,Ec=Array.prototype.push,ls=function(r,t){Ec.apply(r,at(t)?t:[t])},Sc=Date.prototype.toISOString,jn=ee.default,U={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:yr.encode,encodeValuesOnly:!1,format:jn,formatter:ee.formatters[jn],indices:!1,serializeDate:function(t){return Sc.call(t)},skipNulls:!1,strictNullHandling:!1},bc=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},lr={},Rc=function r(t,e,n,s,i,o,l,a,h,p,f,y,d,E,x,g){for(var A=t,k=g,N=0,Y=!1;(k=k.get(lr))!==void 0&&!Y;){var H=k.get(t);if(N+=1,typeof H<"u"){if(H===N)throw new RangeError("Cyclic object value");Y=!0}typeof k.get(lr)>"u"&&(N=0)}if(typeof a=="function"?A=a(e,A):A instanceof Date?A=f(A):n==="comma"&&at(A)&&(A=yr.maybeMap(A,function(T){return T instanceof Date?f(T):T})),A===null){if(i)return l&&!E?l(e,U.encoder,x,"key",y):e;A=""}if(bc(A)||yr.isBuffer(A)){if(l){var gt=E?e:l(e,U.encoder,x,"key",y);if(n==="comma"&&E){for(var st=$c.call(String(A),","),wt="",J=0;J<st.length;++J)wt+=(J===0?"":",")+d(l(st[J],U.encoder,x,"value",y));return[d(gt)+(s&&at(A)&&st.length===1?"[]":"")+"="+wt]}return[d(gt)+"="+d(l(A,U.encoder,x,"value",y))]}return[d(e)+"="+d(String(A))]}var ht=[];if(typeof A>"u")return ht;var m;if(n==="comma"&&at(A))m=[{value:A.length>0?A.join(",")||null:void 0}];else if(at(a))m=a;else{var v=Object.keys(A);m=h?v.sort(h):v}for(var R=s&&at(A)&&A.length===1?e+"[]":e,S=0;S<m.length;++S){var b=m[S],w=typeof b=="object"&&typeof b.value<"u"?b.value:A[b];if(!(o&&w===null)){var O=at(A)?typeof n=="function"?n(R,b):R:R+(p?"."+b:"["+b+"]");g.set(t,N);var _=as();_.set(lr,g),ls(ht,r(w,O,n,s,i,o,l,a,h,p,f,y,d,E,x,_))}}return ht},Ac=function(t){if(!t)return U;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||U.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ee.default;if(typeof t.format<"u"){if(!wc.call(ee.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var s=ee.formatters[n],i=U.filter;return(typeof t.filter=="function"||at(t.filter))&&(i=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:U.addQueryPrefix,allowDots:typeof t.allowDots>"u"?U.allowDots:!!t.allowDots,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:U.charsetSentinel,delimiter:typeof t.delimiter>"u"?U.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:U.encode,encoder:typeof t.encoder=="function"?t.encoder:U.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:U.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:U.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:U.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:U.strictNullHandling}},Oc=function(r,t){var e=r,n=Ac(t),s,i;typeof n.filter=="function"?(i=n.filter,e=i("",e)):at(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof e!="object"||e===null)return"";var l;t&&t.arrayFormat in Mn?l=t.arrayFormat:t&&"indices"in t?l=t.indices?"indices":"repeat":l="indices";var a=Mn[l];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=a==="comma"&&t&&t.commaRoundTrip;s||(s=Object.keys(e)),n.sort&&s.sort(n.sort);for(var p=as(),f=0;f<s.length;++f){var y=s[f];n.skipNulls&&e[y]===null||ls(o,Rc(e[y],y,a,h,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,p))}var d=o.join(n.delimiter),E=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),d.length>0?E+d:""},jt=os,vr=Object.prototype.hasOwnProperty,Tc=Array.isArray,j={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:jt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Ic=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},cs=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},Pc="utf8=%26%2310003%3B",Nc="utf8=%E2%9C%93",_c=function(t,e){var n={},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,i=e.parameterLimit===1/0?void 0:e.parameterLimit,o=s.split(e.delimiter,i),l=-1,a,h=e.charset;if(e.charsetSentinel)for(a=0;a<o.length;++a)o[a].indexOf("utf8=")===0&&(o[a]===Nc?h="utf-8":o[a]===Pc&&(h="iso-8859-1"),l=a,a=o.length);for(a=0;a<o.length;++a)if(a!==l){var p=o[a],f=p.indexOf("]="),y=f===-1?p.indexOf("="):f+1,d,E;y===-1?(d=e.decoder(p,j.decoder,h,"key"),E=e.strictNullHandling?null:""):(d=e.decoder(p.slice(0,y),j.decoder,h,"key"),E=jt.maybeMap(cs(p.slice(y+1),e),function(x){return e.decoder(x,j.decoder,h,"value")})),E&&e.interpretNumericEntities&&h==="iso-8859-1"&&(E=Ic(E)),p.indexOf("[]=")>-1&&(E=Tc(E)?[E]:E),vr.call(n,d)?n[d]=jt.combine(n[d],E):n[d]=E}return n},xc=function(r,t,e,n){for(var s=n?t:cs(t,e),i=r.length-1;i>=0;--i){var o,l=r[i];if(l==="[]"&&e.parseArrays)o=[].concat(s);else{o=e.plainObjects?Object.create(null):{};var a=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,h=parseInt(a,10);!e.parseArrays&&a===""?o={0:s}:!isNaN(h)&&l!==a&&String(h)===a&&h>=0&&e.parseArrays&&h<=e.arrayLimit?(o=[],o[h]=s):a!=="__proto__"&&(o[a]=s)}s=o}return s},Lc=function(t,e,n,s){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,a=n.depth>0&&o.exec(i),h=a?i.slice(0,a.index):i,p=[];if(h){if(!n.plainObjects&&vr.call(Object.prototype,h)&&!n.allowPrototypes)return;p.push(h)}for(var f=0;n.depth>0&&(a=l.exec(i))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&vr.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(a[1])}return a&&p.push("["+i.slice(a.index)+"]"),xc(p,e,n,s)}},Cc=function(t){if(!t)return j;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?j.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?j.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:j.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:j.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:j.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:j.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:j.comma,decoder:typeof t.decoder=="function"?t.decoder:j.decoder,delimiter:typeof t.delimiter=="string"||jt.isRegExp(t.delimiter)?t.delimiter:j.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:j.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:j.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:j.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:j.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:j.strictNullHandling}},Dc=function(r,t){var e=Cc(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?_c(r,e):r,s=e.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var l=i[o],a=Lc(l,n[l],e,typeof r=="string");s=jt.merge(s,a,e)}return e.allowSparse===!0?s:jt.compact(s)},Fc=Oc,kc=Dc,Mc=Dr,mr={formats:Mc,parse:kc,stringify:Fc},Ut=function(){return Ut=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ut.apply(this,arguments)};function jc(r){return r.toLowerCase()}var Uc=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Bc=/[^A-Z0-9]+/gi;function us(r,t){t===void 0&&(t={});for(var e=t.splitRegexp,n=e===void 0?Uc:e,s=t.stripRegexp,i=s===void 0?Bc:s,o=t.transform,l=o===void 0?jc:o,a=t.delimiter,h=a===void 0?" ":a,p=Un(Un(r,n,"$1\0$2"),i,"\0"),f=0,y=p.length;p.charAt(f)==="\0";)f++;for(;p.charAt(y-1)==="\0";)y--;return p.slice(f,y).split("\0").map(l).join(h)}function Un(r,t,e){return t instanceof RegExp?r.replace(t,e):t.reduce(function(n,s){return n.replace(s,e)},r)}function ps(r,t){var e=r.charAt(0),n=r.substr(1).toLowerCase();return t>0&&e>="0"&&e<="9"?"_"+e+n:""+e.toUpperCase()+n}function Gc(r,t){return t===void 0&&(t={}),us(r,Ut({delimiter:"",transform:ps},t))}function Wc(r,t){return t===0?r.toLowerCase():ps(r,t)}function qc(r,t){return t===void 0&&(t={}),Gc(r,Ut({transform:Wc},t))}function Vc(r,t){return t===void 0&&(t={}),us(r,Ut({delimiter:"."},t))}function Bn(r,t){return t===void 0&&(t={}),Vc(r,Ut({delimiter:"_"},t))}var gr={},Hc={get exports(){return gr},set exports(r){gr=r}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(a,h,p){this.fn=a,this.context=h,this.once=p||!1}function i(a,h,p,f,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var d=new s(p,f||a,y),E=e?e+h:h;return a._events[E]?a._events[E].fn?a._events[E]=[a._events[E],d]:a._events[E].push(d):(a._events[E]=d,a._eventsCount++),a}function o(a,h){--a._eventsCount===0?a._events=new n:delete a._events[h]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],p,f;if(this._eventsCount===0)return h;for(f in p=this._events)t.call(p,f)&&h.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},l.prototype.listeners=function(h){var p=e?e+h:h,f=this._events[p];if(!f)return[];if(f.fn)return[f.fn];for(var y=0,d=f.length,E=new Array(d);y<d;y++)E[y]=f[y].fn;return E},l.prototype.listenerCount=function(h){var p=e?e+h:h,f=this._events[p];return f?f.fn?1:f.length:0},l.prototype.emit=function(h,p,f,y,d,E){var x=e?e+h:h;if(!this._events[x])return!1;var g=this._events[x],A=arguments.length,k,N;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),A){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,p),!0;case 3:return g.fn.call(g.context,p,f),!0;case 4:return g.fn.call(g.context,p,f,y),!0;case 5:return g.fn.call(g.context,p,f,y,d),!0;case 6:return g.fn.call(g.context,p,f,y,d,E),!0}for(N=1,k=new Array(A-1);N<A;N++)k[N-1]=arguments[N];g.fn.apply(g.context,k)}else{var Y=g.length,H;for(N=0;N<Y;N++)switch(g[N].once&&this.removeListener(h,g[N].fn,void 0,!0),A){case 1:g[N].fn.call(g[N].context);break;case 2:g[N].fn.call(g[N].context,p);break;case 3:g[N].fn.call(g[N].context,p,f);break;case 4:g[N].fn.call(g[N].context,p,f,y);break;default:if(!k)for(H=1,k=new Array(A-1);H<A;H++)k[H-1]=arguments[H];g[N].fn.apply(g[N].context,k)}}return!0},l.prototype.on=function(h,p,f){return i(this,h,p,f,!1)},l.prototype.once=function(h,p,f){return i(this,h,p,f,!0)},l.prototype.removeListener=function(h,p,f,y){var d=e?e+h:h;if(!this._events[d])return this;if(!p)return o(this,d),this;var E=this._events[d];if(E.fn)E.fn===p&&(!y||E.once)&&(!f||E.context===f)&&o(this,d);else{for(var x=0,g=[],A=E.length;x<A;x++)(E[x].fn!==p||y&&!E[x].once||f&&E[x].context!==f)&&g.push(E[x]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},l.prototype.removeAllListeners=function(h){var p;return h?(p=e?e+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,r.exports=l})(Hc);var Lt=null;typeof WebSocket<"u"?Lt=WebSocket:typeof MozWebSocket<"u"?Lt=MozWebSocket:typeof global<"u"?Lt=global.WebSocket||global.MozWebSocket:typeof window<"u"?Lt=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Lt=self.WebSocket||self.MozWebSocket);const zc=Lt;class mt extends Error{constructor(t,e={}){super(t,{cause:e.cause}),this.name="MastoError",this.isMastoError=!0,Object.setPrototypeOf(this,mt.prototype),this.description=e.description,this.details=e.details}}class nt extends mt{constructor(t,e,n){super(t,n),this.name="MastoHttpError",Object.setPrototypeOf(this,nt.prototype),this.statusCode=e}}class Fr extends nt{constructor(t,e){super(t,409,e),this.name="MastoHttpConflictError",Object.setPrototypeOf(this,Fr.prototype)}}class kr extends nt{constructor(t,e){super(t,403,e),this.name="MastoHttpForbiddenError",Object.setPrototypeOf(this,kr.prototype)}}class Mr extends nt{constructor(t,e){super(t,410,e),this.name="MastoHttpGoneError",Object.setPrototypeOf(this,Mr.prototype)}}class Fe extends nt{constructor(t,e){super(t,404,e),this.name="MastoHttpNotFoundError",Object.setPrototypeOf(this,Fe.prototype)}}class jr extends nt{constructor(t,e){super(t,429,e),this.name="MastoHttpRateLimitError",Object.setPrototypeOf(this,jr.prototype),this.limit=e==null?void 0:e.limit,this.remaining=e==null?void 0:e.remaining,this.reset=e==null?void 0:e.reset}}class Ur extends nt{constructor(t,e){super(t,401,e),this.name="MastoHttpUnauthorizedError",Object.setPrototypeOf(this,Ur.prototype)}}class Br extends nt{constructor(t,e,n){super(t,e,n),this.name="MastoHttpUnexpectedError",Object.setPrototypeOf(this,Br.prototype)}}class Gr extends nt{constructor(t,e){super(t,422,e),this.name="MastoHttpUnprocessableEntityError",Object.setPrototypeOf(this,Gr.prototype)}}const Xc=r=>{var t,e;const n=(t=r.message)!==null&&t!==void 0?t:"Unexpected error occurred",s={cause:r.cause,description:(e=r.description)!==null&&e!==void 0?e:"No further description is provided for this error",details:r.details};switch(r.statusCode){case 401:return new Ur(n,s);case 403:return new kr(n,s);case 404:return new Fe(n,s);case 409:return new Fr(n,s);case 410:return new Mr(n,s);case 422:return new Gr(n,s);case 429:return new jr(n,Object.assign(Object.assign({},s),{limit:r.limit,remaining:r.remaining,reset:r.reset}));default:return new Br(n,r.statusCode,s)}};class se extends mt{constructor(t,e={}){super(t,{cause:e.cause}),this.name="MastoUnexpectedError",Object.setPrototypeOf(this,se.prototype)}}class Wr extends mt{constructor(t,e,n,s){super(t,s),this.contentType=e,this.data=n,this.name="MastoDeserializeError",Object.setPrototypeOf(this,Wr.prototype)}}class Pe extends mt{constructor(t,e){super(t,e),this.name="MastoVersionError",Object.setPrototypeOf(this,Pe.prototype)}}class qr extends mt{constructor(t,e){super(t,e),this.name="MastoInvalidArgumentError",Object.setPrototypeOf(this,qr.prototype)}}class ke extends mt{constructor(t,e){super(t,e),this.name="MastoTimeoutError",Object.setPrototypeOf(this,ke.prototype)}}class Kc{constructor(t){this.logLevel=t}debug(t,e){this.logLevel.satisfies("debug")&&this.log("debug",t,e)}info(t,e){this.logLevel.satisfies("info")&&this.log("info",t,e)}warn(t,e){this.logLevel.satisfies("warn")&&this.log("warn",t,e)}error(t,e){this.logLevel.satisfies("error")&&this.log("error",t,e)}}class Qc extends Kc{constructor(t){super(t)}log(t,e,n){switch(t){case"debug":{console.debug(e,n);return}case"info":{console.info(e,n);return}case"warn":{console.warn(e,n);return}case"error":{console.error(e,n);return}}}}const q=Object.freeze({DEBUG:1<<0,INFO:1<<1,WARN:1<<2,ERROR:1<<3});class Ct{constructor(t){this.level=t}satisfies(t){switch(t){case"debug":return Boolean(this.level&q.DEBUG);case"info":return Boolean(this.level&q.INFO);case"warn":return Boolean(this.level&q.WARN);case"error":return Boolean(this.level&q.ERROR)}}static from(t){switch(t){case"debug":return new Ct(q.DEBUG|q.INFO|q.WARN|q.ERROR);case"info":return new Ct(q.INFO|q.WARN|q.ERROR);case"warn":return new Ct(q.WARN|q.ERROR);case"error":return new Ct(q.ERROR)}}}const Yc=r=>new Promise(t=>setTimeout(()=>t(),r));class Jc{constructor(t){this.abortController=new Wn,this.timeout=setTimeout(()=>{this.abortController.abort()},t)}get signal(){return this.abortController.signal}clear(){clearTimeout(this.timeout)}}const Zc=r=>{const t=new Wn;for(const e of r)e.addEventListener("abort",()=>t.abort());return t.signal},tu=([r,...t])=>{const e=new be(r);for(const n of t)new be(n).forEach((s,i)=>{e.set(i,s)});return e},eu=1e3*300;class ru{constructor(t,e){this.props=t,this.serializer=e}createHeader(t={}){var e,n;const s=tu([(n=(e=this.props.defaultRequestInit)===null||e===void 0?void 0:e.headers)!==null&&n!==void 0?n:{},{"Content-Type":"application/json"},t]),i=new be(s);return this.props.accessToken&&i.set("Authorization",`Bearer ${this.props.accessToken}`),new be(i)}createWebsocketProtocols(t=[]){return this.supportsSecureToken()&&this.props.accessToken!=null?[this.props.accessToken,...t]:t}resolveHttpPath(t,e){const n=new URL(t,this.props.url);return e&&(n.search=this.serializer.serializeQueryString(e)),n}resolveWebsocketPath(t,e={}){if(this.props.streamingApiUrl==null)throw new qr("You need to specify `streamingApiUrl` to use this feature");const n=new URL(this.props.streamingApiUrl.replace(/\/$/,"")+t);return this.supportsSecureToken()||(e.accessToken=this.props.accessToken),n.search=this.serializer.serializeQueryString(e),n.toString()}createTimeout(){var t;return new Jc((t=this.props.timeout)!==null&&t!==void 0?t:eu)}createAbortSignal(t){var e;const n=this.createTimeout(),s=[n.signal];return!((e=this.props.defaultRequestInit)===null||e===void 0)&&e.signal&&s.push(this.props.defaultRequestInit.signal),t!=null&&s.push(t),[Zc(s),n]}getLogLevel(){var t;return Ct.from((t=this.props.logLevel)!==null&&t!==void 0?t:"warn")}shouldWarnDeprecated(){return!this.props.disableDeprecatedWarning}satisfiesVersion(t,e){var n;return this.props.version==null||this.props.disableVersionCheck?{compat:"compatible",version:(n=this.props.version)===null||n===void 0?void 0:n.version}:t&&bt.lt(this.props.version,t)?{compat:"unimplemented",version:this.props.version.version}:e&&bt.gt(this.props.version,e)?{compat:"removed",version:this.props.version.version}:{compat:"compatible",version:this.props.version.version}}supportsSecureToken(){var t;return this.props.version==null||this.props.disableVersionCheck?!0:((t=this.props.streamingApiUrl)===null||t===void 0?void 0:t.startsWith("wss:"))&&bt.gte(this.props.version,new bt.SemVer("2.8.4",{loose:!0}))}}class nu{get(t,e,n={}){return this.request({path:t,searchParams:e,requestInit:Object.assign({method:"GET"},n)}).then(s=>s.data)}post(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"POST"},n)}).then(s=>s.data)}delete(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"DELETE"},n)}).then(s=>s.data)}put(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"PUT"},n)}).then(s=>s.data)}patch(t,e,n={}){return this.request({path:t,body:e,requestInit:Object.assign({method:"PATCH"},n)}).then(s=>s.data)}}function c(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i}function yt(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function l(p){try{h(n.next(p))}catch(f){o(f)}}function a(p){try{h(n.throw(p))}catch(f){o(f)}}function h(p){p.done?i(p.value):s(p.value).then(l,a)}h((n=n.apply(r,t||[])).next())})}const Ee=r=>{const t=r.get("Content-Type");if(typeof t=="string")return t.replace(/\s*;.*$/,"")};class su extends nu{constructor(t,e,n){super(),this.serializer=t,this.config=e,this.logger=n}request(t){var e,n,s,i,o;return yt(this,void 0,void 0,function*(){const[l,a]=this.createRequest(t);try{(e=this.logger)===null||e===void 0||e.info(` ${l.method} ${l.url}`),(n=this.logger)===null||n===void 0||n.debug("	body",l.body);const h=yield Xs(l);if(a.clear(),!h.ok)throw h;const p=yield h.text(),f=Ee(h.headers);if(f==null)throw new se("Content-Type is not defined");const y=this.serializer.deserialize(f,p);return(s=this.logger)===null||s===void 0||s.info(` ${l.method} ${l.url}`),(i=this.logger)===null||i===void 0||i.debug("	body",p),{headers:h.headers,data:y}}catch(h){throw(o=this.logger)===null||o===void 0||o.debug("HTTP failed",h),yield this.createError(h)}})}createRequest(t){var e;const{path:n,searchParams:s,requestInit:i}=t,o=this.config.resolveHttpPath(n,s),l=this.config.createHeader(i==null?void 0:i.headers),[a,h]=this.config.createAbortSignal(i==null?void 0:i.signal),p=this.serializer.serialize((e=Ee(l))!==null&&e!==void 0?e:"application/json",t.body);return p instanceof Gn&&l.delete("Content-Type"),p==null&&Ee(l)=="application/json"&&l.delete("Content-Type"),[new Hs(o,Object.assign(Object.assign({},i),{headers:l,body:p,signal:a})),h]}createError(t){var e;return yt(this,void 0,void 0,function*(){if(t instanceof zs){const n=this.serializer.deserialize((e=Ee(t.headers))!==null&&e!==void 0?e:"application/json",yield t.text());return Xc({cause:t,statusCode:t.status,message:n==null?void 0:n.error,details:n==null?void 0:n.errorDescription,description:n==null?void 0:n.details,limit:t.headers.get("X-RateLimit-Limit"),remaining:t.headers.get("X-RateLimit-Remaining"),reset:t.headers.get("X-RateLimit-Reset")})}return t!=null&&t.name==="AbortError"?new ke("Request timed out",{cause:t}):t})}}const u=r=>(t,e,n)=>{const s=n.value;if(!s)throw new se("version can only apply to a method of a class");n.value=function(...i){const o=r.since&&new bt.SemVer(r.since,{loose:!0}),l=r.until&&new bt.SemVer(r.until,{loose:!0}),a=this.config.satisfiesVersion(o,l);switch(a.compat){case"unimplemented":throw new Pe(`${String(this.constructor.name)}.${String(e)} is not available with the current Mastodon version `+a.version+` It requires greater than or equal to version ${o}.`);case"removed":throw new Pe(`${String(this.constructor.name)}.${String(e)} is not available with the current Mastodon version`+a.version+` It was removed on version ${l}.`);case"compatible":return s.apply(this,i)}}};class ${constructor(t,e,n){this.http=t,this.nextPath=e,this.nextParams=n,this.pluckNext=s=>{var i;return s==null||(i=s.match(/<(.+?)>; rel="next"/))===null||i===void 0?void 0:i[1].replace(/^https?:\/\/[^/]+/,"")}}next(){var t,e;return yt(this,void 0,void 0,function*(){if(this.nextPath==null)return{done:!0,value:void 0};const n=yield this.http.request({requestInit:{method:"GET"},path:this.nextPath,searchParams:this.nextParams}),s=(t=this.pluckNext(n.headers.get("link")))===null||t===void 0?void 0:t.split("?");return this.nextPath=s==null?void 0:s[0],this.nextParams=mr.parse((e=s==null?void 0:s[1])!==null&&e!==void 0?e:""),{done:!1,value:n.data}})}return(t){return yt(this,void 0,void 0,function*(){return this.clear(),{done:!0,value:yield t}})}throw(t){return yt(this,void 0,void 0,function*(){throw this.clear(),t})}then(t=Promise.resolve,e=Promise.reject){return this.next().then(n=>t(n.value),e)}[Symbol.asyncIterator](){return this}clear(){this.nextPath=void 0,this.nextParams=void 0}clone(){return new $(this.http,this.nextPath,this.nextParams)}}let L=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/accounts/${t}`)}create(t){return this.http.post("/api/v1/accounts",t,{headers:{"Content-Type":"multipart/form-data"}})}verifyCredentials(){return this.http.get("/api/v1/accounts/verify_credentials")}updateCredentials(t){return this.http.patch("/api/v1/accounts/update_credentials",t,{headers:{"Content-Type":"multipart/form-data"}})}listFollowers(t,e={}){return new $(this.http,`/api/v1/accounts/${t}/followers`,e)}listFollowing(t,e={}){return new $(this.http,`/api/v1/accounts/${t}/following`,e)}listStatuses(t,e={}){return new $(this.http,`/api/v1/accounts/${t}/statuses`,e)}follow(t,e){return this.http.post(`/api/v1/accounts/${t}/follow`,e)}unfollow(t,e){return this.http.post(`/api/v1/accounts/${t}/unfollow`,e)}fetchRelationships(t){return this.http.get("/api/v1/accounts/relationships",{id:t})}search(t){return new $(this.http,"/api/v1/accounts/search",t)}block(t){return this.http.post(`/api/v1/accounts/${t}/block`)}unblock(t){return this.http.post(`/api/v1/accounts/${t}/unblock`)}pin(t){return this.http.post(`/api/v1/accounts/${t}/pin`)}unpin(t){return this.http.post(`/api/v1/accounts/${t}/unpin`)}listLists(t){return new $(this.http,`/api/v1/accounts/${t}/lists`)}mute(t,e){return this.http.post(`/api/v1/accounts/${t}/mute`,e)}unmute(t){return this.http.post(`/api/v1/accounts/${t}/unmute`)}createNote(t,e){return this.http.post(`/api/v1/accounts/${t}/note`,e)}listFeaturedTags(t){return new $(this.http,`/api/v1/accounts/${t}/featured_tags`)}listIdentityProofs(t){return new $(this.http,`/api/v1/accounts/${t}/identity_proofs`)}lookup(t){return this.http.get("/api/v1/accounts/lookup",t)}fetchFamiliarFollowers(t){return this.http.get("/api/v1/accounts/familiar_followers",{id:t})}removeFromFollowers(t){return this.http.post(`/api/v1/accounts/${t}/remove_from_followers`)}};c([u({since:"0.0.0"})],L.prototype,"fetch",null);c([u({since:"2.7.0"})],L.prototype,"create",null);c([u({since:"0.0.0"})],L.prototype,"verifyCredentials",null);c([u({since:"0.0.0"})],L.prototype,"updateCredentials",null);c([u({since:"0.0.0"})],L.prototype,"listFollowers",null);c([u({since:"0.0.0"})],L.prototype,"listFollowing",null);c([u({since:"0.0.0"})],L.prototype,"listStatuses",null);c([u({since:"0.0.0"})],L.prototype,"follow",null);c([u({since:"0.0.0"})],L.prototype,"unfollow",null);c([u({since:"0.0.0"})],L.prototype,"fetchRelationships",null);c([u({since:"0.0.0"})],L.prototype,"search",null);c([u({since:"0.0.0"})],L.prototype,"block",null);c([u({since:"0.0.0"})],L.prototype,"unblock",null);c([u({since:"2.5.0"})],L.prototype,"pin",null);c([u({since:"2.5.0"})],L.prototype,"unpin",null);c([u({since:"2.1.0"})],L.prototype,"listLists",null);c([u({since:"0.0.0"})],L.prototype,"mute",null);c([u({since:"0.0.0"})],L.prototype,"unmute",null);c([u({since:"3.2.0"})],L.prototype,"createNote",null);c([u({since:"3.3.0"})],L.prototype,"listFeaturedTags",null);c([u({since:"2.8.0"})],L.prototype,"listIdentityProofs",null);c([u({since:"3.4.0"})],L.prototype,"lookup",null);c([u({since:"3.5.0"})],L.prototype,"fetchFamiliarFollowers",null);c([u({since:"3.5.0"})],L.prototype,"removeFromFollowers",null);const Me=r=>(t,e,n)=>{const s=n.value;if(s==null)throw new se("deprecated can only apply to a method of a class");n.value=function(...i){var o,l;return!((o=this.config)===null||o===void 0)&&o.shouldWarnDeprecated()&&((l=this.logger)===null||l===void 0||l.warn(`#${e.toString()} is deprecated. ${r}`)),s.apply(this,i)}};class ct{constructor(t,e,n){this.ws=t,this.config=e,this.logger=n}streamUser(){return this.ws.stream("/api/v1/streaming",{stream:"user"})}streamPublicTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"public"})}streamCommunityTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"public:local"})}streamRemotePublicTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"public:remote"})}streamTagTimeline(t){return this.ws.stream("/api/v1/streaming",{stream:"hashtag",tag:t})}streamLocalTagTimeline(t){return this.ws.stream("/api/v1/streaming",{stream:"hashtag:local",tag:t})}streamListTimeline(t){return this.ws.stream("/api/v1/streaming",{stream:"list",list:t})}streamDirectTimeline(){return this.ws.stream("/api/v1/streaming",{stream:"direct"})}}c([u({since:"0.0.0"})],ct.prototype,"streamUser",null);c([u({since:"0.0.0"})],ct.prototype,"streamPublicTimeline",null);c([u({since:"0.0.0"})],ct.prototype,"streamCommunityTimeline",null);c([u({since:"0.0.0"})],ct.prototype,"streamRemotePublicTimeline",null);c([u({since:"0.0.0"})],ct.prototype,"streamTagTimeline",null);c([u({since:"0.0.0"})],ct.prototype,"streamLocalTagTimeline",null);c([u({since:"0.0.0"})],ct.prototype,"streamListTimeline",null);c([u({since:"0.0.0"})],ct.prototype,"streamDirectTimeline",null);class ie{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new $(this.http,"/api/v1/announcements")}dismiss(t){return this.http.post(`/api/v1/announcements/${t}/dismiss`)}addReaction(t,e){return this.http.put(`/api/v1/announcements/${t}/reactions/${e}`)}removeReaction(t,e){return this.http.delete(`/api/v1/announcements/${t}/reactions/${e}`)}}c([u({since:"3.1.0"})],ie.prototype,"list",null);c([u({since:"3.1.0"})],ie.prototype,"dismiss",null);c([u({since:"3.1.0"})],ie.prototype,"addReaction",null);c([u({since:"3.1.0"})],ie.prototype,"removeReaction",null);class Vr{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/apps",t)}verifyCredentials(){return this.http.get("/api/v1/apps/verify_credentials")}}c([u({since:"0.0.0"})],Vr.prototype,"create",null);c([u({since:"2.0.0"})],Vr.prototype,"verifyCredentials",null);class hs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t={}){return new $(this.http,"/api/v1/blocks",t)}}c([u({since:"0.0.0"})],hs.prototype,"list",null);class fs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t={}){return new $(this.http,"/api/v1/bookmarks",t)}}c([u({since:"3.1.0"})],fs.prototype,"list",null);class je{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t={}){return new $(this.http,"/api/v1/conversations",t)}remove(t){return this.http.delete(`/api/v1/conversations/${t}`)}read(t){return this.http.post(`/api/v1/conversations/${t}/read`)}}c([u({since:"2.6.0"})],je.prototype,"list",null);c([u({since:"2.6.0"})],je.prototype,"remove",null);c([u({since:"2.6.0"})],je.prototype,"read",null);class ds{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new $(this.http,"/api/v1/custom_emojis")}}c([u({since:"2.0.0"})],ds.prototype,"list",null);class ys{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/directory",t)}}c([u({since:"3.0.0"})],ys.prototype,"list",null);let Ue=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/domain_blocks",t)}block(t){return this.http.post("/api/v1/domain_blocks",{domain:t})}unblock(t){return this.http.delete("/api/v1/domain_blocks",{domain:t})}};c([u({since:"1.4.0"})],Ue.prototype,"list",null);c([u({since:"1.4.0"})],Ue.prototype,"block",null);c([u({since:"1.4.0"})],Ue.prototype,"unblock",null);class vs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/endorsements",t)}}c([u({since:"2.5.0"})],vs.prototype,"list",null);class ms{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/favourites",t)}}c([u({since:"0.0.0"})],ms.prototype,"list",null);class oe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new $(this.http,"/api/v1/featured_tags")}create(t){return this.http.post("/api/v1/featured_tags",t)}listSuggestions(){return new $(this.http,"/api/v1/featured_tags/suggestions")}remove(t){return this.http.delete(`/api/v1/featured_tags/${t}`)}}c([u({since:"3.0.0"})],oe.prototype,"list",null);c([u({since:"3.0.0"})],oe.prototype,"create",null);c([u({since:"3.0.0"})],oe.prototype,"listSuggestions",null);c([u({since:"3.0.0"})],oe.prototype,"remove",null);let Wt=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new $(this.http,"/api/v1/filters")}fetch(t){return this.http.get(`/api/v1/filters/${t}`)}create(t){return this.http.post("/api/v1/filters",t)}update(t,e){return this.http.put(`/api/v1/filters/${t}`,e)}remove(t){return this.http.delete(`/api/v1/filters/${t}`)}};c([u({since:"2.4.3"})],Wt.prototype,"list",null);c([u({since:"2.4.3"})],Wt.prototype,"fetch",null);c([u({since:"2.4.3"})],Wt.prototype,"create",null);c([u({since:"2.4.3"})],Wt.prototype,"update",null);c([u({since:"2.4.3"})],Wt.prototype,"remove",null);class Be{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/follow_requests",t)}authorize(t){return this.http.post(`/api/v1/follow_requests/${t}/authorize`)}reject(t){return this.http.post(`/api/v1/follow_requests/${t}/reject`)}}c([u({since:"0.0.0"})],Be.prototype,"list",null);c([u({since:"0.0.0"})],Be.prototype,"authorize",null);c([u({since:"0.0.0"})],Be.prototype,"reject",null);let ae=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(){return this.http.get("/api/v1/instance")}listPeers(){return new $(this.http,"/api/v1/instance/peers")}listActivities(){return new $(this.http,"/api/v1/instance/activity")}};c([u({since:"1.0.0"})],ae.prototype,"fetch",null);c([u({since:"2.1.2"})],ae.prototype,"listPeers",null);c([u({since:"2.1.2"})],ae.prototype,"listActivities",null);class ut{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/lists/${t}`)}list(){return new $(this.http,"/api/v1/lists")}create(t){return this.http.post("/api/v1/lists",t)}update(t,e){return this.http.put(`/api/v1/lists/${t}`,e)}remove(t){return this.http.delete(`/api/v1/lists/${t}`)}listAccounts(t,e){return new $(this.http,`/api/v1/lists/${t}/accounts`,e)}addAccount(t,e){return this.http.post(`/api/v1/lists/${t}/accounts`,e)}removeAccount(t,e){return this.http.delete(`/api/v1/lists/${t}/accounts`,e)}}c([u({since:"2.1.0"})],ut.prototype,"fetch",null);c([u({since:"2.1.0"})],ut.prototype,"list",null);c([u({since:"2.1.0"})],ut.prototype,"create",null);c([u({since:"2.1.0"})],ut.prototype,"update",null);c([u({since:"2.1.0"})],ut.prototype,"remove",null);c([u({since:"2.1.0"})],ut.prototype,"listAccounts",null);c([u({since:"2.1.0"})],ut.prototype,"addAccount",null);c([u({since:"2.1.0"})],ut.prototype,"removeAccount",null);class Hr{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get("/api/v1/markers",t)}create(t){return this.http.post("/api/v1/markers",t)}}c([u({since:"3.0.0"})],Hr.prototype,"fetch",null);c([u({since:"3.0.0"})],Hr.prototype,"create",null);let le=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/media",t,{headers:{"Content-Type":"multipart/form-data"}})}fetch(t){return this.http.get(`/api/v1/media/${t}`)}update(t,e){return this.http.put(`/api/v1/media/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}})}};c([Me("Use MastoClient.v2.media.create instead"),u({since:"0.0.0",until:"3.1.3"})],le.prototype,"create",null);c([u({since:"3.1.3"})],le.prototype,"fetch",null);c([u({since:"0.0.0"})],le.prototype,"update",null);class gs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/mutes",t)}}c([u({since:"0.0.0"})],gs.prototype,"list",null);class ce{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/notifications",t)}fetch(t){return this.http.get(`/api/v1/notifications/${t}`)}clear(){return this.http.post("/api/v1/notifications/clear")}dismiss(t){return this.http.post(`/api/v1/notifications/${t}/dismiss`)}}c([u({since:"0.0.0"})],ce.prototype,"list",null);c([u({since:"0.0.0"})],ce.prototype,"fetch",null);c([u({since:"0.0.0"})],ce.prototype,"clear",null);c([u({since:"2.6.0"})],ce.prototype,"dismiss",null);class zr{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/polls/${t}`)}vote(t,e){return this.http.post(`/api/v1/polls/${t}/votes`,e)}}c([u({since:"2.8.0"})],zr.prototype,"fetch",null);c([u({since:"2.8.0"})],zr.prototype,"vote",null);class ws{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(){return this.http.get("/api/v1/preferences")}}c([u({since:"2.8.0"})],ws.prototype,"fetch",null);class ue{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/push/subscription",t)}fetch(){return this.http.get("/api/v1/push/subscription")}update(t){return this.http.put("/api/v1/push/subscription",t)}remove(){return this.http.delete("/api/v1/push/subscription")}}c([u({since:"2.4.0"})],ue.prototype,"create",null);c([u({since:"2.4.0"})],ue.prototype,"fetch",null);c([u({since:"2.4.0"})],ue.prototype,"update",null);c([u({since:"2.4.0"})],ue.prototype,"remove",null);let $s=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.post("/api/v1/reports",t)}};c([u({since:"1.1.0"})],$s.prototype,"create",null);class pe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/scheduled_statuses",t)}fetch(t){return this.http.get(`/api/v1/scheduled_statuses/${t}`)}update(t,e){return this.http.put(`/api/v1/scheduled_statuses/${t}`,e)}remove(t){return this.http.delete(`/api/v1/scheduled_statuses/${t}`)}}c([u({since:"2.7.0"})],pe.prototype,"list",null);c([u({since:"2.7.0"})],pe.prototype,"fetch",null);c([u({since:"2.7.0"})],pe.prototype,"update",null);c([u({since:"2.7.0"})],pe.prototype,"remove",null);class D{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/statuses/${t}`)}create(t,e={}){return e.idempotencyKey?this.http.post("/api/v1/statuses",t,{headers:{"Idempotency-Key":e.idempotencyKey}}):this.http.post("/api/v1/statuses",t)}update(t,e){return this.http.put(`/api/v1/statuses/${t}`,e)}remove(t){return this.http.delete(`/api/v1/statuses/${t}`)}fetchContext(t){return this.http.get(`/api/v1/statuses/${t}/context`)}fetchCard(t){return this.http.get(`/api/v1/statuses/${t}/card`)}favourite(t){return this.http.post(`/api/v1/statuses/${t}/favourite`)}unfavourite(t){return this.http.post(`/api/v1/statuses/${t}/unfavourite`)}mute(t){return this.http.post(`/api/v1/statuses/${t}/mute`)}unmute(t){return this.http.post(`/api/v1/statuses/${t}/unmute`)}listRebloggedBy(t){return new $(this.http,`/api/v1/statuses/${t}/reblogged_by`)}listFavouritedBy(t){return new $(this.http,`/api/v1/statuses/${t}/favourited_by`)}reblog(t,e){return this.http.post(`/api/v1/statuses/${t}/reblog`,e)}unreblog(t){return this.http.post(`/api/v1/statuses/${t}/unreblog`)}pin(t){return this.http.post(`/api/v1/statuses/${t}/pin`)}unpin(t){return this.http.post(`/api/v1/statuses/${t}/unpin`)}bookmark(t){return this.http.post(`/api/v1/statuses/${t}/bookmark`)}unbookmark(t){return this.http.post(`/api/v1/statuses/${t}/unbookmark`)}listHistory(t){return new $(this.http,`/api/v1/statuses/${t}/history`)}fetchSource(t){return this.http.get(`/api/v1/statuses/${t}/source`)}translate(t,e){return this.http.post(`/api/v1/statuses/${t}/translate`,e,{headers:{"Content-Type":"multipart/form-data"}})}}c([u({since:"0.0.0"})],D.prototype,"fetch",null);c([u({since:"0.0.0"})],D.prototype,"create",null);c([u({since:"3.5.0"})],D.prototype,"update",null);c([u({since:"0.0.0"})],D.prototype,"remove",null);c([u({since:"0.0.0"})],D.prototype,"fetchContext",null);c([Me("Use `card` attribute of status instead"),u({since:"0.0.0",until:"2.9.3"})],D.prototype,"fetchCard",null);c([u({since:"0.0.0"})],D.prototype,"favourite",null);c([u({since:"0.0.0"})],D.prototype,"unfavourite",null);c([u({since:"1.4.2"})],D.prototype,"mute",null);c([u({since:"1.4.2"})],D.prototype,"unmute",null);c([u({since:"0.0.0"})],D.prototype,"listRebloggedBy",null);c([u({since:"0.0.0"})],D.prototype,"listFavouritedBy",null);c([u({since:"0.0.0"})],D.prototype,"reblog",null);c([u({since:"0.0.0"})],D.prototype,"unreblog",null);c([u({since:"1.6.0"})],D.prototype,"pin",null);c([u({since:"1.6.0"})],D.prototype,"unpin",null);c([u({since:"3.1.0"})],D.prototype,"bookmark",null);c([u({since:"3.1.0"})],D.prototype,"unbookmark",null);c([u({since:"3.5.0"})],D.prototype,"listHistory",null);c([u({since:"3.5.0"})],D.prototype,"fetchSource",null);c([u({since:"4.0.0"})],D.prototype,"translate",null);let Xr=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/suggestions",t)}remove(t){return this.http.delete(`/api/v1/suggestions/${t}`)}};c([Me("Use MastoClient.v2.suggestions.list instead"),u({since:"2.4.3"})],Xr.prototype,"list",null);c([u({since:"2.4.3"})],Xr.prototype,"remove",null);class qt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}listHome(t){return new $(this.http,"/api/v1/timelines/home",t)}listPublic(t){return new $(this.http,"/api/v1/timelines/public",t)}listHashtag(t,e){return new $(this.http,`/api/v1/timelines/tag/${t}`,e)}listList(t,e){return new $(this.http,`/api/v1/timelines/list/${t}`,e)}listDirect(t){return new $(this.http,"/api/v1/timelines/direct",t)}}c([u({since:"0.0.0"})],qt.prototype,"listHome",null);c([u({since:"0.0.0"})],qt.prototype,"listPublic",null);c([u({since:"0.0.0"})],qt.prototype,"listHashtag",null);c([u({since:"2.1.0"})],qt.prototype,"listList",null);c([Me("Use conversations API instead"),u({since:"0.0.0",until:"2.9.3"})],qt.prototype,"listDirect",null);let Ge=class{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}listStatuses(t){return new $(this.http,"/api/v1/trends/statuses",t)}listLinks(t){return new $(this.http,"/api/v1/trends/links",t)}listTags(t){return new $(this.http,"/api/v1/trends/tags",t)}};c([u({since:"3.5.0"})],Ge.prototype,"listStatuses",null);c([u({since:"3.5.0"})],Ge.prototype,"listLinks",null);c([u({since:"3.0.0"})],Ge.prototype,"listTags",null);class iu{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}createConfirmation(t){return this.http.post("/api/v1/email/confirmations",t)}}class We{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.get(`/api/v1/tags/${t}`)}follow(t){return this.http.post(`/api/v1/tags/${t}/follow`)}unfollow(t){return this.http.post(`/api/v1/tags/${t}/unfollow`)}}c([u({since:"4.0.0"})],We.prototype,"fetch",null);c([u({since:"4.0.0"})],We.prototype,"follow",null);c([u({since:"4.0.0"})],We.prototype,"unfollow",null);class Es{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/followed_tags",t)}}c([u({since:"4.0.0"})],Es.prototype,"list",null);class pt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/accounts",t)}fetch(t){return this.http.get(`/api/v1/admin/accounts/${t}`)}createAction(t,e){return this.http.post(`/api/v1/admin/accounts/${t}/action`,e)}approve(t){return this.http.post(`/api/v1/admin/accounts/${t}/approve`)}reject(t){return this.http.post(`/api/v1/admin/accounts/${t}/reject`)}enable(t){return this.http.post(`/api/v1/admin/accounts/${t}/enable`)}unsilence(t){return this.http.post(`/api/v1/admin/accounts/${t}/unsilence`)}unsuspend(t){return this.http.post(`/api/v1/admin/accounts/${t}/unsuspend`)}}c([u({since:"2.9.1"})],pt.prototype,"list",null);c([u({since:"2.9.1"})],pt.prototype,"fetch",null);c([u({since:"2.9.1"})],pt.prototype,"createAction",null);c([u({since:"2.9.1"})],pt.prototype,"approve",null);c([u({since:"2.9.1"})],pt.prototype,"reject",null);c([u({since:"2.9.1"})],pt.prototype,"enable",null);c([u({since:"2.9.1"})],pt.prototype,"unsilence",null);c([u({since:"2.9.1"})],pt.prototype,"unsuspend",null);class Vt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/canonical_email_blocks",t)}fetch(t){return this.http.get(`/api/v1/admin/canonical_email_blocks/${t}`)}test(t){return this.http.post("/api/v1/admin/canonical_email_blocks/test",t)}create(t){return this.http.post("/api/v1/admin/canonical_email_blocks",t)}remove(t){return this.http.delete(`/api/v1/admin/canonical_email_blocks/${t}`)}}c([u({since:"4.0.0"})],Vt.prototype,"list",null);c([u({since:"4.0.0"})],Vt.prototype,"fetch",null);c([u({since:"4.0.0"})],Vt.prototype,"test",null);c([u({since:"4.0.0"})],Vt.prototype,"create",null);c([u({since:"4.0.0"})],Vt.prototype,"remove",null);class ou{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.post("/api/v1/admin/dimensions",t,{headers:{"Content-Type":"multipart/form-data"}})}}class he{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/domain_allows",t)}fetch(t){return this.http.get(`/api/v1/admin/domain_allows/${t}`)}create(t){return this.http.post("/api/v1/admin/domain_allows",t)}remove(t){return this.http.delete(`/api/v1/admin/domain_allows/${t}`)}}c([u({since:"4.0.0"})],he.prototype,"list",null);c([u({since:"4.0.0"})],he.prototype,"fetch",null);c([u({since:"4.0.0"})],he.prototype,"create",null);c([u({since:"4.0.0"})],he.prototype,"remove",null);class Ht{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/domain_blocks",t)}fetch(t){return this.http.get(`/api/v1/admin/domain_blocks/${t}`)}create(t){return this.http.post("/api/v1/admin/domain_blocks",t)}update(t,e){return this.http.put(`/api/v1/admin/domain_blocks/${t}`,e)}remove(t){return this.http.delete(`/api/v1/admin/domain_blocks/${t}`)}}c([u({since:"4.0.0"})],Ht.prototype,"list",null);c([u({since:"4.0.0"})],Ht.prototype,"fetch",null);c([u({since:"4.0.0"})],Ht.prototype,"create",null);c([u({since:"4.0.0"})],Ht.prototype,"update",null);c([u({since:"4.0.0"})],Ht.prototype,"remove",null);class fe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/email_domain_blocks ",t)}fetch(t){return this.http.get(`/api/v1/admin/email_domain_blocks/${t}`)}create(t){return this.http.post("/api/v1/admin/email_domain_blocks ",t)}remove(t){return this.http.delete(`/api/v1/admin/email_domain_blocks/${t}`)}}c([u({since:"4.0.0"})],fe.prototype,"list",null);c([u({since:"4.0.0"})],fe.prototype,"fetch",null);c([u({since:"4.0.0"})],fe.prototype,"create",null);c([u({since:"4.0.0"})],fe.prototype,"remove",null);class zt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/ip_blocks",t)}fetch(t){return this.http.get(`/api/v1/admin/ip_blocks/${t}`)}create(t){return this.http.post("/api/v1/admin/ip_blocks",t)}update(t){return this.http.put("/api/v1/admin/ip_blocks",t)}remove(t){return this.http.delete(`/api/v1/admin/ip_blocks/${t}`)}}c([u({since:"4.0.0"})],zt.prototype,"list",null);c([u({since:"4.0.0"})],zt.prototype,"fetch",null);c([u({since:"4.0.0"})],zt.prototype,"create",null);c([u({since:"4.0.0"})],zt.prototype,"update",null);c([u({since:"4.0.0"})],zt.prototype,"remove",null);class Ss{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(t){return this.http.post("/api/v1/admin/measures",t,{headers:{"Content-Type":"multipart/form-data"}})}}c([u({since:"3.5.0"})],Ss.prototype,"fetch",null);class Tt{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v1/admin/reports",t)}fetch(t){return this.http.get(`/api/v1/admin/reports/${t}`)}assignToSelf(t){return this.http.post(`/api/v1/admin/reports/${t}/assign_to_self`)}unassign(t){return this.http.post(`/api/v1/admin/reports/${t}/unassign`)}resolve(t){return this.http.post(`/api/v1/admin/reports/${t}/resolve`)}reopen(t){return this.http.post(`/api/v1/admin/reports/${t}/reopen`)}}c([u({since:"2.9.1"})],Tt.prototype,"list",null);c([u({since:"2.9.1"})],Tt.prototype,"fetch",null);c([u({since:"2.9.1"})],Tt.prototype,"assignToSelf",null);c([u({since:"2.9.1"})],Tt.prototype,"unassign",null);c([u({since:"2.9.1"})],Tt.prototype,"resolve",null);c([u({since:"2.9.1"})],Tt.prototype,"reopen",null);class au{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}create(t){return this.http.get("/api/v1/admin/retention",t,{headers:{"Content-Type":"multipart/form-data"}})}}class qe{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}listLinks(){return new $(this.http,"/api/v1/admin/trends/links")}listStatuses(){return new $(this.http,"/api/v1/admin/trends/statuses")}listTags(){return new $(this.http,"/api/v1/admin/trends/statuses")}}c([u({since:"3.5.0"})],qe.prototype,"listLinks",null);c([u({since:"3.5.0"})],qe.prototype,"listStatuses",null);c([u({since:"3.5.0"})],qe.prototype,"listTags",null);class lu{get account(){return this.accounts}get report(){return this.reports}get domainEmailBlocks(){return this.emailDomainBlocks}constructor(t,e,n){this.http=t,this.config=e,this.logger=n,this.accounts=new pt(this.http,this.config,this.logger),this.canonicalEmailBlocks=new Vt(this.http,this.config,this.logger),this.dimensions=new ou(this.http,this.config,this.logger),this.domainBlocks=new Ht(this.http,this.config,this.logger),this.domainAllows=new he(this.http,this.config,this.logger),this.emailDomainBlocks=new fe(this.http,this.config,this.logger),this.ipBlocks=new zt(this.http,this.config,this.logger),this.measures=new Ss(this.http,this.config,this.logger),this.reports=new Tt(this.http,this.config,this.logger),this.retention=new au(this.http,this.config,this.logger),this.trends=new qe(this.http,this.config,this.logger)}}let bs=class{constructor(t,e,n,s){this.http=t,this.config=n,this.logger=s,this.admin=new lu(t,n,s),this.stream=new ct(e,n,s),this.accounts=new L(t,n,s),this.announcements=new ie(t,n,s),this.apps=new Vr(t,n,s),this.blocks=new hs(t,n,s),this.bookmarks=new fs(t,n,s),this.conversations=new je(t,n,s),this.customEmojis=new ds(t,n,s),this.directory=new ys(t,n,s),this.domainBlocks=new Ue(t,n,s),this.endorsements=new vs(t,n,s),this.favourites=new ms(t,n,s),this.featuredTags=new oe(t,n,s),this.filters=new Wt(t,n,s),this.followRequests=new Be(t,n,s),this.instances=new ae(t,n,s),this.lists=new ut(t,n,s),this.markers=new Hr(t,n,s),this.mediaAttachments=new le(t,n,s),this.mutes=new gs(t,n,s),this.notifications=new ce(t,n,s),this.polls=new zr(t,n,s),this.preferences=new ws(t,n,s),this.webPushSubscriptions=new ue(t,n,s),this.reports=new $s(t,n,s),this.scheduledStatuses=new pe(t,n,s),this.statuses=new D(t,n,s),this.suggestions=new Xr(t,n,s),this.timelines=new qt(t,n,s),this.trends=new Ge(t,n,s),this.email=new iu(t,n,s),this.tags=new We(t,n,s),this.followedTags=new Es(t,n,s)}search(t){return new $(this.http,"/api/v1/search",t)}};c([u({since:"1.1.0",until:"3.0.0"})],bs.prototype,"search",null);class V{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(){return new $(this.http,"/api/v2/filters")}fetch(t){return this.http.get(`/api/v2/filters/${t}`)}create(t){return this.http.post("/api/v2/filters",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}update(t,e){return this.http.put(`/api/v2/filters/${t}`,e)}remove(t){return this.http.delete(`/api/v2/filters/${t}`)}listKeywords(t){return new $(this.http,`/api/v2/filters/${t}/keywords`)}createKeyword(t,e){return this.http.post(`/api/v2/filters/${t}/keywords`,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}fetchKeyword(t){return new $(this.http,`/api/v2/filters/keywords/${t}`)}updateKeyword(t,e){return this.http.put(`/api/v2/filters/keywords/${t}`,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}removeKeyword(t){return this.http.delete(`/api/v2/filters/keywords/${t}`)}listStatuses(t){return new $(this.http,`/api/v2/filters/${t}/statuses`)}createStatus(t,e){return this.http.post(`/api/v2/filters/${t}/statuses`,e)}fetchStatus(t){return this.http.get(`/api/v2/filters/${t}/statuses`)}removeStatus(t){return this.http.get(`/api/v2/filters/statuses/${t}`)}}c([u({since:"4.0.0"})],V.prototype,"list",null);c([u({since:"4.0.0"})],V.prototype,"fetch",null);c([u({since:"4.0.0"})],V.prototype,"create",null);c([u({since:"4.0.0"})],V.prototype,"update",null);c([u({since:"4.0.0"})],V.prototype,"remove",null);c([u({since:"4.0.0"})],V.prototype,"listKeywords",null);c([u({since:"4.0.0"})],V.prototype,"createKeyword",null);c([u({since:"4.0.0"})],V.prototype,"fetchKeyword",null);c([u({since:"4.0.0"})],V.prototype,"updateKeyword",null);c([u({since:"4.0.0"})],V.prototype,"removeKeyword",null);c([u({since:"4.0.0"})],V.prototype,"listStatuses",null);c([u({since:"4.0.0"})],V.prototype,"fetchStatus",null);c([u({since:"4.0.0"})],V.prototype,"removeStatus",null);class Rs{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}fetch(){return this.http.get("/api/v2/instance")}}c([u({since:"4.0.0"})],Rs.prototype,"fetch",null);class As{constructor(t,e,n){this.http=t,this.config=e,this.logger=n,this.v1=new le(t,e)}waitFor(t,e=1e3){return yt(this,void 0,void 0,function*(){const n=this.config.createTimeout();let s;for(;s==null;){if(n.signal.aborted)throw new ke("The media encoding has been timed out in your instance.");yield Yc(e);try{const i=yield this.v1.fetch(t);i.url!=null&&(s=i,n.clear())}catch(i){if(i instanceof Fe)continue;throw i}}return s})}create(t,e={}){return yt(this,void 0,void 0,function*(){const n=yield this.http.post("/api/v2/media",t,{headers:{"Content-Type":"multipart/form-data"}});return e.skipPolling?n:this.waitFor(n.id)})}}c([u({since:"3.1.3"})],As.prototype,"create",null);class Os{constructor(t,e,n){this.http=t,this.config=e,this.logger=n}list(t){return new $(this.http,"/api/v2/suggestions",t)}}c([u({since:"3.4.0"})],Os.prototype,"list",null);class Ts{constructor(t,e,n){this.http=t,this.config=e,this.logger=n,this.filters=new V(t,e,n),this.instance=new Rs(t,e,n),this.mediaAttachments=new As(t,e,n),this.suggestions=new Os(t,e,n)}search(t){return new $(this.http,"/api/v2/search",t)}}c([u({since:"2.4.1"})],Ts.prototype,"search",null);class cu{constructor(t){this.http=t}createToken(t){return this.http.post("/oauth/token",t,{headers:{"Content-Type":"multipart/form-data"}})}}class uu{constructor(t,e,n,s){this.http=t,this.ws=e,this.config=n,this.logger=s,this.v1=new bs(t,e,n,s),this.v2=new Ts(t,n,s),this.oauth=new cu(t)}}const Is=r=>typeof r=="object"&&r!==null&&r.constructor.name==="Object",wr=(r,t="")=>Array.isArray(r)?r.map((e,n)=>wr(e,t==""?n.toString():`${t}[${n}]`)).reduce((e,n)=>Object.assign(e,n),{}):Is(r)?Object.entries(r).map(([e,n])=>wr(n,t===""?e:`${t}[${e}]`)).reduce((e,n)=>Object.assign(e,n),{}):t===""?r:{[t]:r},re=(r,t)=>Array.isArray(r)?r.map(e=>re(e,t)):Is(r)?Object.fromEntries(Object.entries(r).map(([e,n])=>[t(e),re(n,t)])):r;class pu{serialize(t,e){if(e==null)return;const n=re(e,Bn);switch(t){case"application/json":return JSON.stringify(n);case"multipart/form-data":{const s=new Gn;for(const[i,o]of Object.entries(wr(n))){if(globalThis.Buffer!=null&&o instanceof globalThis.Buffer){s.append(i,o,"blob");continue}s.append(i,o)}return s}case"application/x-www-form-urlencoded":return mr.stringify(n,{encode:!1,arrayFormat:"brackets"});default:return}}serializeQueryString(t){const e=re(t,Bn);return mr.stringify(e,{encode:!1,arrayFormat:"brackets"})}deserialize(t,e){switch(t){case"application/json":try{return re(JSON.parse(e),qc)}catch{return}default:throw new Wr(`Unknown content type ${t} returned from the server.`,t,e)}}}class Kr extends gr{constructor(t,e,n){super(),this.ws=t,this.serializer=e,this.logger=n,this.handleMessage=({data:s})=>{const{event:i,payload:o}=this.serializer.deserialize("application/json",s);if(this.logger.info(` WEBSOCKET ${i}`),this.logger.debug("	body",o),i==="delete")return void this.emit(i,o);let l=[];try{l.push(this.serializer.deserialize("application/json",o))}catch{l=[]}this.emit(i,...l)}}static connect(t,e,n,s){return new Promise((i,o)=>{const l=new zc(t,s),a=new Kr(l,e,n);l.addEventListener("message",a.handleMessage),l.addEventListener("error",o),l.addEventListener("open",()=>i(a))})}disconnect(){this.ws&&this.ws.close()}}class hu{constructor(t,e,n){this.config=t,this.serializer=e,this.logger=n}stream(t,e={}){return Kr.connect(this.config.resolveWebsocketPath(t,e),this.serializer,this.logger,this.config.createWebsocketProtocols())}}const Ps=r=>{const t=r.version&&!r.disableVersionCheck?new bt.SemVer(r.version,!0):void 0,e=Object.assign(Object.assign({},r),{version:t}),n=new pu,s=new ru(e,n),i=new Qc(s.getLogLevel()),o=new su(n,s,i);return{serializer:n,config:s,logger:i,http:o}},fu=r=>{const{http:t,config:e}=Ps(r);return new ae(t,e).fetch()},du=r=>{const{serializer:t,config:e,logger:n,http:s}=Ps(r),i=new hu(e,t,n);return n.debug("Masto.js initialised",e),new uu(s,i,e,n)},yu=r=>yt(void 0,void 0,void 0,function*(){const t=yield fu(r);return du(Object.assign(Object.assign({},r),{version:t.version,streamingApiUrl:t.urls.streamingApi}))}),vu=r=>{let t,e;const n=r.split(",");for(const s of n){if(s.includes("max_id")){const i=s.indexOf("max_id="),o=s.indexOf(">");t=s.substring(i,o)}if(s.includes("min_id")){const i=s.indexOf("min_id="),o=s.indexOf(">");e=s.substring(i,o)}}return[e,t]},Qr=r=>({shortcode:r.shortcode,url:r.url,static_url:r.staticUrl,visible_in_picker:r.visibleInPicker}),mu=r=>({name:r.name,count:r.count,me:r.me,url:r.url,static_url:r.staticUrl}),gu=r=>({id:r.id,content:r.content,starts_at:new Date(r.startsAt),ends_at:new Date(r.endsAt),all_day:r.allDay,published_at:new Date(r.publishedAt),updated_at:new Date(r.updatedAt),read:!0,mentions:r.mentions,statuses:r.statuses,tags:r.tags,emojis:r.emojis.map(Qr),reactions:r.reactions.map(mu)}),wu=r=>({name:r.name,value:r.value,verified_at:r.verifiedAt==null?null:new Date(r.verifiedAt)}),Yr=r=>{var t,e;return{id:r.id,username:r.username,acct:r.acct,display_name:r.displayName,locked:r.locked,bot:(t=r.bot)!=null?t:!1,discoverable:r.discoverable,created_at:new Date(r.createdAt),note:r.note,url:r.url,avatar:r.avatar,avatar_static:r.avatarStatic,header:r.header,header_static:r.headerStatic,followers_count:r.followersCount,following_count:r.followingCount,statuses_count:r.statusesCount,last_status_at:new Date(r.lastStatusAt),emojis:r.emojis.map(Qr),fields:(e=r.fields)==null?void 0:e.map(wu)}},Ns=r=>{var t,e,n,s;if(r!=null)return{id:r.id,created_at:new Date(r.createdAt),in_reply_to_id:r.inReplyToId,in_reply_to_account_id:r.inReplyToAccountId,sensitive:r.sensitive,spoiler_text:r.spoilerText,visibility:r.visibility,language:r.language,uri:r.uri,url:r.url,replies_count:r.repliesCount,reblogs_count:r.reblogsCount,favourites_count:r.favouritesCount,favourited:(t=r.favourited)!=null?t:!1,reblogged:(e=r.reblogged)!=null?e:!1,muted:(n=r.muted)!=null?n:!1,bookmarked:(s=r.bookmarked)!=null?s:!1,content:r.content,application:r.application,account:Yr(r.account),media_attachments:r.mediaAttachments,mentions:r.mentions,tags:r.tags,emojis:r.emojis.map(Qr)}},$u=r=>({id:r.id,unread:r.unread,accounts:r.accounts.map(Yr),last_status:Ns(r.lastStatus)}),Eu=r=>({id:r.id,type:r.type,createdAt:r.createdAt,account:Yr(r.account),status:Ns(r.status)});var Su=Object.defineProperty,bu=Object.getOwnPropertyDescriptor,Ru=(r,t,e,n)=>{for(var s=n>1?void 0:n?bu(t,e):t,i=r.length-1,o;i>=0;i--)(o=r[i])&&(s=(n?o(t,e,s):o(s))||s);return n&&s&&Su(t,e,s),s};let $r=class{constructor(){W(this,"_config");W(this,"getStream",r=>r.client.v1.stream.streamUser());W(this,"sendBasicToot",(r,t,e=null)=>{const n={status:t};return e!=null&&(n.inReplyToId=e),this.sendToot(r,n)});W(this,"sendToot",async(r,t)=>{try{await r.client.v1.statuses.create({...t,mediaIds:void 0})}catch(e){It().e(r.name,"sendToot",e)}});W(this,"uploadTootMedia",async(r,t)=>(await r.client.v2.mediaAttachments.create({file:new Blob([t])})).id);W(this,"sendTootWithMedia",async(r,t,e)=>{try{const n=await this.uploadTootMedia(r,t);await r.client.v1.statuses.create({...e,mediaIds:[n],poll:void 0})}catch(n){It().e(r.name,"sendTootWithMedia",n)}});W(this,"preferences",r=>r.client.v1.preferences.fetch());W(this,"getConversations",async r=>{try{return{isSuccess:!0,value:(await r.client.v1.conversations.list()).map($u),errorMessage:""}}catch(t){return It().e(r.name,"getConversations",t),{isSuccess:!1,value:[],errorMessage:t.toString()}}});W(this,"getNotifications",async r=>{try{return{isSuccess:!0,value:(await r.client.v1.notifications.list()).map(Eu),errorMessage:""}}catch(t){return It().e(r.name,"getNotifications",t),{isSuccess:!1,value:[],errorMessage:t.toString()}}});W(this,"getAnnouncements",async(r,t=!1)=>{try{return{isSuccess:!0,value:(await r.client.v1.announcements.list()).map(gu),errorMessage:""}}catch(e){return It().e(r.name,"getAnnouncements",e),{isSuccess:!1,value:[],errorMessage:e.toString()}}});W(this,"getDomainBlocksPaginator",(r,t,e=25)=>r.client.v1.admin.domainBlocks.list({limit:e}));W(this,"getDomainBlocks",async(r,t,e=25)=>{let n=`admin/domain_blocks?limit=${e}`;return t.length>0&&(n+=`&${t}`),await new ks(this._config.getMastodonUrl()).get(n,()=>({headers:{Authorization:`Bearer ${r.accessToken}`}}),o=>{const l=vu(o.headers.link);return{isSuccess:!0,value:o.data,prevPage:l[0],nextPage:l[1],errorMessage:""}})});W(this,"unblockDomain",async(r,t)=>{try{return await r.client.v1.admin.domainBlocks.remove(t),{isSuccess:!0,errorMessage:""}}catch(e){return It().e(r.name,"unblockDomain",e),{isSuccess:!1,errorMessage:e.toString()}}});const r=Fs();this._config=r}createClient(r){return yu({url:this._config.getMastodonUrl(),accessToken:r.accessToken,timeout:this._config.getMastodonTimeout()})}};$r=Ru([Ds()],$r);const _s=()=>Ms.get($r),Mu=async r=>{const t=_s();if(r==null||r.accounts==null||r.accounts.length<1)return[t,null];const e=r.accounts[0];return Au(e)},Au=async r=>{const t=_s();if(r==null)return[t,null];const e=await t.createClient(r),n={name:r.name,type:r.type,dialog:r.dialog,client:e,stream:js};return[t,n]};export{Mu as a,Au as g};
