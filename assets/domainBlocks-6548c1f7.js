import{u as j,v as L,a as i,N as l,J as E,k as I,b as e,S as a,C as x,G as d,a9 as O,aa as M,V as z,af as B,ag as G,ah as _,ai as s,aj as H,F as D,ak as V,B as N,Y as F,Z as J,_ as Y,$ as Z,a0 as q,a1 as K,a2 as Q,a3 as U,a4 as W,h as X,w as ee,y as te,al as h,am as c,an as ne,t as o}from"./index-74d1e11d.js";import{a as T}from"./mastodonHelper-b68fd603.js";import{R as re}from"./responsiveCustomGrid-cebcf199.js";const ae=o("<span></span>"),le=o("<span>💬</span>"),se=o("<span>📼</span>"),ce=o("<span>📈</span>"),oe=o("<span>📛</span>"),ie=o('<span class="pointer">❌</span>'),he=()=>{const m=[15,30,50,100,200],p=j(L),[u,S]=i(l.Loading),[w,A]=i([]),[$,v]=i(),[C,y]=i(m[0]),[b,f]=i(1);E(()=>{k()});const k=async()=>{console.log("setup");const[t,n]=await T(p);if(n==null)return;const r=t.getDomainBlocks(n,"",C());v(r),g()},g=async()=>{const t=$();if(t==null)return;console.log("getDomainBlocks",t);const n=await t;(n==null||n.length==null||n.length<1)&&(I().e("Could not fetch domain blocks",n.errorMessage),S(l.Error)),v(t),A(n),S(l.Success)},P=t=>async()=>{const[n,r]=await T(p);r!=null&&(await n.unblockDomain(r,t),await g())},R=t=>{const n=(()=>{const r=ae.cloneNode(!0);return te(r,()=>t.domain),r})();return e(_,{get children(){return[e(h,{get children(){return e(a,{get when(){return t.private_comment!=null},fallback:n,get children(){return e(c,{get label(){return t.private_comment},children:n})}})}}),e(h,{textAlign:"center",class:"noselect",get children(){return[e(a,{get when(){return t.private_comment},get children(){return e(c,{label:"Private Comment",get children(){return le.cloneNode(!0)}})}})," ",e(a,{get when(){return t.reject_media},get children(){return e(c,{label:"Reject media",get children(){return se.cloneNode(!0)}})}})," ",e(a,{get when(){return t.reject_reports},get children(){return e(c,{label:"Reject reports",get children(){return ce.cloneNode(!0)}})}})," ",e(a,{get when(){return t.severity},get children(){return e(c,{get label(){return t.severity},get children(){return oe.cloneNode(!0)}})}})]}}),e(h,{numeric:!0,class:"noselect",get children(){return e(c,{label:"Remove block",get children(){const r=ie.cloneNode(!0);return ne(r,"click",P(t.id),!0),r}})}})]}})};return e(re,{get children(){return[e(a,{get when(){return u()==l.Error},get children(){return e(x,{children:"Something went wrong"})}}),e(a,{get when(){return u()==l.Loading},get children(){return e(d,{colSpan:4,get children(){return e(O,{})}})}}),e(a,{get when(){return u()==l.Success},get children(){return[e(d,{colSpan:4,get children(){return e(M,{text:"Domains that are blocked"})}}),e(d,{colSpan:4,get children(){return e(a,{get when(){return w().length>0},get fallback(){return e(x,{minH:"25vh",children:"No Items"})},get children(){return e(z,{justifyContent:"flex-start",alignItems:"flex-start",get children(){return e(B,{dense:!0,highlightOnHover:!0,striped:"even",get children(){return[e(G,{get children(){return e(_,{class:"noselect",get children(){return[e(s,{children:"Domain"}),e(s,{textAlign:"center",children:"Restrictions"}),e(s,{})]}})}}),e(H,{get children(){return e(D,{get each(){return w()},children:R})}}),e(V,{class:"noselect",get children(){return[e(s,{}),e(s,{textAlign:"center",get children(){return[e(N,{mr:10,get disabled(){return b()<2},onClick:()=>{f(t=>t-1),g()},colorScheme:"warning",transform:"rotate(180deg)",children:"➤"}),"Page: ",b,e(N,{ml:10,colorScheme:"warning",onClick:()=>{f(t=>t+1),g()},children:"➤"})]}}),e(s,{get children(){return e(F,{get value(){return C()},onChange:t=>{y(t),k()},get children(){return[e(J,{get children(){return[e(Y,{}),e(Z,{})]}}),e(q,{get children(){return e(K,{get children(){return e(D,{each:m,children:t=>e(Q,{value:t,get children(){return[e(U,{children:t}),e(W,{})]}})})}})}})]}})}})]}})]}})}})}})}}),e(X,{m:"3em"})]}})]}})};ee(["click"]);export{he as DomainBlocksPage,he as default};
