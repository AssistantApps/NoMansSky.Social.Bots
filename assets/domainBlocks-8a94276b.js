import{u as I,s as O,a,N as s,a7 as z,k as B,b as e,S as n,C as f,G as p,a9 as G,aa as H,V as M,ae as V,af as F,ag as C,ah as c,ai as Y,F as _,aj as Z,B as L,Y as q,Z as J,_ as K,$ as Q,a0 as U,a1 as W,a2 as X,a3 as ee,a4 as te,h as ne,w as re,ak as S,al as l,y as ae,am as se,t as o}from"./index-f42e43f7.js";import{g as N}from"./mastodonApiService-bb20db06.js";import{R as ce}from"./responsiveCustomGrid-e77d22b5.js";const le=o("<span></span>"),oe=o("<span>💬</span>"),ie=o("<span>📼</span>"),ge=o("<span>📈</span>"),ue=o("<span>📛</span>"),de=o('<span class="pointer">❌</span>'),Se=()=>{const k=[15,30,50,100,200],g=I(O),[u,v]=a(s.Loading),[w,T]=a([]),[d,A]=a(k[0]),[h,m]=a(1),[D,P]=a(""),[$,R]=a(""),[y,x]=a("");z(()=>{b()},[h,d]);const b=async()=>{if(g==null||g.accounts==null||g.accounts.length<1)return;const t=g.accounts[0];console.log(t);const i=await N().getDomainBlocks(t.accessToken,y(),d());i.isSuccess==!1&&(B().e("Could not fetch domain blocks",i.errorMessage),v(s.Error)),T(i.value),P(i.prevPage),R(i.nextPage),v(s.Success)},j=t=>async()=>{await N().unblockDomain(t),await b()},E=t=>e(C,{get children(){return[e(S,{get children(){return e(l,{get label(){return t.private_comment},get children(){const r=le.cloneNode(!0);return ae(r,()=>t.domain),r}})}}),e(S,{textAlign:"center",class:"noselect",get children(){return[e(n,{get when(){return t.private_comment},get children(){return e(l,{label:"Private Comment",get children(){return oe.cloneNode(!0)}})}})," ",e(n,{get when(){return t.reject_media},get children(){return e(l,{label:"Reject media",get children(){return ie.cloneNode(!0)}})}})," ",e(n,{get when(){return t.reject_reports},get children(){return e(l,{label:"Reject reports",get children(){return ge.cloneNode(!0)}})}})," ",e(n,{get when(){return t.severity},get children(){return e(l,{get label(){return t.severity},get children(){return ue.cloneNode(!0)}})}})]}}),e(S,{numeric:!0,class:"noselect",get children(){return e(l,{label:"Remove block",get children(){const r=de.cloneNode(!0);return se(r,"click",j(t.id),!0),r}})}})]}});return e(ce,{get children(){return[e(n,{get when(){return u()==s.Error},get children(){return e(f,{children:"Something went wrong"})}}),e(n,{get when(){return u()==s.Loading},get children(){return e(p,{colSpan:4,get children(){return e(G,{})}})}}),e(n,{get when(){return u()==s.Success},get children(){return[e(p,{colSpan:4,get children(){return e(H,{text:"Domains that are blocked"})}}),e(p,{colSpan:4,get children(){return e(n,{get when(){return w().length>0},get fallback(){return e(f,{minH:"25vh",children:"No Items"})},get children(){return e(M,{justifyContent:"flex-start",alignItems:"flex-start",get children(){return e(V,{dense:!0,highlightOnHover:!0,striped:"even",get children(){return[e(F,{get children(){return e(C,{class:"noselect",get children(){return[e(c,{children:"Domain"}),e(c,{textAlign:"center",children:"Restrictions"}),e(c,{})]}})}}),e(Y,{get children(){return e(_,{get each(){return w()},children:E})}}),e(Z,{class:"noselect",get children(){return[e(c,{}),e(c,{textAlign:"center",get children(){return[e(L,{mr:10,get disabled(){return h()<2},onClick:()=>{x(D()),m(t=>t-1)},colorScheme:"warning",transform:"rotate(180deg)",children:"➤"}),"Page: ",h,e(L,{ml:10,colorScheme:"warning",onClick:()=>{x($()),m(t=>t+1)},children:"➤"})]}}),e(c,{get children(){return e(q,{get value(){return d()},onChange:t=>{A(t),m(1)},get children(){return[e(J,{get children(){return[e(K,{}),e(Q,{})]}}),e(U,{get children(){return e(W,{get children(){return e(_,{each:k,children:t=>e(X,{value:t,get children(){return[e(ee,{children:t}),e(te,{})]}})})}})}})]}})}})]}})]}})}})}})}}),e(ne,{m:"3em"})]}})]}})};re(["click"]);export{Se as DomainBlocksPage,Se as default};
