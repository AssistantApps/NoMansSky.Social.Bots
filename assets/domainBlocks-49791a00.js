import{u as I,v as O,a,N as s,aa as z,k as G,b as e,S as r,C as f,G as p,ac as H,ad as M,V,aj as B,ak as F,al as b,am as l,an as q,F as _,ao as J,B as L,$ as K,a0 as Q,a1 as U,a2 as W,a3 as X,a4 as Y,a5 as Z,a6 as ee,a7 as te,h as ne,x as re,z as ae,ap as S,T as i,aq as ce,t as o}from"./index-29fcf42d.js";import{a as N}from"./mastodonHelper-63edf8e0.js";import{R as se}from"./responsiveCustomGrid-cc725be0.js";const le=o("<span></span>"),ie=o("<span>💬</span>"),oe=o("<span>📼</span>"),ue=o("<span>📈</span>"),ge=o("<span>📛</span>"),de=o('<span class="pointer">❌</span>'),Se=()=>{const v=[15,30,50,100,200],u=I(O),[g,w]=a(s.Loading),[k,T]=a([]),[d,A]=a(v[0]),[h,m]=a(1),[D,P]=a(""),[$,R]=a(""),[j,x]=a("");z(()=>{C(),h(),d()});const C=async()=>{const[t,c]=await N(u);if(c==null)return;const n=await t.getDomainBlocks(u.accounts[0],j(),d());n.isSuccess==!1&&(G().e("Could not fetch domain blocks",n.errorMessage),w(s.Error)),T(n.value),P(n.prevPage),R(n.nextPage),w(s.Success)},y=t=>async()=>{const[c,n]=await N(u);n!=null&&(await c.unblockDomain(n,t),await C())},E=t=>{const c=(()=>{const n=le.cloneNode(!0);return ae(n,()=>t.domain),n})();return e(b,{get children(){return[e(S,{get children(){return e(r,{get when(){return t.private_comment!=null},fallback:c,get children(){return e(i,{get label(){return t.private_comment},children:c})}})}}),e(S,{textAlign:"center",class:"noselect",get children(){return[e(r,{get when(){return t.private_comment},get children(){return e(i,{label:"Private Comment",get children(){return ie.cloneNode(!0)}})}})," ",e(r,{get when(){return t.reject_media},get children(){return e(i,{label:"Reject media",get children(){return oe.cloneNode(!0)}})}})," ",e(r,{get when(){return t.reject_reports},get children(){return e(i,{label:"Reject reports",get children(){return ue.cloneNode(!0)}})}})," ",e(r,{get when(){return t.severity},get children(){return e(i,{get label(){return t.severity},get children(){return ge.cloneNode(!0)}})}})]}}),e(S,{numeric:!0,class:"noselect",get children(){return e(i,{label:"Remove block",get children(){const n=de.cloneNode(!0);return ce(n,"click",y(t.id),!0),n}})}})]}})};return e(se,{get children(){return[e(r,{get when(){return g()==s.Error},get children(){return e(f,{children:"Something went wrong"})}}),e(r,{get when(){return g()==s.Loading},get children(){return e(p,{colSpan:4,get children(){return e(H,{})}})}}),e(r,{get when(){return g()==s.Success},get children(){return[e(p,{colSpan:4,get children(){return e(M,{text:"Domains that are blocked"})}}),e(p,{colSpan:4,get children(){return e(r,{get when(){return k().length>0},get fallback(){return e(f,{minH:"25vh",children:"No Items"})},get children(){return e(V,{justifyContent:"flex-start",alignItems:"flex-start",get children(){return e(B,{dense:!0,highlightOnHover:!0,striped:"even",get children(){return[e(F,{get children(){return e(b,{class:"noselect",get children(){return[e(l,{children:"Domain"}),e(l,{textAlign:"center",children:"Restrictions"}),e(l,{})]}})}}),e(q,{get children(){return e(_,{get each(){return k()},children:E})}}),e(J,{class:"noselect",get children(){return[e(l,{}),e(l,{textAlign:"center",get children(){return[e(L,{mr:10,get disabled(){return h()<2},onClick:()=>{x(D()),m(t=>t-1)},colorScheme:"warning",transform:"rotate(180deg)",children:"➤"}),"Page: ",h,e(L,{ml:10,colorScheme:"warning",onClick:()=>{x($()),m(t=>t+1)},children:"➤"})]}}),e(l,{get children(){return e(K,{get value(){return d()},onChange:t=>{A(t),m(1)},get children(){return[e(Q,{get children(){return[e(U,{}),e(W,{})]}}),e(X,{get children(){return e(Y,{get children(){return e(_,{each:v,children:t=>e(Z,{value:t,get children(){return[e(ee,{children:t}),e(te,{})]}})})}})}})]}})}})]}})]}})}})}})}}),e(ne,{m:"3em"})]}})]}})};re(["click"]);export{Se as DomainBlocksPage,Se as default};
